<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>粒子效果</title>
    <style>
        .ball{
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: radial-gradient(#fff,#000);
            position: absolute;

        }
    </style>
</head>
<body>
<script>
    function Particle(ele){
        this.main_ele = ele.nodeType  === 9 ? ele :document.querySelector(ele);
        this.init();
    }
    Particle.prototype.init = function(){
        this.timer = null;
        this.cWidth  = document.documentElement.clientWidth;
        this.cHeight = document.documentElement.clientHeight;

        this.main_ele.addEventListener("mousedown",this.handlerMouseDown.bind(this));
        this.main_ele.addEventListener("mouseup",this.stopCreateBall(this));
        this.main_ele.addEventListener('mousemove',this.changeOffset(this));
    };
    Particle.prototype.handlerMouseDown=function(evt){
        var e = evt || event;
        this.offsetX = e.offsetX;
        this.offsetY = e.offsetY;
        this.timer = setInterval(function(){
            var ball =this.createBall();
            setTimeout(function(){
                this.ballMove(ball,e.offsetY);
            }.bind(this),100);
        }.bind(this),50)
    };
    Particle.prototype.changeOffset =function(evt){
        var e = evt || event;
        this.offsetX = e.offsetX;
        this.offsetY = e.offsetY;
    };
    Particle.prototype.createBall=function(){
        var ele = document.createElement("div");
        ele.className = 'ball';
        ele.style.left = this.offsetX + "px";
        ele.style.top = this.offsetY +"px";
        ele.style.transition ="all 1s";
        ele.style.background = getRandomColor();
        document.body.appendChild(ele);
        return ele;
    };
    Particle.prototype.ballMove=function(ball,minTop){
        var randomL = Math.round(Math.random()*this.cWidth);
        var randomT = Math.round(Math.random()*this.cHeight-minTop);
        ball.style.left = randomL +"px";
        ball.style.top = randomT + "px";
        ball.style.opacity =0.1;
        setTimeout(function(){
            ball.remove();
        },1000)
    };
    Particle.prototype.stopCreateBall = function(){
        clearInterval(this.timer);
    };
    function getRandomColor(){
        var r = Math.round(Math.random() * 255);
        var g = Math.round(Math.random() * 255);
        var b = Math.round(Math.random() * 255);
        return "rgb(" + r + "," + g + "," + b + ")";
    }
    new Particle(document);




  //   function Ball(ele){
  //       this.main_ele = ele.nodeType === 9 ? ele :document.querySelector(ele);
  //       this.init();
  //
  //   }
  //   Ball.prototype.init=function(){
  //       this.timer = null;
  //       this.cWidth = document.documentElement.clientWidth;
  //       this.cHeight = document.documentElement.clientHeight;
  //       this.main_ele.addEventListener("mousedown",this.handlerMouseDown.bind(this));
  //       this.main_ele.addEventListener("mouseup",this.stopCreateBall.bind(this));
  //       this.main_ele.addEventListener("mousemove",this.changeOffset.bind(this));
  //   };
  //   Ball.prototype.handlerMouseDown=function(evt){
  //       var e =evt || event;
  //       this.offsetX = e.offsetX;
  //       this.offsetY = e.offsetY;
  //       this.timer =setInterval(function(){
  //           var ball = this.createBall();
  //           setTimeout(function(){
  //               this.ballMove(ball,e.offsetY)
  //           }.bind(this),100);
  //       }.bind(this),50)
  //
  //   };
  //   Ball.prototype.ballMove =function(ball,minTop){
  //       var randomL= Math.round(Math.random()*this.cWidth);
  //       var randomT =minTop + Math.round(Math.random()*(this.cHeight-minTop));
  //       ball.style.left = randomL +'px';
  //       ball.style.top = randomT +'px';
  //       ball.style.opacity =0.1;
  //
  //       setTimeout(function(){
  //           ball.remove();
  //       },1000)
  //
  //   };
  //
  //   Ball.prototype.createBall=function(){
  //       var ele = document.createElement("div");
  //       ele.className = "ball";
  //       ele.style.left = this.offsetX +"px";
  //       ele.style.top =  this.offsetY +"px";
  //       ele.style.transition ="all 1s";
  //       ele.style.background = getRandomColor();
  //       document.body.appendChild(ele);
  //       return ele;
  //   };
  //   Ball.prototype.changeOffset=function (evt) {
  //     var e = evt || event;
  //     this.offsetX = e.offsetX;
  //     this.offsetY = e.offsetY;
  //   };
  //   function getRandomColor(){
  //       var r = Math.round(Math.random() * 255);
  //       var g = Math.round(Math.random() * 255);
  //       var b = Math.round(Math.random() * 255);
  //       return "rgb(" + r + "," + g + "," + b + ")";
  //   }
  //   Ball.prototype.stopCreateBall =function(){
  //       clearInterval(this.timer);
  //   };
  // new Ball(document);


    // function Ball(ele) {
    //     this.main_ele = ele.nodeType === 9 ? ele :document.querySelector(ele);
    //     this.init();
    // }
    // Ball.prototype.init = function (){
    //     this.timer = null;
    //     this.cWidth = document.documentElement.clientWidth;
    //     this.cHeight =document.documentElement.clientHeight;
    //     this.main_ele.addEventListener("mousedown",this.handlerMouseDown.bind(this));
    //     this.main_ele.addEventListener("mousemove",this.changeOffset.bind(this));
    //     this.main_ele.addEventListener("mouseup",this.stopCreateBall.bind(this));
    // };
    // Ball.prototype.handlerMouseDown =function(evt){
    //     var e =evt || event;
    //     this.offsetX = e.offsetX;
    //     this.offsetY = e.offsetY;
    //     this.timer = setInterval(function(){
    //         var ball =this.createBall();
    //         setTimeout(function(){
    //             this.ballMove(ball,this.offsetY);
    //         }.bind(this),50)
    //     }.bind(this),100)
    // };
    // Ball.prototype.ballMove=function(ball,minTop){
    //     var randomL = Math.round(Math.random()*this.cWidth);
    //     var randomT = minTop+Math.round(Math.random()*(this.cHeight-minTop));
    //
    //     ball .style.left = randomL+"px";
    //     ball.style.top =  randomT+'px';
    //     ball.opacity =0.1;
    //     setTimeout(function () {
    //         ball.remove();
    //     },1000)
    // };
    // Ball.prototype.createBall=function () {
    //     var ele = document.createElement('div');
    //     ele.className= "ball";
    //     ele.style.left =this.offsetX + 'px';
    //     ele.style.top = this.offsetY + 'px';
    //     ele.style.transition ="all 1s";
    //     ele.style.background=getRandomColor();
    //     document.body.appendChild(ele);
    //     return ele;
    // };
    // Ball.prototype.changeOffset =function (evt) {
    //     var e = evt || event;
    //     this.offsetX = e.offsetX;
    //     this.offsetY = e.offsetY;
    // };
    // function getRandomColor(){
    //     var r = Math.round(Math.random() * 255);
    //     var g = Math.round(Math.random() * 255);
    //     var b = Math.round(Math.random() * 255);
    //     return "rgb(" + r + "," + g + "," + b + ")";
    // }
    // Ball.prototype.stopCreateBall=function(){
    //     clearInterval(this.timer);
    // };
    // new Ball(document);
</script>
</body>
</html>