<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>事件委托封装</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            list-style: none
        }

    </style>
</head>
<body>
<ul>
    <li class="lili">数组委托封装练习</li>
    <li class="lili">数组委托封装练习</li>
    <li class="lili">数组委托封装练习</li>
    <li class="lili">数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
    <li>数组委托封装练习</li>
</ul>
<script>
    // var lis =document.querySelectorAll("li");
    // for(var i =0,li; li =lis[i++]; ){
    //     li.addEventListener("click" , function (){
    //         console.log("hello ")
    //     })
    // }

    // var ul =document.querySelector("ul");
    // ul.addEventListener("click",function(e){
    //    var e = e || event;
    //    var target =e.target || e.srcElement;
    //
    //    if(target .nodeName === "LI"){
    //        console.log("hello world");
    //        target.style.background ="red";
    //    }
    // });

   var ul =document.querySelector("ul");
   var foo= null;
   ul .addEventListener("click", delegation(handlerClick,".lili"));
   function delegation (handlerClick,selector){
       return function (e) {
           var e = e || event;
           var target = e.taget || e.srcElement;

           var eleList = this.querySelectorAll(selector);
           var targetFamily = [];
           var _tempTarget = target;

           while(true){
               if(_tempTarget ===this){
                   break;
               }
               targetFamily .push(_tempTarget);
               _tempTarget =_tempTarget.parentNode;
           }
           for(var i=0, ele;ele=eleList[i++];){
               if(targetFamily === 1 ?ele===targetFamily[0] : targetFamily.indexOf(ele) !== -1){
                   handlerClick.call(ele,e);
                   break;
               }
           }
       }
   }
   function handlerClick(){
       this.style.background= "pink";
   }
</script>
</body>
</html>