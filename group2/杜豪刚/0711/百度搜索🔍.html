<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ÁôæÂ∫¶ÊêúÁ¥¢üîç</title>
    <style>
            body,html{
                  height: 100%;
            }
            .box{
                width: 500px;
                height: 360px;
                margin: 50px 0 0 100px;
            }
            input{
                border-radius:2px;
                width: 390px;
                height: 30px;
                float:left;
            }
            button{
                margin-left: 2px;
                width: 100px;
                height: 35px;
                float:left;
                border: none;
                background:#3385ff;
                color: #fff;
                letter-spacing: 1px;
            }
            #content{
                width:100%;
                height:320px;
                clear: both;
            }
      </style>  
</head>
<body>
    <div class="box">
        <input type="text" id="ipt">
        <button>ÁôæÂ∫¶‰∏Ä‰∏ã</button>
        <div id="content"></div>
    </div>
    
    <script>
        function jsonp(url,cb_fild,data){
            return new Promise(function(resolve,reject){
                let TEMP= "foo";
                window[TEMP] = function(res){
                    resolve(res)
                }
                url += (/\?/.test(url)? "&":"?")+cb_fild+"="+TEMP;
                // https://www.baidu.com/sugrec?pre=1&p=3
                if(typeof data === "object"){
                    let dataStr = "";
                    for(let attr in data){
                        dataStr +=(dataStr.length>0? "&" : "") + attr + "=" +data[attr];
                    }
                    url += "&" + dataStr;
                }
                let script = document.createElement("script");
                    script.src = url;
                    script.onload = function(){
                        this.remove();
                    }
                document.body.appendChild(script);
                })
        }
            // let url = "https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&"+
            //             "sugsid=26522,1429,21120,29522,29518,29237,28519,29098,28834,29221&wd=lol&req=2&bs=11&pbs=hello&"+
            //             "csor=3&pwd=lo&cb=jQuery1102017725804049139948_1562824612594&_=1562824612623";
            // jsonp(url,"cb").then(function(res){
            //     console.log(res);
            // });    
            // let url  = "https://www.baidu.com/sugrec";
            // let data = {
            //     pre     : 1,
            //     p       : 3,
            //     ie      : "utf-8",
            //     json    : 1,
            //     sugsid  : "26522,1429,21120,29522,29518,29237,28519,29098,28834,29221",
            //     wd      : "",
            //     _       : Date.now(),
            // }
            var url = "https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su";       //Êé•Âè£

            var data = {            //dataÊï∞ÊçÆ
                  json:1 ,
                  p:3,
                  sid:1423_21080_29238_28518_29099_28830_29221_22158,
                  req:2,
                  sc:"eb",
                  csor:0,
                  _:Date.now(),
                  wd : ""
            }

            let ipt     = document.getElementById("ipt");
            let content = document.getElementById("content");
            ipt.oninput = function(){
                // console.log(ipt.value);
                data.wd = ipt.value;
                jsonp(url,"cb",data).then( function (res){
                        // console.log(res);
                        var html = "";
                        res.s.forEach( item => html += `<p>${item}</p>`);
                        content.innerHTML = html;
                  })

            }

            // jsonp(url,"cb",data).then(function(res){
            //     console.log(res);
            // });
    </script>
</body>
</html>