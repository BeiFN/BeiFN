<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        li{
                  list-style-type: none;
            }
            *{
                  margin: 0;
                  padding: 0;
            }

            li{
                  padding: 3px 5px;
                  border-bottom: 2px solid #ddd;
                  text-align: center;
                  width: 80%;
                  margin: 5px auto;
                  background: #fff;
            }
            ul{
                  background: #ddd;
            }
    </style>
</head>
<body>

    <ul>
        <li class="new"><strong>这是</strong>li</li>
        <li class="new">这是li</li>
        <li class="new">这是li</li>
        <li class="new">这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
        <li>这是li</li>
    </ul>
    <script>
        //实现
        // var ul = document.querySelector('ul');
        //     ul.addEventListener('click', function(evt) {
        //         var e = evt || window.event;
        //         var target = e.target || e.srcElement;
        //         if (target.nodeName === 'LI') {
        //             target.style.background = '#0f0';
        //         }
        //     })
        //封装
        // var ul = document.querySelector('ul');
        //     ul.addEventListener('click',changeBgColor(changerFn,'LI'));
        //     function changeBgColor(handlerFn,panding){
        //         return function(evt){
        //             var e = evt || window.event;
        //             var target = e.target || e.srcElement;
        //             if(target.nodeName===panding){
        //                 handlerFn.call(target,e)
        //             }
                    
        //         }
        //     }
        //     function changerFn(e){
        //         this.style.background='#0f0'
        //     }
        //优化
        var ul = document.querySelector('ul');
        ul.addEventListener('click',changeBgColor(changerFn,'.new'));
        function changeBgColor(handlerFn,panding){
            return function(evt){
                var e=evt||window.event;
                var target = e.target || e.srcElement;
                var targetfamily=[];
                var _target=target;
                var count=0;
                while(true&&count++<100){   
                    if(_target===this){
                        break;
                    }
                    targetfamily.push(_target);
                    _target=target.parentNode;
                }
                var elelist=this.querySelectorAll(panding);
                // console.log(elelist);
                for(var i=0,ele;ele=elelist[i++];){
                    console.log(ele);
                    if(targetfamily.indexOf(ele)!==-1){
                        handlerFn.call(ele,e)
                        break;
                    }
                }
            }
        }
                    function changerFn(e){
                this.style.background='#0f0';
            }
            
    </script>
</body>
</html>