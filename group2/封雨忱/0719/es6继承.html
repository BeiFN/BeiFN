<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #box,#box2{
              width: 100px;
              height: 100px;
              background: #ddd;
              position: absolute;
              left: 0;
              top: 0;
        }
        #box2{
              left: 200px;
              background: yellowgreen;
        }
  
  </style>
</head>
<body>
    <div id="box"></div>
    <div id="box2"></div>
    <script>
    class Drag{
                  constructor( selector ){
                        this.init(selector);
                  }
                  init(selector){
                        this.moveCb = null;
                        this.ele = document.querySelector(selector);
                        this.ele.addEventListener( "mousedown" , this.start.bind(this) );
                        this.ele.addEventListener( "mouseup"   , this.end.bind(this) );
                  }
                  start(evt){
                        var e = evt || window.event;
                        this.offsetx = e.offsetX ; 
                        this.offsety = e.offsetY ;
                        document.removeEventListener("mousemove" , this.moveCb);
                        document.addEventListener( "mousemove" , this.moveCb = this.handlerMove.bind(this) );
                  }
                  handlerMove(evt){
                        var e = evt || window.event;
                        var 
                              x = e.clientX,
                              y = e.clientY; 
                              x = x - this.offsetx ; 
                              y = y - this.offsety ;
                        
                     
                        this.move(x,y);
                  }
                  move (x,y){
                        this.ele.style.left = x  + "px";
                        this.ele.style.top  = y + "px";
                  }    
                  end(){
                        document.removeEventListener("mousemove" , this.moveCb);
                  }

            }

            class ExtendDrag extends Drag{
                  move(x,y){
                        let res = this.boundary( x, y );
                        super.move( res.x , res.y);
                  }
                  boundary( x , y ){
                        x = x < 0 ? 0 : x ;
                        y = y < 0 ? 0 : y ;
                        return {
                              x , 
                              y
                        }
                  }
            }
            new Drag("#box");
            new ExtendDrag("#box2");
    </script>
</body>
</html>