<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        // var xhr = new XMLHttpRequest();
        //     xhr.open("POST","http://127.0.0.1/0710/ajaxpost.php");
        //     xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded")
        //     xhr.send("username=hello");
        //     xhr.onreadystatechange = function(){
        //           if(xhr.readyState === 4 && xhr.status === 200){
        //                 console.log(xhr.responseText);
        //           }
        //     }

        function ajax(
            url,
            {
                callback=(res)=>{},
                type    ="GET",
                data    ={},
                contentType="application/x-www-form-urlencoded"
            }={}
            ){
                var data_str="";
                for(var attr in data){
                    data_str += `${data_str.length > 0 ? "&" : ""}${attr}=${data[attr]}`;
                }
                // console.log(data_str);
            var xhr=new XMLHttpRequest();
            xhr.open(type,url+(type==="GET"?"?"+data_str:""));
            type="POST"? xhr.setRequestHeader("Content-type",contentType):"";
            xhr.send(type="POST"?data:null);
            xhr.onreadystatechange = function(){
                  if(xhr.readyState === 4 && xhr.status === 200){
                        console.log(xhr.responseText);
                  }
            }
    }
    ajax("http://127.0.0.1/0710/zcool.json",{
        callback:function(res){
            console.log(res);
        },
        data : {
                        username  : "hello world",
                        passworld : "123456"
                  }
    })




    // function ajax(
    //               url,
    //               {
    //                     callback    = (res)=>{} ,
    //                     type        = "GET",
    //                     data        = {},
    //                     contentType = "application/x-www-form-urlencoded"
    //               } = {}
    //         )
    //         {
    //               var data_str = "";
    //               for(var attr in data){
    //                     // 判定是否为第一次拼接,第一次拼接不拼接"";
    //                     data_str += `${data_str.length > 0 ? "&" : ""}${attr}=${data[attr]}`;
    //               }
    //               // console.log(data_str);
    //               var xhr = new XMLHttpRequest();
    //               xhr.open(type,url + (type === "GET" ? ( /\?/.test(url) ? "&" : "?" ) + data_str : "" ));
    //               type === "POST" ? xhr.setRequestHeader("Content-type" , contentType) : "";
    //               xhr.send(type === "POST" ? data_str : null);
    //               xhr.onreadystatechange = function(){
    //                     if(xhr.readyState === 4 && xhr.status === 200){
    //                          callback(xhr.responseText);
    //                     }
    //               }
    //         }
    //         ajax("http://127.0.0.1/0710/zcool.json",{
    //               callback : function(res){
    //                     console.log(res);
    //               },
    //               type : "POST",
    //               data : {
    //                     username  : "hello world",
    //                     passworld : "123456"
    //               }
    //         })
    </script>
</body>
</html>