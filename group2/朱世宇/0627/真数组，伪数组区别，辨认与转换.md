<h1>真数组，伪数组区别，辨认与转换</h1>



<h3>伪数组定义</h3>

> 1.伪数组是一个对象
>
> 2.伪数组必须要有length属性
>
> 3.如果这个对象的length不为0，那么必须要有按照下标存储的数据

一.数组级类型的辨认：

1.是不是数组

```javascript
var arr = [1,2,3,4];
var obj = {0:"1",1:"2",length:2};
function Isarray(selector){
    if(typeof selector === 'object'&&'length' in selector&&selector!==window){
       console.log('是数组')；
    }else{
        console.log('不是数组')；
    }
}
Isarray(arr);  //是
Isarray(obj);  //是
//必须判断selector不为window
```

2.是真数组还是伪数组

```javascript
var arr = [1,2,3,4];
var obj = {0:"1",1:"2",length=2}
//方法一，先判断是不是数组，在使用toString.apply方法判断
function Isarray(selector){
    if(typeof selector === 'object'&&'length' in selector&&selector!==window){
        if(({}).toString.apply(seletor)==='[object Array]'){
        console.log('是真数组')；   
        }else{
            console.log('是伪数组');
        }
    }else{
        console.log('不是数组')
    }
}
//方法二
利用Array.isArray()这个方法
console.log(Array.isArray(arr));//true
console.log(Array.isArray(obj));//false
```

![1556031360744](C:\Users\KINGYU\AppData\Roaming\Typora\typora-user-images\1556031360744.png)

二.伪数组转换为真数组

方法一：

```javascript
var obj = {0:'1',1:'2',length:2};
var arr = [];//真数组
[].push.apply(arr,obj);
```

此方法使用了[].push.apply(arr,obj);只兼容IE8+；

方法二：

```javascript
var obj = {0:'1',1:'2',length:2};
var arr = [].slice.call(obj);
```

三.真数组转换为伪数组

```javascript
var ar = [1,2,3,4];
var obj = {};
[].push.apply(obj,ar);
console.log(obj);
{0: 1, 1: 2, 2: 3, 3: 4, length: 4}
```

四.伪数组转为伪数组

自定义的伪数组转化为伪数组先将他转化为真数组再将它转化为伪数组，按此方法就不会有兼容性问题了

```javascript
//自定义的伪数组
var obj = {0:'1',1:'2',length:2};
//先将自定义伪数组转换为真数组
var arr = [].slice.call(obj);
//再将真数组转换为伪数组
var c= {};
[].push.apply(c,arr);
console.log(c);
{0: "1", 1: "2", length: 2}
```

