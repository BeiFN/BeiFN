<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .container{
            width: 500px;
            height: 300px;
            border: 1px solid #000;
            margin: 100px auto;
            position: relative;
            overflow: hidden;
        }
        .wrapper{
            width: 3000px;
            height: 300px;
            position: absolute;
            top: 0;
            left: 0;
        }
        .slider{
            float: left;
            width: 500px;
            height:300px;
            text-align: center;
            line-height: 300px;
        }
        .pagination{
            width: 300px;
            height: 50px;
            position: absolute;
            top: 230px;
            left: 100px;
            text-align: center;
            line-height: 50px;
        }
        .pagination span{
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: yellowgreen;
            display: inline-block;
            text-align: center;
            line-height: 30px;
            cursor: pointer;
        }
        .button-next,.button-prev{
            width: 50px;
            height:50px;
            border-radius: 50%;
            position: absolute;
            z-index: 999;
            font-size: 45px;
            text-align: center;
            line-height: 50px;
            background: rgba(0, 255, 110, .5);
            cursor:pointer;
        }
        .button-next{
            right: 30px;
            top: 125px;
        }
        .button-prev{
            left: 30px;
            top: 125px;
        }
        .pagination .active{
            background: red;
        }
    </style>
</head>
<body>
    <div class="container">

            <div class="wrapper">
                    <div class="slider" style="background: #F0F">1</div>
                    <div class="slider" style="background: #0F0">2</div>
                    <div class="slider" style="background: #0FF">3</div>
                    <div class="slider" style="background: #FF0">4</div>
                    <div class="slider" style="background: #00F">5</div>
                    <div class="slider" style="background: #F0F">1</div>
            </div>

            <div class="button-next">></div>
            <div class="button-prev"><</div>

            <div class="pagination">
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
            </div>
        </div>
        <script>
            var container = $(".container");
            var wrapper   = $(".wrapper");
            var sliders   = $(".slider");
            var nextBtn   = $(".button-next");
            var pervBtn   = $(".button-prev");
            var pagi      = $(".pagination span");
            var showIndex = 0;

        function $(selector){
            var ele = null;
            return (ele = (document.querySelectorAll(selector))).length === 1 ? ele[0] : ele;
        }

        container.addEventListener("click" , handlerClick);

        function handlerClick(evt){
            var e = evt || event;
            var target = e.target || e.srcElement;
            if(target === nextBtn || target === pervBtn){
                move(wrapper , {"left" : -500*showIndex});
            }
        }

        nextBtn.onclick = function(){
            if(showIndex === sliders.length-1){
                showIndex = 1;
                wrapper.style.left = "0px";
            }else{
                showIndex++;
            }
        }

        // setInterval(function(){
        //     var evt = new Event("click");

        //     nextBtn.dispatchEvent(evt);
        // },1000);

        pervBtn.onclick = function(){
            if(showIndex === 0){
                showIndex = sliders.length-2;
                wrapper.style.left = (sliders.length-1)*-500 + "px";
            }else{
                showIndex--;
            }
            return showIndex;
        }

        for(var i=0,btn ; btn = pagi[i] ; i++){
            btn.index = i;
            // showIndex = btn.index;
            
            btn.addEventListener("click" , changePic);
        }

        function changePic(){
            pagi[showIndex].className = "";
            showIndex = this.index;
            pagi[this.index].className = "active";
            changMove(showIndex)
        }

        function changMove(index){
            move(wrapper , {"left" : -500*index});
        }

        function move(dom , options , callback){
            clearInterval(dom.timer);
            var target = null;
            dom.timer = setInterval(function(){
                for(var attr in options){
                    if(attr === "opacity"){
                        var iNow = parseInt(getComputedStyle(dom)[attr])*100;
                        target = options[attr]*100;
                    }else{
                        iNow = parseInt(getComputedStyle(dom)[attr]);
                        target = options[attr];
                    }
                    var speed = (target - iNow) /10;
                    speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);

                    if(iNow === options[attr]){
                        delete options[attr];
                        
                        if(Object.keys(options).length === 0){
                            clearInterval(dom.timer);
                            typeof callback === "function" ? callback() : "";
                        }
                    }else{
                        if(attr === "opacity"){
                            dom.style[attr] = (iNow + speed) / 100;
                        }else{
                            dom.style[attr] = iNow +speed +"px";
                        }
                    }
                }
            },50)
        }
        </script>
</body>
</html>