<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

    <script>
        function jsonp( url , cb_name , data ){
            return new Promise(function(resolve , reject){
                let data_str  = "";
                let GLOBAL_cb = "foo";
                window[GLOBAL_cb] = function(res){
                    resolve(res);
                }
                url += /\?/.test(url) ? "&" : "?" + `${cb_name}=${GLOBAL_cb}`;

                for(let attr in data){
                    data_str += (data_str.length > 0 ? "&" : "") + `${attr}=${data[attr]}`;
                }

                url += "&"+data_str;

                let script = document.createElement("script");
                script.src = url;

                script.onload = function(){
                    script.remove();
                }

                document.body.appendChild(script);
            })
        }

        var data = {
                json:1 ,
                p:3,
                sid:1423_21080_29238_28518_29099_28830_29221_22158,
                req:2,
                sc:"eb",
                csor:0,
                _:Date.now(),
                wd : ""
        }

        // jsonp( url , "cb" , data).then(function(res){
        //     console.log(res);
        // })
    </script>
</body>
</html>