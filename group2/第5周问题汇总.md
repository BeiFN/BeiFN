#### 一组问题汇总

小组成员 `杜豪刚`，`封雨忱` ,`黄应锁` , `潘思佳`，`王旭`，`谢达文`，`杨松`，`张怡哲`，`张志博`，`张卓`，组长 `郭钢`

**目前存在问题**

## 问题1 下面出错的原因是什么呀？

![image.png](https://upload-images.jianshu.io/upload_images/18300474-02d8c1e332ca968e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![image.png](https://upload-images.jianshu.io/upload_images/18300474-32e4337f948c8745.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* 语法  :  varchar(255) 

## 问题2  智哥,下图if判断只是判断语法是否成立而不能判断是否删除吧,就算我的表里没有数据,仍然会提示成功

![image.png](https://upload-images.jianshu.io/upload_images/18300474-1ebc1b577c0775aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* 删除操作不报错就挺好。


## 问题3 请老师讲一下promise封装在ajax

```javascript
    function ajax(url  , data, type){
        return new Promise( function(resolve , reject){
            var xhr = null;
            if(XMLHttpRequest){
                  xhr = new XMLHttpRequest();
            }else{
                  xhr = new ActiveXObject("Mricosoft.XMLHTTP");
            }
            if(xhr === null) throw "浏览器不支持ajax";
            var dataStr = "";
            for(var attr in data){
                  dataStr += (dataStr.length > 0 ? "&" : "") + attr + "=" + data[attr];
            }
            type === "GET" ? url += (/\?/.test(url) ? "&" : "?") + dataStr : "";
            xhr.open( type ? type : "GET" , url );
            type === "POST" ? xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded"): "";
            xhr.send( type === "POST" ? dataStr : null );
            xhr.onreadystatechange = function(){
                  if(xhr.readyState === 4 && xhr.status === 200){
                        resolve(xhr.responseText);
                  }
            }
            // 设置超时;
            setTimeout(function(){
                  reject(xhr,"timeout");
            },8000)
        })
    }
    ajax()
    .then()
```

## 问题 4 劳烦智哥讲解一下这种 promise 连缀

```javascript
function next(n) {
  return new Promise(function(resolve, reject) {
    setTimeout(function() {
      resolve(n);
    }, 1000);
  });
}
next(1) // promise1;
  .then(function(res) {
    console.log(res);
    return next(2); 
  })
  // promise2 ;
  .then(function(res) {
    console.log(res);
    return next(3);
  })
  .then(function(res) {
    console.log(res);
    return next(4);
  })
  .then(function(res) {
    console.log(res);
  });
```

> promise连缀的封装
## 问题 5  问题在图中，是一个小bug。

![image.png](https://upload-images.jianshu.io/upload_images/18300474-7af4628697d4862f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

```javascript
    function foo(type){
        // type = type ? type : "GET";
        type || type = "GET" ;
    }
```

## 问题 6 如下图,图片里框柱的东西导致请求发不出去
![123.png](https://upload-images.jianshu.io/upload_images/18300474-00b5055d08e9d695.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* 考虑代码问题 ;   浏览器是对协议进行了完整封装，你可以进行配置但是普遍不需要。 在遇到发送问题的时候，优先考虑代码层面再去考虑协议层面。