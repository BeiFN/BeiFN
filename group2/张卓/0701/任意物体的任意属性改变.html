<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>任意物体的任意属性改变</title>
    <style>
        #box1,
        #box2,
        #box3 {
            width: 100px;
            height: 100px;
            border: 10px solid #000;
            background: #ddd;
            float: left;
            margin: 20px;
            text-align: center;
            line-height: 100px;
        }
    </style>
</head>

<body>
    <div id="box1">变高</div>
    <div id="box2">变宽</div>
    <div id="box3">变透明</div>
    <script>
        var box1 = document.getElementById("box1");
        var box2 = document.getElementById("box2");
        var box3 = document.getElementById("box3");

        box1.addEventListener("mouseover", function () {
            changeStyle("width", 400, box1)
        })
        box2.addEventListener("mouseover", function () {
            changeStyle("height", 400, box2)
        })
        box3.addEventListener("mouseover", function () {
            changeStyle("opacity", 0.3, box3)
        })

        function changeStyle(type, target, dom) {
            // switch (type) {
            //     case "width": changeWidth(target,dom);break;
            //     case "height":changeHeight(target,dom);break;
            //     case "opacity": changeOpacity
            // }
            //为了让定时器之间互不影响 用dom.timer
            clearInterval(dom.timer)

            dom.timer = setInterval(function () {
                //获取元素现在的属性值   透明度和高宽分开判断   
                if (type === "opacity") {
                    //因为他是有小数的  小于1 的计算起来十分的不方便
                    iNow = getComputedStyle(dom)[type] * 100
                } else {
                    iNow = parseInt(getComputedStyle(dom)[type])
                }
                //计算speed   如果属性是opacity那么这个target就*100  为了和上面的计算起来方便一些
                //-7
                var speed = ((type === "opacity" ? target * 100 : target) - iNow) / 10
                //有速度了就要对他进行判断 如果大于0就向上取整，如果小于0就向下取整
                speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed)
                console.log(speed + "----")

                //判断 如果小于就变化 如果等于就关闭定时器
                //只要还有距离就还有速度，所以一直到终点的时候他才会停
                if (target === iNow) {
                    clearInterval(dom.timer)
                } else {
                    dom.style[type] = (type == "opacity" ? ((iNow + speed) / 100) : (iNow + speed + "px"))
                }
            }, 50)

        }


    </script>

</body>

</html>