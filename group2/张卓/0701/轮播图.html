<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0
        }

        #box {
            width: 600px;
            height: 350px;
            position: absolute;
            left: 0;
            right: 0;
            margin: auto;
            top: 50px;
            border-radius: 10px;
            overflow: hidden;
        }

        #changbox {
            width: 3600px;
            height: 350px;
            position: absolute;
            left: 0px;

        }

        #changbox div {
            width: 600px;
            height: 100%;
            float: left;
        }

        img {
            width: 100%;
            height: 100%;
        }

        .left {
            width: 40px;
            height: 40px;
            position: absolute;
            left: 20px;
            top: 155px;
            border-radius: 50%;
            background: url(https://static.zcool.cn/git_z/z/widget/slider/images/svg/left_arrow.svg?v=2)no-repeat;
            background-size: 100%;
            cursor: pointer;
        }

        .right {
            width: 40px;
            height: 40px;
            position: absolute;
            right: 20px;
            top: 155px;
            border-radius: 50%;
            background: url(https://static.zcool.cn/git_z/z/widget/slider/images/svg/right_arrow.svg?v=2)no-repeat;
            background-size: 100%;
            cursor: pointer;
        }

        .right:hover {
            background: url(https://static.zcool.cn/git_z/z/widget/slider/images/svg/right_arrowhover.svg?v=2);
            background-size: 100%;
        }

        .left:hover {
            background: url(https://static.zcool.cn/git_z/z/widget/slider/images/svg/left_arrowhover.svg?v=2);
            background-size: 100%;
        }

        .index {
            width: 600px;
            position: absolute;
            bottom: 10px;
            text-align: center;
        }

        .index li {
            display: inline-block;
            width: 30px;
            height: 30px;
            line-height: 30px;
            list-style: none;
            border-radius: 50%;
            background: rgba(230,230,230,.5);
        }
    </style>
</head>

<body>
    <div id="box">
        <div id="changbox">
            <div class="image"><img src="http://img5.imgtn.bdimg.com/it/u=3132062168,1625881543&fm=26&gp=0.jpg"></div>
            <div class="image"><img src="http://img5.imgtn.bdimg.com/it/u=724695261,3295904462&fm=26&gp=0.jpg"></div>
            <div class="image"><img
                    src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1662414753,1562172514&fm=27&gp=0.jpg">
            </div>
            <div class="image"><img src="http://img5.imgtn.bdimg.com/it/u=3619860854,626361567&fm=26&gp=0.jpg"></div>
            <div class="image"><img src="http://img0.imgtn.bdimg.com/it/u=3876734362,2775714984&fm=26&gp=0.jpg"></div>
            <div class="image"><img src="http://img5.imgtn.bdimg.com/it/u=3132062168,1625881543&fm=26&gp=0.jpg"></div>
        </div>
        <div class="left"></div>
        <div class="right"></div>
        <ul class="index">
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
        </ul>
    </div>

    <script>
        function $(selector) {
            var ele = null;
            return (ele = document.querySelectorAll(selector)).length == 1 ? ele[0] : ele
        }

        var left = $(".left")
        var right = $(".right")
        var changbox = $("#changbox")
        var nums = $(".index")
        var images = changbox.children;
        for (var i = 0, img; img = images[i++];) {
            img.index = i;
        }
        var count = 0;
        var timer = null;
        nums.children[0].style.backgroundColor = "white"
        right.addEventListener("click", function () {
            count++;
            count = count % 6;//
            console.log(count + " right")
            move("right");
            changeNum()
        })

        left.addEventListener("click", function () {
            count--;
            count = count % 6;
            console.log(count + " left")
            move("left")
            changeNum()
        })

        function changeNum() {
            for (var i = 0, num; num = nums.children[i++];) {
                console.log(num)
                num.style.backgroundColor = "rgba(230,230,230,.5)"
            }
            //这个 c是为了不影响全局变量count
            var c = count;
            console.log(count)
            if(count == 5){
                c = 0;
            }
            nums.children[c].style.backgroundColor = "white"

        }

        function move(fangxiang) {
            var target = count * (-600);
            // console.log(count)  当他等于0意味着他到了第一个图片的位置 下一次让他的count要符合第二张图片的count
            if (count == 0 && fangxiang == "right") {
                count = 1
                changbox.style.left = 0 + "px"
                target = -600
            }
            //当他等于-1意味着他到了第6-5图片的位置 下一次让他的count要符合第5张图片的count
            if (count == -1 && fangxiang == "left") {
                count = 4 //
                // console.log(count)
                changbox.style.left = -3000 + "px"
                target = -2400
            }

            clearInterval(timer)
            timer = setInterval(function () {
                var speed = (target - changbox.offsetLeft) / 5
                speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed)
                if (target == changbox.offsetLeft) {
                    clearInterval(timer)
                } else {
                    changbox.style.left = changbox.offsetLeft + speed + "px";
                }
            }, 50)

        }






    </script>
</body>

</html>