<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>运动框架</title>
    <style>
        #box {
            width: 200px;
            height: 150px;
            background: gray;
            position: absolute;
            top: 0px;
        }
    </style>
</head>

<body>
    <div id="box"></div>
    <script>
        var box = document.getElementById("box")
        //这样可以将参数传递给move函数 以便他进行使用 
        // box.addEventListener("mouseover",function(){
        //     move(400,box,width)
        //     //这样做无法给一个元素传递多个属性
        // })
        move(box, {
            // width: 400,
            top:"30"
            // height: 300,
            // opacity: 30
        },function(){
            box.style.backgroundColor = "yellowgreen"
        })
        //为了能给元素传递多个参数 使用对象的方式将属性装入对象之中
        //callback是回调函数,可有可无 用于运动完成后执行的函数
        function move(ele, attrObj, callback) {
            clearInterval(ele.timer)
            ele.timer = setInterval(function(){
                //遍历属性对象
                for(var attr in attrObj){
                    var target = attrObj[attr]
                    if(attr === "opacity"){
                        var iNow = getComputedStyle(ele)[attr]*100
                    }else{
                        //去掉px
                        var iNow = parseInt(getComputedStyle(ele)[attr])
                    }
                    var speed = (target - iNow)/10;
                    speed = speed>0?Math.ceil(speed):Math.floor(speed)
                    //这样写会有一个bug  不是所有的数字都到达目标  
                    if(target == iNow){
                        //每到达一个属性  就把这个属性从obj中移除
                        delete attrObj[attr]

                        //也可以获取所有的key来判断返回的key数组的长度  Object.keys(options).length   
                        if(attrObj=="{}"){
                            clearInterval(ele.timer)
                            typeof callback =="function"?callback():""
                        }
                    }else{
                        if(attr === "opacity"){
                            ele.style[attr] = (iNow+speed)/100
                        }else{
                            ele.style[attr] = iNow+speed+"px"
                        }
                    }

                }
            },50)
        }

    </script>
</body>

</html>