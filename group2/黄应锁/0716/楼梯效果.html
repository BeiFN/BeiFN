<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        .center{
            width: 1100px;
            margin: 0 auto;
        }
        .head{
            width: 100%;
            height: 600px;
            background: #ccc;
            font-size: 100px;
            line-height: 600px;
            text-align: center;
        }
        div[class*=box]{
            width: 100%;
            height:1000px;
            font-size: 100px;
            line-height: 1000px;
            text-align: center;
            color:#fff;
        }
        .stairs{
            width: 70px;
            position: fixed;
            top:40%;
            left: 40px;
            background: #ccc;
            display: none;
        }
        .stairs div{
            border:1px  solid red;
            margin-top: 2px;
            width: 100%;
            height: 30px;
            line-height: 30px;
            text-align: center;
            
        }
        .stairs div.active{
            background: yellowgreen;
        }
        .show{
            display: block;
        }
    
    </style>
</head>
<body>
    <div class="center">
        <div class="head">头部</div>
        <div class="box1">1</div>
        <div class="box2">2</div>
        <div class="box3">3</div>
        <div class="box4">4</div>
        <div class="box5">5</div>
    </div>
    <div class="stairs">
        <div>1F</div>
        <div>2F</div>
        <div>3F</div>
        <div>4F</div>
        <div>5F</div>
    </div>

    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
    <script>
        $("div[class*=box]").css({
                background: function () {
                    var r = Math.round(Math.random() * 255);
                    var g = Math.round(Math.random() * 255);
                    var b = Math.round(Math.random() * 255);
                    return "rgb(" + r + "," + g + "," + b + ")"
                }
            }); 
        function Stairs(){
            this.init();
        }
        $.extend( Stairs.prototype,{
            init:function(){
                this.head = $(".head");
                this.stairs = $(".stairs");
                this.stairsList = this.stairs.children();
                this.boxs = $("div[class*=box]");
                this.boxsList =[];
                var self = this;
                $.each(this.boxs,$.proxy(function(index,item){
                    var min = $(item).offset().top;
                    this.boxsList.push({
                        min:min,
                        max:min + $(item).outerHeight(),
                    })
                },this))
                $(window).scroll($.proxy(function(){
                    var scrollTop = $("html,body").scrollTop();
                    this.changeStairs(scrollTop);
                    this.showOrHiddenStairs(scrollTop);
                },this));
                this.stairs.on("click","div",$.proxy(function(evt){
                    var target = evt.target;
                    this.changeContentFloor.call(this,$(target).index());
                    this.changeStairs($("body,html").scrollTop());
                },this))
            },
            changeStairs:function(scrollTop){
                $.each(this.boxsList,$.proxy(function(index,item){
                    if(scrollTop >= item.min && scrollTop < item.max){
                        this.stairsList.eq(index).addClass("active")
                        .siblings().removeClass("active");
                    }
                    
                },this));
            },
            changeContentFloor:function(index){
                $("body,html").scrollTop(this.boxs.eq(index).offset().top);
            },
            showOrHiddenStairs:function(scrollTop){
                var has = this.stairs.hasClass("show");
                if(!has && scrollTop > this.head.height()){
                    this.stairs.addClass("show");
                }
                if(has && scrollTop < this.head.height()){
                    this.stairs.removeClass("show");
                }
            },
        })
        new Stairs();
    
    </script>


</body>
</html>