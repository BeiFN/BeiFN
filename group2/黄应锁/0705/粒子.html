<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
      <style>
            .ball{
                  width: 5px;
                  height: 5px;
                  border-radius: 50%;
                  background: radial-gradient(#fff,#000);
                  position: absolute;
                  
            }
      </style>
</head>
<body>
      <!-- <div class="ball">

      </div> -->
      <script src="./javascripts/Utils.js"></script>
      <script>
      class Practice{
            constructor(ele){
                  this.main_ele = ele.nodeType === 9 ? ele : document.querySelector(ele);
                  this.init();
            }
            init() {
                  this.cHeight = document.documentElement.clientHeight;
                  this.cWidth = document.documentElement.clientWidth;

                  this.main_ele = addEventListener("mousedown", this.handlerMousedown.bind(this));
                  this.main_ele = addEventListener("mouseup", this.handlerMouseup.bind(this));
                  this.main_ele = addEventListener("mousemove", this.handlerMousemove.bind(this));
            }
            handlerMousedown(evt) {
                  var e = evt || window.event;
                  this.offsetX = e.offsetX;
                  this.offsetY = e.offsetY;
                  this.timer = null;
                  this.angle = 0;
                  this.r = 200;
                  this.beishu = 1;
                  this.n = 1;
                  this.timer = setInterval(function () {
                        var ball = this.createBall();
                        setTimeout(function () {
                              this.ballMove(ball);
                        }.bind(this), 50)
                  }.bind(this), 50);
            }
            ballMove(ball) {
                  this.angle += 5;
                  var t = Math.PI / 180 * this.angle;
                  var count = parseInt(this.angle / 360) + 1;

                  count %= 10;
                  this.beishu = this.n + "." + count;
                  var x = 160 * this.beishu * Math.pow(Math.sin(t), 3);  //心形
                  var y = 130 * this.beishu * Math.cos(t) - 50 * this.beishu * Math.cos(t * 2) - 20 * this.beishu * Math.cos(t * 3) - 10 * Math.cos(t * 4);

                  ball.style.left = -x + this.offsetX + "px";
                  ball.style.top = -y + this.offsetY + "px";
                  // ball.style.opacity = 0.1;

                  // setTimeout(function(){
                  //     ball.remove();
                  // },500);
            }
            createBall() {
                  let{getRandomColor} = Utils;
                  var ball = document.createElement("div");
                  ball.className = "ball";

                  ball.style.left = this.offsetX + "px";
                  ball.style.top = this.offsetY + "px";
                  ball.style.background = getRandomColor();
                  ball.style.transition = "all 1s";
                  document.body.appendChild(ball);

                  return ball;
            }
            handlerMouseup(){
                  clearInterval(this.timer);
            }
            handlerMousemove(evt) {
                  var e = evt || event;
                  this.offsetX = e.clientX;
                  this.offsetY = e.clientY;
            }
      }
      



      new Practice(document);






      //     function Practice(ele){
      //       this.main_ele = ele.nodeType === 9 ? ele : document.querySelector(ele);
      //       this.init();
      //     }
      //     Practice.prototype.init = function(){
      //         this.cHeight = document.documentElement.clientHeight;
      //         this.cWidth = document.documentElement.clientWidth;
              
      //         this.main_ele = addEventListener("mousedown", this.handlerMousedown.bind(this));
      //         this.main_ele = addEventListener("mouseup", this.handlerMouseup.bind(this));
      //         this.main_ele = addEventListener("mousemove", this.handlerMousemove.bind(this));
      //     }
      //     Practice.prototype.handlerMousedown = function (evt) {
      //           var e = evt || window.event;
      //           this.offsetX = e.offsetX;
      //           this.offsetY = e.offsetY;
      //           this.timer = null;
      //           this.angle = 0;
      //           this.r = 200;
      //           this.beishu = 1;
      //           this.n = 1 ;
      //           this.timer = setInterval(function(){
      //               var ball = this.createBall();
      //               setTimeout(function(){
      //                   this.ballMove(ball);
      //               }.bind(this),50)
                    
      //           }.bind(this), 50);
                
      //       }
      //     Practice.prototype.ballMove = function (ball) {

      //           this.angle += 5;
      //           var t = Math.PI / 180 * this.angle;
      //           var count = parseInt(this.angle / 360) + 1;
                
      //           count %= 10;
      //           this.beishu = this.n + "." + count;
      //           var x = 160 * this.beishu * Math.pow(Math.sin(t), 3);  //心形
      //           var y = 130 * this.beishu * Math.cos(t) - 50 * this.beishu * Math.cos(t * 2) - 20 * this.beishu * Math.cos(t * 3) - 10 * Math.cos(t * 4);

      //           ball.style.left = -x + this.offsetX + "px";
      //           ball.style.top = -y + this.offsetY + "px";
      //           // ball.style.opacity = 0.1;

      //           // setTimeout(function(){
      //           //     ball.remove();
      //           // },500);

      //     }
      //     Practice.prototype.createBall = function(){
      //           var ball = document.createElement("div");
      //           ball.className = "ball";

      //           ball.style.left = this.offsetX + "px";
      //           ball.style.top = this.offsetY + "px";
      //           ball.style.background = getRandomColor();
      //           ball.style.transition = "all 1s";
      //           document.body.appendChild(ball);

      //           return ball;

      //     }
      //     Practice.prototype.handlerMouseup = function(){
      //           clearInterval(this.timer);
      //     }
      //     Practice.prototype.handlerMousemove = function(evt){
      //           var e = evt || event;

      //           this.offsetX = e.clientX;
      //           this.offsetY = e.clientY;
      //     }

      //     new Practice(document);

      //     function getRandomColor(){
      //       var r = Math.round(Math.random() * 255);
      //       var g = Math.round(Math.random() * 255);
      //       var b = Math.round(Math.random() * 255);
      //       return "rgb(" + r +"," + g + "," + b + ")";
      //   }
          
      </script>
</body>
</html>