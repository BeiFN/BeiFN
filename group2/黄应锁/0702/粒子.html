<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
      <style>
            .ball{
                  width: 20px;
                  height: 20px;
                  border-radius: 50%;
                  background: radial-gradient(#fff,#000);
                  position: absolute;
                  
            }
      </style>
</head>
<body>
      <!-- <div class="ball">

      </div> -->
      <script>
          function Practice(ele){
            this.main_ele = ele.nodeType === 9 ? ele : document.querySelector(ele);
            this.init();
          }
          Practice.prototype.init = function(){
              this.cHeight = document.documentElement.clientHeight;
              this.cWidth = document.documentElement.clientWidth;
              
              this.main_ele = addEventListener("mousedown", this.handlerMousedown.bind(this));
              this.main_ele = addEventListener("mouseup", this.handlerMouseup.bind(this));
              this.main_ele = addEventListener("mousemove", this.handlerMousemove.bind(this));
          }
          Practice.prototype.handlerMousedown = function (evt) {
                var e = evt || window.event;
                this.offsetX = e.offsetX;
                this.offsetY = e.offsetY;
                this.timer = null;
                this.angle = 0;
                this.r = 50;
                this.timer = setInterval(function(){
                    var ball = this.createBall();
                    setTimeout(function(){
                        this.ballMove(ball);
                    }.bind(this),100)
                    
                }.bind(this), 50);
                
            }
          Practice.prototype.ballMove = function(ball){

                //随机
                // var targetleft = Math.round(Math.random() * this.cWidth ); 
                // var targetTop = Math.round(Math.random() * (this.cHeight - this.offsetY) + this.offsetY);

                // x = a * (2 * cos(t) - cos(2 * t))
                // y = a * (2 * sin(t) - sin(2 * t))
                this.angle += 5 ;
                var t= Math.PI/180 * this.angle;
                // var targetLeft = this.r *  (2 * Math.cos(t) - Math.cos(2*t)); //胖心
                // var targetTop = this.r *  (2 * Math.sin(t) - Math.sin(2*t));
                x=160*Math.pow(Math.sin(t),3);  
                y=130*Math.cos(t)-50*Math.cos(t*2)-20*Math.cos(t*3)-10*Math.cos(t*4);  
                ball.style.left = -x + this.offsetX  + "px";
                ball.style.top = -y + this.offsetY + "px";
                // ball.style.opacity = 0.1;

                // setTimeout(function(){
                //     ball.remove();
                // },500);

          }
          Practice.prototype.createBall = function(){
                var ball = document.createElement("div");
                ball.className = "ball";

                ball.style.left = this.offsetX + "px";
                ball.style.top = this.offsetY + "px";
                ball.style.background = getRandomColor();
                ball.style.transition = "all 1s";
                document.body.appendChild(ball);

                return ball;

          }
          Practice.prototype.handlerMouseup = function(){
                clearInterval(this.timer);
          }
          Practice.prototype.handlerMousemove = function(evt){
                var e = evt || event;

                this.offsetX = e.clientX;
                this.offsetY = e.clientY;
          }

          new Practice(document);

          function getRandomColor(){
            var r = Math.round(Math.random() * 255);
            var g = Math.round(Math.random() * 255);
            var b = Math.round(Math.random() * 255);
            return "rgb(" + r +"," + g + "," + b + ")";
        }
          
      </script>
</body>
</html>