<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <input type="text" id="ipt">
    <div id="content"></div>
    <script>
        function jsonp(url, cb_fild, data) {
            return new Promise(function (reslove, reject) {
                let globle = "foo";
                window[globle] = res => {
                    reslove(res);
                }
                url += /\?/.test(url) ? "&" : "?" + cb_fild + "=" + globle;
                if (typeof data === "object") {
                    let data_str = "";
                    for (let attr in data) {
                        data_str += (data_str.length > 0 ? "&" : "") + attr + "=" + data[attr];
                    }
                    url += "&" + data_str;
                }
                console.log(url);
                let script = document.createElement("script");
                script.src = url;
                script.onload = function () {
                    this.remove();
                }
                document.body.appendChild(script);
            })
        }



        class Search {
            constructor() {
                this.ipt = document.getElementById("ipt");
                this.content = document.getElementById("content");
                this.init();
            }
            init() {
                this.ipt.addEventListener("change", this.searchcontent.bind(this));
            }
            searchcontent() {
                Search.data.wd = this.ipt.value;
                jsonp(Search.url, "cb", Search.data)
                    .then(res => {
                        let html = "";
                        res.s.forEach(item => html += `<p>${item}</p>`);
                        this.content.innerHTML = html;
                    })
            }
            static url = "https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su";

            static data = {
                json: 1,
                p: 3,
                sid: 1423_21080_29238_28518_29099_28830_29221_22158,
                req: 2,
                sc: "eb",
                csor: 0,
                _: Date.now(),
                wd: ""
            }
        }
        new Search();

    </script>
</body>

</html>