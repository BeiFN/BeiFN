<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/index.css">
</head>
<body>
        <div class="container">

                <div class="wrapper">
                      <div class="slider" style="background: #F0F">1</div>
                      <div class="slider" style="background: #0F0">2</div>
                      <div class="slider" style="background: #0FF">3</div>
                      <div class="slider" style="background: #FF0">4</div>
                      <div class="slider" style="background: #00F">5</div>
                      <div class="slider" style="background: #F0F">1</div>
                </div>
    
                <div class="button-next"></div>
                <div class="button-prev"></div>
    
                <div class="pagination">
                      <span>1</span>
                      <span>2</span>
                      <span>3</span>
                      <span>4</span>
                      <span>5</span>
                </div>
          </div>
          <script>
                 // 前后轮播;
            var showIndex = 0;                 // 当前显示哪一张;
            var next_btn = $(".button-next"); // 后一张按钮;
            var prev_btn = $(".button-prev"); // 前一张按钮;
            var sliders = $(".slider");      // 所有元素;
            var wrapper = $(".wrapper");     // 大长条; 
            var container = $(".container");   // 容器;
            var paginBtns = $(".pagination span");
            function $(selector) {
                  var ele = null;
                  return (ele = document.querySelectorAll(selector)).length === 1 ? ele[0] : ele;
            }
            prev_btn.addEventListener("click" , handlerClick);
           
            function handlerClick(evt){
                var e =  evt || window.event;
                // console.log(e);
                getIndexPrev();        
              
                makeBannerMove();
                
            }

            function getIndexPrev(){
                if(showIndex === 0){
                    showIndex = sliders.length - 2;
                    wrapper.style.left = -(sliders.length - 1) *300 +"px";
                }else{
                    showIndex--;
                }
            }
             
            function makeBannerMove(){
                move(showIndex * -300,wrapper,"left");
                for(var i = 0, btn;btn = paginBtns[i++];){
                    btn.className ="";
                }
                paginBtns[showIndex].className = "active";
            }
            for(var i = 0,btn;btn = paginBtns[i++];){
                btn.index = i;
                btn.addEventListener("mouseover" , handlerOver);
            }
            function handlerOver(){
                showIndex = this.index - 1;
                makeBannerMove();
            }
            setInterval(function(){
                var evt = new Event("click");
                Object.assign(evt,{
                    say:"hello"
                })
                prev_btn.dispatchEvent(evt);
            },3000)
            function move(target , dom , attr){
                clearInterval(dom.timer);
                var target = attr === "opacity" ? target * 100 : target;
                  dom.timer = setInterval(function () {
                        var iNow = attr === "opacity" ? parseInt(getComputedStyle(dom)[attr] * 100) : parseInt(getComputedStyle(dom)[attr]);
                        var speed = (target - iNow) / 10;
                        speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);
                        if (target === iNow) {
                              clearInterval(dom.timer);
                        } else {
                              dom.style[attr] = attr === "opacity" ? (iNow + speed) / 100 : iNow + speed + "px"
                        }
                  }, 50)
            }
          </script>
</body>
</html>