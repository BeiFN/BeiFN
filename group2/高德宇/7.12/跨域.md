## 跨域

为什么存在跨域问题 ?

* 浏览器存在同源策略 : 同协议，同端口，同域名。 

- 服务器代理 (nginx)
      * 服务器其实是不受同源策略限制的; 
      * 浏览器发送ajax请求 => 本机的nginx服务器 => 代理请求，向其他服务器发起请求并返回数据 => 返回的数据由nginx进行转发，返回浏览器;
```   
      http {
            server {
                  location = /自己的代理名称 {
                        proxy_pass 远程服务器域名;
                  }
            }
      }
```

- jsonp 

      * 程序猿发现了浏览器是一个两面三刀的人,一边组织ajax发送非同源请求，一方面允许src|href 请求任何来源的数据。
      * 开启了一场头脑风暴 ：
      1. 全局函数可以在任意位置调用。
      2. 可以被外联的script调用
      3. script 在浏览器之中解析的机制 ， 只要浏览器看到了script，带src的script标签会立即发起一个请求,请求得到的结果会当做js去进行解析。
      4. script src ="php路径" ,  让浏览器向php路径发起一个请求。得到结果进行解析。
      5. 利用规则将后端php返回的结果设置成调用前端全局函数的字符串。
      6. 因为字符串是php内部拼接,php可以访问数据,所以我们可以在php拼接的函数调用字符串之中传入实参(php的数据库查询结果);


      - 前端代码;
      ```javascript
            //前端的全局函数,等待后端字符串去调用;
            function jsonpcallback(res){

            }
      ```
      - 利用script标签发起请求
      ```html
            <script src="php代码路径">
      ```
      - 后端做出响应 
      ```php
            #数据库查询;
            $data = 数据库查询结果;

            echo "jsonpcallback($data)"
      ```
