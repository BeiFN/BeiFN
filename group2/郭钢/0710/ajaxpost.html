<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>

        function myAjaxPost(url, {
            callback = (res) => {
                console.log(res);
            },
            type = "GET",
            data = {
                // username: "nihaoa",
                // password: "123456"
            },//这个换成data应该怎么用？
        } = {}) {
            var data_str = "";
            for (var attr in data) {
                data_str +=`${data_str.length>0?"&":""}${attr}=${data[attr]}`
            }
            var xhr = new XMLHttpRequest();
            xhr.open(type, url=url+(type==="GET"?("?"?("&"+data_str):("?"+data_str)):data_str));
            type === "POST" ? xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded") : "";
            xhr.send(type === "POST" ? data_str : null);
            xhr.onreadystatechange = () => {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    let res = xhr.responseText;
                    callback(res);
                }
            }
        }


        myAjaxPost("http://localhost/gp12/0710/test.php?data",{
            data:{
                username:"nihaoa"
            }
        })

    </script>
</body>

</html>