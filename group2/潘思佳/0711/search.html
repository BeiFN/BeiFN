<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <input type="text" id="ipt">
    <div id="content">
        <script>
            function ajax(url, cb_fild, data) {
                return new Promise(function(resolve, reject) {
                    var GLOBAL_CB = "foo";
                    window[GLOBAL_CB] = function(res) {
                        resolve(res);
                    }

                    url += (/\?/.test(url) ? "&" : "?") + cb_fild + "=" + GLOBAL_CB;
                    if (typeof data === "object") {
                        var dataStr = "";
                        for (var attr in data) {

                            dataStr += (dataStr.length > 0 ? "&" : "") + attr + "=" + data[attr];
                        }
                        url += "&" + dataStr;
                    }
                    var script = document.createElement("script");
                    script.src = url;
                    script.onload = function() {
                        this.remove();
                    }
                    document.body.appendChild(script);
                })

            }

            var url = "https://www.baidu.com/sugrec";
            var data = {
                p: 3,
                ie: "utf-8",
                json: 1,
                prod: "pc",
                wd: "",
            }

            var ipt = document.getElementById("ipt");
            var content = document.getElementById("content");
            ipt.oninput = function() {
                data.wd = this.value;
                ajax(url, "cb", data)
                    .then(function(res) {
                        console.log(res);
                        var html = "";
                        for (var i = 0; i < res.g.length; i++) {
                            console.log(res.g[i].q)
                            html += `<p>${res.g[i].q}</p>`;
                            content.innerHTML = html;
                        }

                    })
            }
        </script>
</body>

</html>