<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>拖拽</title>
		<style type="text/css">
			#box{
				width: 280px;
				height: 50px;
				background: lightgreen;
				position: absolute;
				top:100px;
				left:100px;
			}
		</style>
	</head>
	<body>
		<div id="box"></div>
		<script type="text/javascript">
			var dragBox=document.getElementById("box");
			var _dragMove=dragMove;
			
			dragBox.addEventListener("mousedown",dragStart);
			
			document.addEventListener("mouseup",dragEnd);
			
			function dragStart(evt){
				var e= evt||event;
				document.addEventListener("mousemove",
				_dragMove=dragMove.bind(false,{offsetx:e.offsetX,offsety:e.offsetY}) );
			}
			
			function dragMove(offset,evt){
				var e = evt|| window.event;
				var clientWidth=document.documentElement.clientWidth;
				var clientHeight=document.documentElement.clientHeight;
				var rangeLeft=e.clientX-offset.offsetx;
				var rangeTop=e.clientY-offset.offsety;
				
				if(rangeLeft<0){rangeLeft=0;}else{rangeLeft=rangeLeft;}
				if(rangeTop<0){rangeTop=0;}else{rangeTop=rangeTop;}
				if (rangeLeft>clientWidth-280) {rangeLeft=clientWidth-280;}
				else{rangeLeft=rangeLeft;}
				if (rangeTop>clientHeight-50) {rangeTop=clientHeight-50;}
				else{rangeTop=rangeTop;}
				
				box.style.left=rangeLeft+"px";
				box.style.top=rangeTop+"px";
			}
			function dragEnd(){
				document.removeEventListener("mousemove",_dragMove);
			}
			
		</script>
	</body>
</html>
