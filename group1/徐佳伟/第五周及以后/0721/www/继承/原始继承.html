<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>原始方法的继承</title>
    <style>
        *{margin: 0;padding: 0;}
        .box ,.box2{
            width: 100px;
            height: 100px;
            position: absolute;
            background: yellowgreen;
        }
        .box2{
            left:  200px;
            background: #f5f5f5;
        }
    </style>
</head>
<body>
    <div class="box"></div>
    <div class="box2"></div>
    <!-- <script src="../../../libs/jquery.js"></script> -->
    <script>
            // console.log($)
            class Foo{
                constructor(selector){
                    this.init(selector);
                }
                init(selector){                 
                    this.box = document.querySelector(selector);
                    this.moveTemp = null;
                    this.box.addEventListener("mousedown",this.handlerMouseDown.bind(this))
                    document.addEventListener("mouseup",this.handlerMouseUp.bind(this));
                }
                handlerMouseDown(evt){
                    let e = evt || window.event;
                    let x = e.offsetX;
                    let y = e.offsetY;
                    document.removeEventListener("mousemove",this.moveTemp);
                    document.addEventListener("mousemove",this.moveTemp = this.handlerMouseMove.bind(this,{x,y}));
                }
                handlerMouseMove(temp,evt){
                    // console.log(this,evt)
                    let e = evt || window.event;
                    // console.log(window.ev)
                    let x = e.clientX - temp.x;
                    let y = e.clientY - temp.y;
                    this.move(x,y);
                }
                move(x,y){
                    this.box.style.left = x + "px";
                    this.box.style.top = y + "px";
                }
                handlerMouseUp(){
                    document.removeEventListener("mousemove",this.moveTemp);
                }
                
            }
            new Foo(".box");
            class Son extends Foo{
                constructor(selector){
                    super(selector);
                    this.age = 18
                    //如果在构造函数内修改属性就必须进行super()调用
                    // super();
                    // this.age = 18;
                }
                // saySonAge(){
                //     //调用父级方法的话需要super.方法名
                //     super.sayAge();
                // }
                move(x,y){
                    let res = this.boundry(x,y)
                    super.move(res.x , res.y);
                }
                boundry(x,y){
                    x = x < 0 ? 0 : x;
                    y = y < 0 ? 0 : y;
                    return {
                        x,y
                    }
                }
            }
            new Son(".box2");
            // console.log(new Son(".box2"))
    </script>
</body>
</html>