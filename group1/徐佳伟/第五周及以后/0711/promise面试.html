<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>关于promise面试的问题</title>
</head>
<body>
    <script>
        //总结一下 重点丫！！
        //https://juejin.im/post/59e85eebf265da430d571f89 不多哔哔 看完这篇文章理解执行顺序
        //这道小面试题讲的就是异步与同步、宏任务与微任务的差别
        //首先同步执行要优先于异步
        //异步中的宏任务要优先于微任务执行
        //要注意的一点是 初始化状态机是同步执行的过程


        //执行顺序 js解析器从上到下执行，遇到宏任务会将其回调函数注册后分发到Event Queue。
        //遇到微任务将其分发到微任务EventQueue,直到整体代码script作为第一个宏任务执行结束
        //开始执行微任务,按照其分发顺序挨个执行完成，第一轮结束。第二轮当然从宏任务EventQueue
        //开始,按照上述操作执行。
        //tips : 是每当一个宏任务执行结束后，都会查看微任务EventQueue中是否有可执行的回调函数,
        //如果有就执行,没有继续下一个宏任务
        // 对于setInterval(fn,ms)来说，我们已经知道不是每过ms秒会执行一次fn，而是每过ms秒，会有fn进入Event Queue。
        // 一旦setInterval的回调函数fn执行时间超过了延迟时间ms，那么就完全看不出来有时间间隔了。

        // macro-task(宏任务)：包括整体代码script，setTimeout，setInterval
        // micro-task(微任务)：Promise，process.nextTick   



            // console.log(1);
            // let promise = new Promise(function(resolve,reject){
            //     //这里是同步执行
            //     console.log(2);
            //     setTimeout(function(){
            //         console.log(3);
            //     },0)
            //     resolve();
            // }) 
            // console.log(4);   
            // promise.then(function(){
            //     console.log(5)
            // })
            // setTimeout(function(){
            //     console.log(6);
            // },0)
            // console.log(7);
            //124 7 5 3 6
            
            // console.log(1)
            // setInterval(function(){
            //     console.log(2);
            // },1000)
            // sleep(1000);
            // console.log(3);

            // function sleep(delay) {
            //     var start = (new Date()).getTime();
            //     while ((new Date()).getTime() - start < delay) {
            //         continue;
            //     }
            // }

            // console.log('1');
            // setTimeout(function() {

            //     console.log('2');

            //     process.nextTick(function() {
            //         console.log('3');
            //     })
                
            //     new Promise(function(resolve) {
            //         console.log('4');
            //         resolve();
            //     }).then(function() {
            //         console.log('5')
            //     })

            // })

            // process.nextTick(function() {
            //     console.log('6');
            // })

            // new Promise(function(resolve) {

            //     console.log('7');
                
            //     resolve();
            // }).then(function() {
            //     console.log('8')
            // })

            // setTimeout(function() {
            //     console.log('9');
            //     process.nextTick(function() {
            //         console.log('10');
            //     })
            //     new Promise(function(resolve) {
            //         console.log('11');
            //         resolve();
            //     }).then(function() {
            //         console.log('12')
            //     })
            // })
            // 1 7 6 8 2 4 3 5 9 11 10 12
    </script>
</body>
</html>