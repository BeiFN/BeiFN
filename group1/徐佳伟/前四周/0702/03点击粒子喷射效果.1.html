<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
      <style>
            .ball{
                  width: 20px;
                  height: 20px;
                  border-radius: 50%;
                  /* background: radial-gradient(#fff,#000); */
                  position: absolute;
                  
            }
      </style>
</head>
<body>
      <!-- <div class="ball">

      </div> -->
      <script>
           function Ball(selector){
                 this.main_ele = selector.nodeType === 9 ? selector : document.querySelector(selector);
                 this.cWitch   = document.documentElement.clientWidth;
                 this.cHeight  = document.documentElement.clientHeight;
                 this.init();
           }
           //初始化函数
           Ball.prototype.init = function(){
                  this.main_ele.addEventListener("mousedown" , this.handlerMouseDown.bind(this));
                  this.main_ele.addEventListener("mouseup",this.handlerMouseUp.bind(this));
                  this.main_ele.addEventListener("mousemove",this.handlerMouseMove.bind(this));
           }
           //鼠标移动时获取可视化窗口位置
           Ball.prototype.handlerMouseMove = function(evt){
                  var e = evt || window.event;
                  this.offsetX = e.clientX;
                  this.offsetY = e.clientY;    
            }
            //删除小球
           Ball.prototype.handlerMouseUp = function(){
                 clearInterval(this.timer);
           }
           //鼠标按下
           Ball.prototype.handlerMouseDown = function(evt){
                  var e = evt || window.event;
                  this.offsetX = e.offsetX;
                  this.offsetY = e.offsetY;
                  this.timer = setInterval(function(){
                        var ball = this.createBall(this.offsetX,this.offsetY);

                        setTimeout(function(){
                              this.ballMove(ball ,this.offsetY);
                        }.bind(this),50)

                  }.bind(this),50)
                  
           }
           //生成球移动
           Ball.prototype.ballMove = function(ball , MinTop){
                  var randomLeft   = Math.round(Math.random()*this.cWitch/2);
                  var randomMinTop = Math.round(Math.random()*this.cHeight + MinTop);

                  ball.style.left = randomLeft + "px";
                  ball.style.top  = randomMinTop + "px";
                  ball.style.opacity = 0.2;

                  setTimeout(function(){
                        ball.remove();
                  },1000);
           }
           //生成小球并设置样式
           Ball.prototype.createBall = function(offsetX,offsetY){
                 var ball = document.createElement("div");
                 ball.className = "ball";
                 ball.style.left = offsetX + "px";
                 ball.style.top  = offsetY + "px";
                 ball.style.background = randomColor();
                 ball.style.transition = "all 1s";

                 this.main_ele.body.appendChild(ball);

                 return ball;
           }

           function randomColor(){             
            //      var r = Math.round(Math.random()*255);
            //      var g = Math.round(Math.random()*255);
            //      var b = Math.round(Math.random()*255);
            //      return "rbg( " + r + "," + g + "," + b + ")";

                  var max = parseInt("ffffff",16);
                  var randomNum = max - Math.round(Math.random()*max);
                  var Color = "#"+randomNum.toString(16); 
                  // radial-gradient(#fff,#000)
                  return "radial-gradient("+ Color + ",#000)";
           }          
           new Ball(document);
      </script>
</body>
</html>