<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
      <style>
            div{
                  width: 200px;
                  height: 100px;
                  margin: 20px;
                  background:#ddd;
            }
      </style>
</head>
<body>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <script>
            var divs = document.getElementsByTagName("div");
            var timer = null;

            // timer 全局只有一个不够用 ;
            // 一个dom配置一个定时器 ;
            // dom 私有一个 timer;
            // dom 对象 => 属性; 
            // dom.timer ;
            for( var i = 0, dom ; dom = divs[i++];){
                  //高级监听函数里的this为window
                  dom.addEventListener("mouseover",handlerMouseover(600,this));
            }
            //不就是函数嵌套函数吗
            function handlerMouseover(target,dom){
                  console.log(dom);
                  return function(){
                        clearInterval(this.timer);
                        this.timer = setInterval(changeWidth( target , this ) , 50);
                        console.log(this);
                  }
            }
            function changeWidth(target , dom){               
                  return function(){
                        var speed = (target - dom.offsetWidth)/20;
                        speed = speed > 0 ? parseInt(speed + 1) : parseInt(speed - 1);
                        if(target === dom.offsetWidth){
                              clearInterval(dom.timer);
                              // console.log(1);
                        }else{
                              dom.style.width = dom.offsetWidth + speed + "px";
                        }
                  }
            }
            // function handlerMouseover(){
            //       var target = 400;
            //       // console.log(this);
            //       clearInterval(this.timer);
            //       this.timer = setInterval(changeWidth(this,target),50)
            // }
            // function changeWidth(dom,target){
            //       return function(){   
            //             var speed = (target - dom.offsetWidth)/20;
            //             speed = speed > 0 ? parseInt(speed + 1) : parseInt(speed - 1);
            //             // speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);
            //             if(target === dom.offsetWidth){
            //                   console.log(1)
            //                   clearInterval(dom.timer);
            //             }else{
            //                   dom.style.width = speed + dom.offsetWidth + "px";
            //             }
            //       }
            // }
      </script>
</body>
</html>