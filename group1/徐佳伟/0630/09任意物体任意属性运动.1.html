<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
      <style>
            #box1,#box2,#box3{
                  width: 100px;
                  height: 100px;
                  border: 10px solid #000;
                  background: #ddd;
                  float: left;
                  margin: 20px;
                  text-align: center;
                  line-height: 100px;
                  
            }
      </style>
</head>
<body>
      <div id="box1">变高</div>
      <div id="box2">变宽</div>
      <div id="box3">变透明</div>

      <script>
            var box1 = document.getElementById("box1");
            var box2 = document.getElementById("box2");
            var box3 = document.getElementById("box3");

            box1.addEventListener("mouseover",handlerMouseover1(400,"height"));
            box2.addEventListener("mouseover",handlerMouseover2(400,"width"));
            box3.addEventListener("mouseover",handlerMouseover3(0.3,"opacity"));

            function handlerMouseover1(target , attr){
                  return function(){
                        clearInterval(this.timer);
                        // console.log(this);
                        this.timer = setInterval(move.bind(this,target,attr),50);
                        
                  }
            }
            function handlerMouseover2(target , attr){
                  return function(){
                        clearInterval(this.timer);
                        this.timer = setInterval(move.bind(this,target,attr),50);
                        
                  }
            }
            function handlerMouseover3(target , attr){
                  return function(){
                        clearInterval(this.timer);
                        this.timer = setInterval(move.bind(this,target,attr),50);
                        
                  }
            }
            function move(target ,attr){
                  // console.log(dom);
                  if(attr === "opacity"){
                        var len = parseInt(getComputedStyle(this)[attr] * 100);
                  }else{
                        var len = parseInt(getComputedStyle(this)[attr]);
                  }

                  var speed = ((attr === "opacity" ? target *100 : target) - len)/10;
                  speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);

                  if(target === len){
                        clearInterval(this.timer);
                  }else{
                        if(attr === "opacity"){
                              this.style[attr] = (speed + len)/100;
                        }else{
                              this.style[attr] = speed + len + "px";
                        }
                  }
            }



//还不够 柯里化吧
            // function handlerMouseover1(){
            //       move(400,this,"height");
            //       console.log(this);
            // }
            // function handlerMouseover2(){
            //       move(400,this,"width");
            //       console.log(this);
            // }
            // function handlerMouseover3(){
            //       move(0.3,this,"opacity");
            //       console.log(this);
            // }

            

//---------------------------------------------------------------------------------------------

            // function move(target,dom,attr){
            //       clearInterval(dom.timer);
            //       dom.timer = setInterval(function(){
            //             if(attr === "opacity"){
            //                   var len = parseInt(getComputedStyle(dom)[attr] * 100) ;
            //             }else{
            //                   var len = parseInt(getComputedStyle(dom)[attr]);
            //             }

            //             var speed = (attr === "opacity" ? (target *100 -len) : target - len)/10 ;
            //             speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);

            //             if(target === len){
            //                   clearInterval(dom.timer);
            //             }else{
            //                   if(attr === "opacity"){
            //                         dom.style[attr] = ( len + speed )/100;
            //                   }else{
            //                         dom.style[attr] = len + speed +"px";
            //                   }
            //             }
            //       },50)
            // }

//----------------------------------------------------------------------------------

            // function move(target,dom,attr){
            //       var timer = null;
            //       clearInterval(dom.timer);
            //       timer = setInterval(function(){
            //             if(attr === "opacity"){
            //                   var iNow = parseInt(getComputedStyle(dom)[attr] * 100);
            //             }else{
            //                   var iNow = parseInt(getComputedStyle(dom)[attr]);
            //             }
            //             console.log(iNow);
            //             var speed = ((attr === "opacity" ? target *100 : target) - iNow)/10;
            //             speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);

            //             if(target === iNow){
            //                   clearInterval(dom.timer);
            //             }else{
            //                   if(attr === "opacity"){
            //                         dom.style[attr] = (iNow + speed)/100;
            //                   }else{
            //                         dom.style[attr] = speed + iNow + "px";
            //                   }
            //             }
            //       },50)
            // }
      </script>
</body>
</html>