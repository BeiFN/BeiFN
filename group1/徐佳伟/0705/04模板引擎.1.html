<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
</head>
<body>

      <!-- <script type="text/html" id="template">
            <% for(var i = 0 ; i < 10 ; i ++){ %>
                  <h2>hello world</h2>
            <% } %>
      </script> -->
      <script src="../libs/ejs.js"></script>
      <script type="text/javascript">
           //唉 模板引擎 这是个啥啊
           //总之一句话吧 在html加入逻辑
           //怎么做 对混写代码进行预处理
           //拆分逻辑部分
           //拆出html部分
           //逻辑执行
           //字符串返回

            // 在script标签type为 text/html 的时候,内部的所有代码不会解析，只会当成字符串;  

            //好了下面该考虑咋写了
            //eval用来执行逻辑代码
            //print用来拼接字符串
          
            // var template = document.getElementById("template");
            // // console.log(template.innerHTML);

            // var reg1 = /<%(.*?)%>/g;
            // var res = template.innerHTML.replace( reg1, `\`);$1print( \``);
            //  res = `print( \` ${res} \` );`
            // console.log(res);

           

            // var html ="";
            // function print(str){
            //       html +=str;
            // }
            // eval(res);
            // console.log(html);
            // document.body.innerHTML = html;
      </script>
      <script type="text/html" id="template">
           <% for(var i = 0 ; i < 15 ; i++){ %>
                  <h2>向世界问好<%= i %></h2>
           <% } %>  
      </script>

      <script type="text/javascript">
            //咋写呢
            //我觉得吧 先获取写正则表达式吧

            // //获取for循环
            // var reg1 = /<%(.*?)%>/;
            // //获取for循环里边的i
            // var reg2 = /<%=(.*?)%>/;

            //上边的写法太捞了还不对
            // var reg = /<%[^=](.*?)%>/g;
            
            // //好了 正则写完了 该获取那一大串字符了
            // var template = document.getElementById("template");
            // template = template.innerHTML;

            // //嗯! 一切准备就绪
            // var res = template.replace(reg , `\`);$1print(\``);
            // res = `print(\`${res}\`)`
            // console.log(res);
            // var html ="";
            // let print = str =>{
            //       html += str;
            // }

            // var reg2 = /<%=(.*?)%>/g;
            // //我凑 差点把我弄晕了 还好还好
            // console.log(res.match(reg2));
            // console.log(res);
            // res = res.replace(reg2 , `\`);print($1);print(\``);
            // console.log(res);
            // console.log(eval(res));
            // console.log(html);

      </script>
</body>
</html>