<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
</head>
<body>
      <script>
            // //ajax的GET提交方式使用的基本步骤
            // // 1.创建ajax对象，2.配置对象 3.调用send（）函数 4.如果请求成功执行回调函数
            // var xhr = new XMLHttpRequest();
            // xhr.open("GET", "http://localhost/ajax/ajax.txt");
            // xhr.send(null);
            // xhr.onreadystatechange = function(){
            //       if(xhr.readyState == 4 && xhr.status == 200){
            //             console.log(xhr.responseText);
            //             document.body.innerHTML = xhr.responseText;
            //       }
            // }

            // //post提交方式的ajax  
            // // 1.post提交的必须要用php后缀名的文件接收， 
            // // 2.要添加请求头 xhr.setRequestHeader("Content-type" , "application/x-www-form-urlencoded");
            // // 3.ajax对象中的send（）函数中必须要有请求的内容
            // var xhr = new XMLHttpRequest();
            // xhr.open("POST", "http://localhost/ajax/ajax.php");  

            // xhr.setRequestHeader("Content-type" , "application/x-www-form-urlencoded");
            // xhr.send("username=hello world");s

            // xhr.onreadystatechange = function(){
            //       if(xhr.readyState == 4 && xhr.status == 200){
            //             console.log(xhr.responseText);
            //             document.body.innerHTML = xhr.responseText;
            //       }
            // }

            //ajax的封装，包括get和set的提交方式
            function ajax(type, url, callback,  data){
                  
                  //先获取data中的数据并且拼接为可以直接放在地址中的类型
                  data =  {
                        username  : "hello world",
                        passworld : "123456"
                  }
                  var str = ""
                  for(var attr in data){
                        str += str.length ? "&": "" + data[attr];
                        console.log(str)
                  }
                  var xhr = new XMLHttpRequest();
                  xhr.open(type, url);

                  if(type == "POST"){
                        xhr.setRequestHeader("Content-type" , "application/x-www-form-urlencoded");
                        xhr.send(sendcontent);
                  }else{
                        xhr.send(null);
                  }
                  xhr.onreadystatechange = function(){
                        if(xhr.readyState == 4 && xhr.status == 200){
                              callback(xhr.responseText);
                        }
                  }
            }
            function callback(text){
                  console.log(text);
            } 
            ajax("GET", "http://localhost/ajax/ajax.txt", callback);
      </script>
</body>
</html>