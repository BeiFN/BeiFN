<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{margin: 0; padding: 0;}
        .ball{
            width: 20px;
            height: 20px;
            position: absolute;
            background: radial-gradient(#000, #fff);
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <script>
        //面向对象实现点击粒子喷射效果
        function Partical(selector){
            this.timer = null;
            this.cWidth = document.documentElement.clientWidth;
            this.cHeight = document.documentElement.clientHeight;
            this.ele = selector == document ? document : document.querySelector(selector);
            this.init();
        }
        Partical.prototype.init = function(){
            this.ele.addEventListener("mousedown", this.handlerMouseDown.bind(this));
            this.ele.addEventListener("mouseup", this.handlerMouseup.bind(this));
            this.ele.addEventListener("mousemove", this.handlerMousemove.bind(this))
        }
        Partical.prototype.handlerMousemove = function (evt){
            var e = evt||window.event;
            this.clientX = e.clientX;
            this.clientY = e.clientY;
        }
        Partical.prototype.handlerMouseup = function(evt){
            clearInterval(this.timer);
            this.timer = null;
        }
        Partical.prototype.handlerMouseDown = function(evt){
            var e = evt || window.event;
            this.clientX = e.clientX;
            this.clientY = e.clientY;
            this.createElement()
        }
        //创建小球，再定时器中创建小球，设置小球的初始样式，初始位置，小球的运动结束位置 css3控制小球的运动过程
        Partical.prototype.createElement = function(){
            // clearInterval(timer)
            this.timer = setInterval(function(){
                var ball = document.createElement("div");
                ball.className = "ball";
                ball.style.top = this.clientY + "px";
                ball.style.left = this.clientX + "px";
                ball.style.transition = "all 1s"
                if(this.ele == document){
                    document.body.appendChild(ball);
                }else{
                    ele.appendChildball()
                }
                //小球的运动是从小球添加进界面开始的，所以应该在小球添加进界面之后就开始执行this.move（）函数
                setTimeout(function(){    //设置时间间隔为1秒出现一个小球，出现之后就调用move函数
                    this.move(this.clientY,ball)
                    setTimeout(() => {
                        ball.remove();
                    }, 1000);
                }.bind(this), 50)  //渲染完成之后再执行动画效果
            }.bind(this), 20)
        }
        Partical.prototype.move = function(clientY,ball){
            var x = parseInt(Math.random()*800);
            var y = (this.cHeight - clientY)+parseInt(Math.random()*800);
                ball.style.left = x+"px";
                ball.style.top = y + "px";
                ball.style.opacity = 0.1;
        }
        new Partical(document);

    </script>
</body>
</html>