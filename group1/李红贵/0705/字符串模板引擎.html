<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>字符串模板引擎</title>
</head>
<body>
    
    <!-- <script>
        // EJS
        //学习成本低，效率极高 

        // 反引号··
        // 字符串模板汇中拼接变量使用··

        // 模板插件，拼接字符串TML的时候放入JS逻辑
        //对拆分逻辑部分
        // 拆出html部分
        // 逻辑执行
        // 字符串返回
        // 定规则

    </script> -->

<!-- 
    <div id="app">
        <ul>
            <li v-for = "item in json">{{item.title}}</li>
        </ul>
    </div> -->

        <!-- 
            type="text/html"存js和html混合语句
            <% 写在scriptType里面应为不会对页面产生任何影响
            <%  js语句 %>
        -->
    <script type="text/html" id="template">
        <% for(var i = 0 ; i < 15 ; i ++){ %>
            <h2>向世界问好 <%= i %></h2>
        <% } %>
    </script>

    <script type="text/javascript">
        // 模板引擎
        // SEO 搜索引擎优化  结果优化,后端用的较多
        // 前端框架使用  html里面写js逻辑

        // 字符串符合js规则，执行逻辑，返回结果

        var template = document.getElementById("template").innerHTML;
        console.log(template);

        // 把字符串template 改变的符合JS规则;


        var regJS = /<%[^=](.*?)%>/g;
        console.log(template.match(regJS));
        // 去标记;
        // 修改js语句数据格式
        var res = template.replace( regJS , `\`); $1 print(\``);
        console.log(res);




        // 拼接print方法前后格式
        res = `print(\`${res}\`)`;
        console.log(res);

        var regVar = /<%=(.*?)%>/g;
        console.log(res.match(regVar));
        // 获取变量i语句
        var res = res.replace(regVar,`\`);  print($1); print(\``);
        console.log(res);
        


        var html = "";
        eval(res);//调用print方法
        // console.log(eval(res));

        
        function print(str){
            console.log(2222,str);
            html += str;
            // console.log(html);
        }

        console.log(html);
        document.body.innerHTML += html;
        


    </script>
</body>
</html>