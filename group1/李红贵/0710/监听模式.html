<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>监听模式</title>
</head>
<body>
    <Script>
        class Gcz{//观察者
            constructor(name,age){
                this.name = name;
                this.age = age;
            }
            //收到通知处理函数
            getNotificationTest(msg){
                console.log(this.name+"获取到消息："+msg+"\n收到收到");
            }
        }

        class NotificationCenter{//消息通知中心
            constructor(){
                this.list = [];//观察者名单
            }

            addGcz(gcz){//添加观察者
                this.list.push(gcz);
            }
            deleteGcz(gcz){//删除观察者
                this.list.splice(this.list.indexOf(gcz),1);
            }

            publish(msg){//发布消息
                this.list.forEach((gcz)=>{
                    gcz.getNotificationTest(msg);
                })
            }

        }

        // 生成观察者实例
        let gcz1 = new Gcz("张一", 15);
        let gcz2 = new Gcz("张二", 18);
        let gcz3 = new Gcz("张三", 11);
        let gcz4 = new Gcz("张四", 25);

        // 实例通知中心，发布者
        let pub = new NotificationCenter();

        // 添加观察者
        pub.addGcz(gcz1);
        pub.addGcz(gcz2);
        pub.addGcz(gcz3);
        pub.addGcz(gcz4);

        // 发布消息
        pub.publish("0101，我是泰山，我是泰山，收到请回复，收到请回复");
        pub.deleteGcz(gcz4);
        pub.publish("0101，我是泰山，我是泰山，收到请回复，收到请回复");


    </Script>

    
</body>
</html>