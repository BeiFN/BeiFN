<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <input type="text" placeholder="用户名" id="username">
    <input type="text" placeholder="用户密码" id="userPass">
    <script>
        username.onblur = hanlderBlur;
        function hanlderBlur(){
            var content = username.value;
            if(content.length >= 6 && content.length <= 20){
                username.style.borderColor = "green";
            }else{
                username.style.borderColor = "red";
                alert("用户名长度应该为6-20位");
                return false;
            }

            if(isNaN(content[0])){
                username.style.borderColor = "green";
            }else{
                username.style.borderColor = "red";
                alert("首字符不能为数字");
                return false;
            }

            // var kkk;
            // var str = content[content.length]; 
            // console.log(str);    //undefined
            // console.log(kkk=str);//undefined
            // if(undefined){
            //     console.log("a");
            // }else{
            //     console.log("b");//b
            // }

            for(var i = 0, letter; letter = content[i++]; ){
                var ascii = letter.charCodeAt(0);
                if( !(ascii >= 48 && ascii <=57  || ascii >=65 && ascii <= 90 ||ascii >= 97 && ascii <= 122 || ascii ===95)){
                    username.style.borderColor = "red";
                    alert("只能用字母数字和下划线")
                    return false;
                }
            }
        }


        userPass.onblur = hanlderPass;
        // userPass.onchange = hanlderPass;
        function hanlderPass(){
            userPass.style.borderColor = "";
            var usePasswor = userPass.value;
            var fzd = 0;

            var ca = true;
            var cA = true;
            var c1 = true;
            var c_ = true;

            if(usePasswor.length<6){
                userPass.style.borderColor = "red";
                alert("密码长度不能小于6位");
                return false;
            }else{
                if(usePasswor.length==6){
                    fzd = 1;
                }else{
                    fzd = 2;
                }
                console.log("密码复杂度为"+fzd)
            }

            for(var i = 0, charP; charP = usePasswor[i++];){

                var ascii = charP.charCodeAt(0);
                if(i==1){
                    if(ascii<65 || ascii>90){
                        alert("密码必须以大写字母开头");
                        return false;
                    }
                }


                if( !(ascii >= 48 && ascii <=57  || ascii >=65 && ascii <= 90 ||ascii >= 97 && ascii <= 122 || ascii ===95)){
                    userPass.style.borderColor = "red";
                    alert("只能用字母数字和下划线")
                    return false;
                }

                
                if(ascii >= 48 && ascii <=57){
                    if(c1){
                        c1 = false;
                        fzd += 1;
                        console.log("密码复杂度为"+fzd)
                    }
                }
                
                if(ascii >= 65 && ascii <=90){
                    if(cA){
                        cA = false;
                        fzd += 1;
                        console.log("密码复杂度为"+fzd)
                    }
                }
                
                if(ascii >= 97 && ascii <=122){
                    if(ca){
                        ca = false;
                        fzd += 1;
                        console.log("密码复杂度为"+fzd)
                    }
                }
                
                if(ascii == 95 ){
                    if(c_){
                        c_ = false;
                        fzd += 1;
                        console.log("密码复杂度为"+fzd)
                        
                    }
                }

                
            }
            alert(("密码复杂度为"+fzd));
            
        }
    </script>
    

</body>
</html>