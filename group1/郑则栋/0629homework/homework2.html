<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>变加速之重力回弹</title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			#box{
				width: 400px;
				height: 400px;
				background: green;
				position: relative;
				margin: 0 auto;
			}
			#box1{
				width: 40px;
				height: 40px;
				background: white;
				border-radius: 50%;
				position: absolute;
				top: 0;
				left: 0;
			}
			#mask{
				width: 100%;
				height: 100%;
				position: absolute;
				top: 0;
				left: 0;
				z-index: 10;
			}
			#bar{
				width: 20px;
				height: 50px;
				background: red;
				position: absolute;
				top: 300px;
				left: -20px;
			}
		</style>
	</head>
	<body>
		<div id="box">
			<div id="mask">
				
			</div>
			<div id="box1">
				
			</div>
			
			<div id="bar">
				
			</div>
		</div>
		
		<script type="text/javascript">
			var obox=document.getElementById("box");
			var obox1=document.getElementById("box1");
			var bar=document.getElementById("bar");
			var g=0.3;
			var speed=3;
			var timer;
			var bool=true;
			var hor=0;
			document.addEventListener("click",move);
			obox.addEventListener("mousemove",moveHor);
			function move(){
				clearInterval(timer);
				timer=setInterval(moveDown,50);
				bool=false;
				
				
			}
			function moveDown(){
				if(obox.offsetHeight-obox1.offsetTop-40>=speed){
					speed+=g;
					obox1.style.top=obox1.offsetTop+speed+"px";
					obox1.style.left=obox1.offsetLeft+hor+"px";
				}
				else{
					obox1.style.top=obox.offsetHeight-40+"px";
					speed=-speed;
					if(speed>-2){
						obox1.style.top=obox.offsetHeight-40+"px";
						clearInterval(timer);
					}
				}
			}
			function moveHor(eve){
				var e=eve||event;
				if(bool){
					obox1.style.left=e.offsetX-20+"px";
					obox1.style.top=e.offsetY-20+"px";
				}
				else{
					hor=(e.offsetX-200)/200*2;
					bar.style.height =50+hor*25+"px";
				}
			}
			
			
			
		</script>
		
		
	</body>
</html>
