<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>封装属性改变对象</title>
		<style type="text/css">
			#box1 {
				width: 100px;
				height: 100px;
				background: #ddd;
			}
		</style>
	</head>
	<body>
		<div id="box1">

		</div>

		<script type="text/javascript">
			"use strict"
			var obox1 = document.getElementById("box1");
			var timer = null;
			move(obox1, {
				width: 300,
				height: 300,
				opacity: 20
			}, function() {
				// console.log(1);
			});

			function move(ele, obj, deal) {
				clearInterval(timer);
				var iNode = null;
				var speed = null;
				timer = setInterval(function() {
					for (var attr in obj) {
						if (attr === "opacity") {
							iNode = getComputedStyle(ele)[attr] * 100;
						} else {
							iNode = parseInt(getComputedStyle(ele)[attr]);
						}
						speed = (obj[attr] - iNode) / 10;
						speed > 0 ? speed = Math.ceil(speed) : speed = Math.floor(speed);

						if (iNode === obj[attr]) {
							delete obj[attr];
							if (Object.keys(obj).length === 0) {
								clearInterval(timer);
								typeof deal === "function" ? deal() : "";
							}
						} else {
							if (attr === "opacity") {
								ele.style.opacity = (parseInt(iNode + speed)) / 100;
							} else {
								ele.style[attr] = iNode + speed + "px";
							}
						}
					}
				}, 100);
			}
		</script>


	</body>
</html>
