

**小组成员： 陈荣强 张朋伟 陆凤妹  郑则栋 李红贵 李林 韩卫静 尹亚亭 李红霞  徐佳伟  刘彪  高展飞 李策  文君豪 钱广荣**

**组       长： 张朋伟**


## 问题1: 后台服务器可以获取前端传过去的key值吗？ 后台写的固定key值'callback'，那封装中的cb_fild是不是可以省略？

* 什么是服务器 ? http服务 ;  nginx , apache , iis , nodejs , ...
```javascript
      http://www.baidu.com/v2/search?wd=hello&p=10#aaa
      协议  
             域名 
                          query(告知服务器路径)
                                     search(GET协议携带的数据) 
                                                   hash(前端用的页面传值)
```
* 解析数据 (字段值) 语言解析器来做的。
      协议携带的数据 > GET | POST 


* 后台写的固定key值'callback'，那封装中的cb_fild是不是可以省略
      可以这么操作但是不建议, 因为你的jsonp封装是面向所有使用场景的。
```php
<?php
      $cbname = $_GET['callback'];
      $data = "hello world";
      echo "$cbname('$data')";
?>
```
```javascript
function jsonp(url,cb_fild,callback){
      var GLOBAL_CB = "foo"
      // 1.全局函数;
      window[GLOBAL_CB] = function (res){
	//声明一个任意的全局函数,去调用我们需要调用的回调函数callback,该函数运行没有任何结果，只是用来传值
            callback(res)
      }
      // 2. 发送请求; 
      var script = document.createElement("script");
      url += /\?/.test(url) ? "&" : "?";
      script.src = url + cb_fild + "=" + GLOBAL_CB;
console.log(url + cb_fild + "=" + GLOBAL_CB);
      script.onload = function(){
            this.remove();
      }
      document.body.appendChild(script);
}
```


##问题2 能否通过传入具名函数，获取到它的函数名字符串，如果可以这样的话，是不是可以省去设置全局函数调用回调函数的步骤？

* 高内聚 ， 低耦合 ;
* 严重耦合全局函数，封装的功能不独立。
  
```javascript
function trueCallback(res){
    console.log(22,res);
    console.log(arguments);
}
jsonpl("http://localhost/BaseServer/0711/jsonptruedata.php","trueCallback");

function jsonpl(url,calback){
    var script = document.createElement("script");
    url += /\?/.test(url) ? "&":"?";
    console.log(url);
    url = url + "fooname"+"="+calback;
    console.log(url);
    script.src = url;
    script.onload = function(){
        this.remove();
    }
    document.body.appendChild(script);
}
```

##问题3 promise连缀那里听得不太明白，具体是咋运用，请智哥再讲一下。
```javascript
      let promise = new Promise( (resolve , reject) => {
            setTimeout( a => {
                  console.log(1);
                  resolve();
            },1000)
      })
      // promise Promise resolver 
      let promise2 = promise.then( res => {
            return new Promise( ( resolve , reject ) => {
                  setTimeout( a => {
                        console.log(2);
                        resolve();
                  },1000)
            })
      })
      // 返回值是一个新的状态机 ;
      promise2.then( res => {

      })
```

##问题4  实际开发中，如果是和后台联调，服务器不在本机时，使用ajax请求时，如何让本地代码和后台服务器同源？ 

 * nginx 
 

##问题5  智哥，书上说script可以共享函数，是不是说就不用自己再声明一个全局函数以供外部调用了啊 ??

![1.png](https://upload-images.jianshu.io/upload_images/2845301-72d1ecbb9358c476.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![2.png](https://upload-images.jianshu.io/upload_images/2845301-d07b784bcae00a5c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* 打扰了;