<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			.box{
				width: 230px;
				height: 300px;
				position: relative;
			}
			.box img{
				width: 100%;
				height: 100%;
			}
			.overbox{
				width: 230px;
				height: 100px;
				background-color: rgba(28,28,28,0.3);
				position: absolute;
				left: 0;
				bottom: 0;
			}
		</style>
	</head>
	<body>
		<div class="box">
			<img src="https://img.alicdn.com/bao/uploaded/i2/2251059038/O1CN01qm5k5b2GdSBSazRyn_!!0-item_pic.jpg" >
			<div class="overbox">
				<h5>019爱奇艺尖叫之夜演唱会北京站</h5>
				<p style="font-size: 12px;color: #FFFFFF;">2019.08.04 周日 19:00</p>
			</div>
		</div>
		<script type="text/javascript">
			function jsonp(url , cb_filed, data){
				return new Promise(function(resolve,reject){
					var GLOBLE_CB ="foo";
					window[GLOBLE_CB] = function(res){
						resolve(res);
					}
					url += /\?/.test(url) ? "&" : "?" ;
					url = url + cb_filed + "=" + GLOBLE_CB
					
					if(typeof data === "object"){
						var data_str = "";
						for(var attr in data){
							data_str.length > 0 ? data_str+=`&${attr}=${data[attr]}` :data_str+=`${attr}=${data[attr]}`;
						}
						url += ("&" + data_str);
					}	
										
					let script = document.createElement("script");				
					script.src = url ;
					script.onload = function(){
					        this.remove();
					 }
					document.body.appendChild(script);
				})
			}
			
			let url = "https://api-gw.damai.cn//search.html";
			let data = {
				cat:1,
				destCity:"%E5%85%A8%E5%9B%BD",
				_ksTS:"1562852468524_101"
			}
			jsonp(url , "callback" ,data)
			.then(function(res){
				console.log(res.data);
			})
		</script>
	</body>
</html>
