<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			 *{
                  margin: 0;
                  padding: 0;
            }
            header{
                  height: 600px;
                  background: #ddd;
                  font-size: 100px;
                  color: #fff;
                  line-height: 600px;
                  text-align: center;
            }
            div[class*=box]{
                  height: 800px;
                  box-sizing: border-box;
                  border: 5px solid #ddd;
                  color: #fff;
                  font-size: 100px;
                  line-height: 800px;
                  text-align: center;
            }
            footer{
                  height: 800px;
                  background: yellowgreen;
            }
            .stairs{
                  position: fixed;
                  top: 40%;
                  right: 50%;
                  margin-right: 598px;
                  -webkit-transform: translateY(-50%);
                  -ms-transform: translateY(-50%);
                  transform: translateY(-50%);
                  padding: 0;
                  background: #fff;
                  -webkit-box-shadow: 0 0 3px 0 #ddd;
                  box-shadow: 0 0 3px 0 #ddd;
                  z-index: 110;
                  -webkit-transform: scale(0);
                  -ms-transform: scale(0);
                  transform: scale(0);
                  visibility: hidden;
                  -webkit-transition: all .2s linear;
                  transition: all .2s linear;
            }
            .stairs span{
                  display: block;
                  padding: 5px 10px;
                  color: #666;
				  font-size: 16px;
				  line-height: 50px;
                  -webkit-transition: all .2s linear;
                  transition: all .2s linear;
                  background: #f6f6f6;
                  cursor: pointer;
            }
            .stairs span.active{
                  color: #fff;
				  background-color: #fd0;
                  font-weight: 700;
            }
            .show{
                  -webkit-transform: scale(1);
                  -ms-transform: scale(1);
                  transform: scale(1);
                  visibility: visible
            }
		</style>
	</head>
	<body>
		<header>我是头部</header>
		  <div class="content">
				<div class="box1" style="background-color: navy">1</div>
				<div class="box2" style="background-color: crimson">2</div>
				<div class="box3" style="background-color: saddlebrown">3</div>
				<div class="box4" style="background-color: cadetblue">4</div>
				<div class="box5" style="background-color: bisque">5</div>
		  </div>
		  <footer></footer>
		  <div class="stairs">
				<span>1楼连接</span>
				<span>2楼连接</span>
				<span>3楼连接</span>
				<span>4楼连接</span>
				<span>5楼连接</span>
		  </div>
		  
		  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
		  <script>
			  function Stairs(){
				  this.init();
			  }
			  
			  $.extend(Stairs.prototype,{
				  init: function(){
					  this.stairs = $(".stairs");
					  this.stairsList = this.stairs.children();
					  this.header = $("header");
					  this.outerHeight = this.header.outerHeight();
					  this.boxs = $("div[class*=box]");
					  
					  this.boxList = [];
					  $.each( this.boxs , $.proxy(function(index , item){
						  var offsettop = $(item).offset().top;;
						  this.boxList.push({
							  min : offsettop ,
							  max : offsettop + $(item).outerHeight()
						  })
					  },this))
					  
					  this.stairs.on("click" ,"span" , $.proxy(function(evt){
						  var e = evt || window.event;
						  var target = e.target || e.srcElement;
						  var index = $(target).index();
						  $("body,html").scrollTop(this.boxList[index].min);
					  },this));
					  
					  this.timer = null;
					  $(window).scroll( $.proxy(function(){
						  if(this.timer !== null) return false;
						  this.timer = setTimeout($.proxy(function(){
							  var st = $("body,html").scrollTop();
							  this.toggleStairs(st);
							  this.changeStairs(st);
							  this.timer = null;
						  },this),100);
					  },this) );
				  },
				  
				  toggleStairs : function(scrolltop){
					  var has = this.stairs.hasClass("show");
					  if(!has && scrolltop >= this.outerHeight){
						  this.stairs.addClass("show");
					  }
					  if(has && scrolltop < this.outerHeight){
						  this.stairs.removeClass("show");
					  }
				  },
				  
				  changeStairs : function(scrolltop){
					  $.each( this.boxList , $.proxy(function(index ,item){
						  if(scrolltop >= item.min && scrolltop < item.max){
							  this.stairsList.eq(index).addClass("active")
							  .siblings().removeClass("active");
						  }
					  },this))
				  }
				  
				  
				   
			  })
			  
			  new Stairs();
		  </script>
	</body>
</html>
