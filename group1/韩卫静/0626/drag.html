<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			#box{
				width: 200px;
				height: 200px;
				border: 2px solid #282828;
				background-color: #8888FF;
				border-radius: 4px;
				position: absolute;
				left: 0;
				top: 0;
			}
		</style>
	</head>
	<body>
		<div id="box">
			
		</div>
		
		<script type="text/javascript">
			var box = document.getElementById("box");
			var globle = {
				clientWid : document.documentElement.clientWidth,
				clientHei : document.documentElement.clientHeight
			};
			
			var _dragMove = null;
			box.addEventListener("mousedown" , dragStart);
			function dragStart(evt){
				var e = evt || window.event;
				
				document.addEventListener("mousemove" , _dragMove = dragMove.bind(false,{
					offsetx : e.offsetX,
					offsety : e.offsetY
				}));
				
			}
			function dragMove(offset,evt){
				var e = evt || window.event;
				// console.log(offset.offsetx, offset.offsety);
				var left = e.clientX - offset.offsetx;
				var top = e.clientY - offset.offsety;
				
				//设置边界
				left < 0 ? left = 0 : "";
				top < 0 ? top = 0 : "";
				left > globle.clientWid -200 ? left = globle.clientWid -200 : "";
				top > globle.clientHei -200 ? top = globle.clientHei -200 : "";
				
				box.style.left = left + "px";
				box.style.top = top + "px";
			}
			
			document.addEventListener("mouseup" , dragStop);
			function dragStop(){
				document.removeEventListener("mousemove" ,_dragMove);
			}
			
			window.onresize = function(){
				// console.log(globle.clientWid,globle.clientHei);
				globle.clientWid = document.documentElement.clientWidth;
				globle.clientHei = document.documentElement.clientHeight;
			}
		</script>
	</body>
</html>
