<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			*{margin: 0; padding: 0;}
			body{
				background-color: #282828;
			}
			#containor{
				width: 1000px;
				height: 600px;
				background: #fff;
				position: absolute;
				top: 0;
				bottom: 0;
				left: 0;
				right: 0;
				margin: auto;
			}
			#cover{
				width: 100%;
				height: 100%;
				position: absolute;
				z-index: 999;
			}
			#ball{
				width: 50px;
				height: 50px;
				border-radius: 50%;
				position: absolute;
				background: radial-gradient(#ddd , #222);
			}
			#pro{
				width: 100px;
				height: 10px;
				border-radius: 5px;
				position: absolute;
				bottom: 0;
				left: 450px;
				border: 2px solid #000000;
			}
			#proBar{
				height: 100%;
				width: 0px;
				border-radius: 5px;
				background: linear-gradient(to right, #ddd,#000);
			}
		</style>
	</head>
	<body>
		<div id="containor">
			<div id="cover"></div>
			<div id="ball"></div>
			<div id="pro">
				<div id="proBar"></div>
			</div>
		</div>
		
		<script type="text/javascript">
			var ball = document.getElementById("ball");
			var containor = document.getElementById("containor");
			var proBar = document.getElementById("proBar");
			var timer = null;
			var moving = false;
			var speedX = 0;
			document.onclick = function(){
				moving = true;
				moveBox(550);
			}
			containor.onmousemove = function(evt){
				var e = evt || window.event ;

				if(!moving){
					ball.style.left = e.offsetX -25 + "px";
					ball.style.top = e.offsetY - 25 + "px";
				}
				horizonMove(e.offsetX);	
			}
			
			function moveBox(target){
				var speed = 5;
				var g = 0.5
				clearInterval(timer);
				timer = setInterval(function(){
					speed += g ;
					ball.style.left = ball.offsetLeft + speedX + "px";
					ball.style.top = ball.offsetTop + speed + "px";
					if(Math.abs(target - ball.offsetTop) <= speed){
						ball.style.top = target;
						speed = -speed;
						
						if(speed > -2){
                              clearInterval(timer);
                              ball.style.top = target  + "px";
                        }
					}
					if(ball.offsetLeft >= 950 || ball.offsetLeft <= 0){
						speedX = -speedX;
					}
				},50);
			}
			
			function horizonMove(offX){
				var percent = parseInt(Math.abs(offX - 500) / 5);
				proBar.style.width = percent + "%";
				speedX = parseInt(((offX - 500) / 5)/5);
				console.log(speedX);
			}
		</script>
	</body>
</html>
