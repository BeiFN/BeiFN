<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			body,html{
				height: 100%;
                background: #f4f4f4;
			}
			.box{
                  float: left;
                  position: relative;
                  background: #fff;
                  margin: 0 20px 20px 0;
                  overflow: hidden;
                  border-radius: 4px;
                  -webkit-border-radius: 4px;
                
            }
            .box img{
                  width: 210px;
                  height: 158px;
            }
            .box h4{
                  width: 190px;
                  display: flex;
                  text-align: center;
                  justify-content: space-between;
                  padding: 10px;
                  white-space: nowrap;
                  overflow: hidden;
                  text-overflow:ellipsis;
            }
            #container{
                  width: 1150px;
                  height: 223px;
                  margin: 0 auto;
            }
		</style>
	</head>
	<body>
		<div id="container">
			
		</div>
		
		<script type="text/html" id="template">
			 
			<% for(let attr in data){ %>
			<div class="box">
				<img src="<%= data[attr].cover1x %>" >
				<h4> <%= data[attr].title %> </h4>
			</div>
			<% } %>
		</script>
		<script type="text/javascript" src="ejs.js"> </script>
		<script type="text/javascript">
			//ajax封装
			function ajax(type="GET",url,callback){
				let xhr = new XMLHttpRequest();
				xhr.open(type,url);
				xhr.send(null);
				xhr.onreadystatechange = function(){
					if(xhr.readyState === 4 && xhr.status === 200){
						callback(xhr.responseText);
					}
				}
			}
			
			//使用封装的ajax
			ajax("GET" , "http://10.9.10.163/hwj/0710/02ajaxjson.json",function(res){
				//获取元素
				let contain = document.getElementById("container");
				// console.log(document.getElementById("template").innerHTML);
				//格式化ajax返回的结果
				res = JSON.parse(res);
				//使用ejs处理res并得到数据
				var res = ejs.render(document.getElementById("template").innerHTML , {data : res.data.contents})
                  // console.log(res);
				//将数据放入元素中
				contain.innerHTML = res;
			})
			
			
		</script>
	</body>
</html>
