<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		
		<script type="text/javascript">
			class Observer{
				constructor(name,age) {
				    this.name = name;
					this.age = age;
				}
				accept(msg){
					console.log(`${this.name} accept a message : ${msg}`);
				}
			}
			
			class Publisher{
				constructor(arg) {
				    this.list = {
						'18plus' : [],
						'18down' : [],
						'all' : []
					};
				}
				publish(msg ,type){
					for(let attr in this.list[type]){
						this.list[type][attr].accept(msg);
					}
				}
				subscribe(obs){
					let type = "all";
					if(obs.age < 18){
						this.list['18down'].push(obs);
					}
					if(obs.age >= 18){
						this.list['18plus'].push(obs);
					}
					this.list['all'].push(obs);
				}
				unsubscribe(obs){
					this.list.splice(this.list.indexOf(obs),1);
				}
			}
			
			let obs1 = new Observer("mary",17);
			let obs2 = new Observer("jack",12);
			let obs3 = new Observer("jone",20);
			
			let pub = new Publisher();
			pub.subscribe(obs1);
			pub.subscribe(obs2);
			pub.subscribe(obs3);
		</script>
	</body>
</html>
