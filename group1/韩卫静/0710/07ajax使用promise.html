<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		
		<script type="text/javascript">
			function ajax(url , data , type){
				return new Promise(function(resolve , reject){
					
					let xhr = new XMLHttpRequest();

					var dataStr = "";
					for(var attr in data){
						dataStr += (dataStr.lenght > 0 ? "&" : "");
						dataStr += `${attr}=${data[attr]}`
					}
					if(dataStr.length != 0){
						url = url + (/\?/.test(url) ? "&" : "?") + dataStr;
					}
					// console.log(url);				
					xhr.open(type , url );
					type === "POST" ? xhr.setRequestHeader("Content-type" , contentType) : "";
					xhr.send(type === "POST"? dataStr : null);
					xhr.onreadystatechange = function(){
						if(xhr.readyState === 4 && xhr.status === 200){
								resolve(xhr.responseText);
						}
					}	
							
					setTimeout(function(){
						reject("timeoutÔºÅ");
					},5000);
				})
			}
			
			ajax("http://10.9.10.163/hwj/0710/01ajax.txt",{},"GET")
			.then(function(res){
				console.log(res);
			})
		</script>
	</body>
</html>
