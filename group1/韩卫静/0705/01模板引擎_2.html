<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		
		<script type="text/html" id="example">
			<% for(var i = 0 ; i < 10 ; i ++ ){ %>
				<h2>hello world  <%= i %> </h2>
			<% } %>
		</script>
		
		<script type="text/javascript">
						//加入变量-----------
			var html = "";
			function print(str){
				html += str;
			}
					
			var str = document.getElementById("example").innerHTML;
			//用于匹配普通js代码的正则
			var reg = /<%[^=](.*?)%>/g;
			var newstr = str.replace(reg , `\`); $1 print( \` ` );
			var reg2 = /<%=(.*?)%>/g;
			newstr = newstr.replace(reg2 , `\`); print($1); print( \` ` );
			
			newstr = `print(\` ${newstr} \`)`;
			// console.log(newstr);
			eval(newstr);
			// 
			document.write(html);
			// console.log(html);
		</script>
	</body>
</html>
