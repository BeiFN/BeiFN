<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
            #box,#box2{
                  width: 100px;
                  height: 100px;
                  background: #ddd;
                  position: absolute;
                  left: 0;
                  top: 0;
            }
            #box2{
                  left: 200px;
                  background: yellowgreen;
            }
      </style>
</head>
<body>
        <div id="box"></div>
        <div id="box2"></div>
  <script>
        
        function Drag(selector){
              this.init(selector);
        }
        Drag.prototype = {
                constructor: Drag,
                
                init: function (selector) {
                    this.moveCb = null;
                    this.ele = document.querySelector(selector);
                    this.ele.addEventListener("mousedown",this.start.bind(this));
                    document.addEventListener("mouseup",this.end.bind(this));
                },
                start:function(evt){
                    var e = evt || event;
                    this.offsetX = e.offsetX;
                    this.offsetY = e.offsetY;
                    document.removeEventListener("mousemove",this.moveCb)
                    document.addEventListener("mousemove",this.moveCb=this.hanldermove.bind(this))
                },
                hanldermove:function(evt){
                    var e = evt || event;
                    var x = e.clientX - this.offsetX;
                    var y = e.clientY - this.offsetY;
                    this.move(x,y)
                },
                move : function(x,y){
                   
                    this.ele.style.left = x + "px";
                    this.ele.style.top = y +"px" ;
                },
                end : function(){
                    document.removeEventListener("mousemove",this.moveCb)
                }

            }   
        

        function DragSon(selector){
            Drag.call(this,selector)
        }
        DragSon.prototype = Object.create(Drag.prototype);
        DragSon.prototype.constructor = DragSon;
        DragSon.prototype.move = function(x,y){
           var res = this.boundce(x,y);
           this.ele.style.left = res.x+"px";
           this.ele.style.top = res.y +"px";
        }
        DragSon.prototype.boundce = function(x,y){
            x<0? x=0 : x;
            y<0? y=0 : y
            return {
                x,y
            }

        }
        new DragSon("#box");
        new Drag("#box2")
        // new Drag("#box");

        // 1. 构造函数继承;
        // 2. 原型继承;

        // function ExtendDrag(selector){
        //       Drag.call( this , selector)
        // }
        // ExtendDrag.prototype = Object.create(Drag.prototype);
        // ExtendDrag.prototype.move = function(x,y,ele){

        //       var res = this.boundary(x , y);

        //       ele.style.left = res.x  + "px";
        //       ele.style.top  = res.y  + "px";
        // }
        // ExtendDrag.prototype.boundary = function( x , y ){
        //       x = x < 0 ? 0 : x ;
        //       y = y < 0 ? 0 : y ;
              
        //       return {    
        //             x , 
        //             y
        //       }
        // }

  </script>
</body>
</html>