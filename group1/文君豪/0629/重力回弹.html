<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
      <style>
            body{
                  background: #000;
            }
            #container{
                  width: 600px;
                  height: 400px;
                  position: absolute;
                  left: 0;
                  top: 0;
                  right: 0;
                  bottom: 0;
                  margin: auto;
                  background: #fff;
            }
            #ball{
                  width: 40px;
                  height: 40px;
                  background: radial-gradient(#09f,#f19);
                  border-radius: 50%;
                  position: absolute;
                  left: 100px;
                  top: 0;
            }
            .mask{
                  width: 100%;
                  height: 100%;
                  position: absolute;
                  left: 0;
                  top: 0;
                  z-index: 999;
            }
            .progress{
                  width: 20px;
                  height: 100px;
                  overflow: hidden;
                  position: absolute;
                  bottom: 0;
                  left: 0;
                  border-radius: 0 2px 2px 0;
            }
            .progress-bar{
                  height: 100px;
                  width: 20px;
                  background:top linear-gradient(yellowgreen,#f10);
                  border-radius: 0 2px 2px 0;
            }
      </style>
</head>
<body>
      <div id="container">
            <div class="mask"></div>
            <div id="ball"></div>
            <div class="progress">
                  <div class="progress-bar"></div>
            </div>
      </div>

      <script>
           var ball = document.getElementById("ball");
           var container = document.getElementById("container");
           var speed = 8;
           var g = 0.9;
           var timer = null;
           var timer2 = null;
           var target=400;
           var moving = false;
           var speedX = 0;
           var progress = document.querySelector(".progress")
           container.addEventListener("click" ,dropball)
           container.addEventListener("mousemove",shiftmove)
           function dropball()
           {
                 moving = true;
                 clearInterval(timer)
               timer = setInterval( drop , 50)
           }


           
           function shiftmove(evt)
           {
                    var e = evt || event;
                        var shiftleft = e.offsetX-20;
                        var shifttop = e.offsetY-20;
                        if(!moving)
                        {
                        ball.style.left = shiftleft+"px";
                        ball.style.top =  shifttop+"px";
                        }
                        
                        getBallTurn(e.offsetX)
           }

           function getBallTurn(x)
           {
                  if(x>300)
                  {
                        var prop = (x-300)/300*100;
                        speedX = - 5 * (prop / 100);
                  }
                  else
                  {

                        var prop = (300-x)/300*100;
                        speedX =   5 * (prop / 100);
                  }
                  progress.style.height = prop + "px";
           }
           function drop()
           {
               
               speed+=g;
               ball.style.top = ball.offsetTop+speed+"px";
               ball.style.left = ball.offsetLeft-speedX+"px";
               if(Math.abs(target -40- ball.offsetTop)<= speed)
               {
                   
                   ball.style.top = target-40+"px";
                   speed = -speed;
                   console.log(speed)
               //  console.log(speed)
                  if(speed>-1)
                   {
                   clearInterval(timer)
                   ball.style.top = target-40+"px";
                   }
               }

               
           }
      </script>
</body>
</html>