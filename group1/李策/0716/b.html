<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        header {
            height: 600px;
            background: #ddd;
            font-size: 100px;
            color: #fff;
            line-height: 600px;
            text-align: center;
        }

        div[class*=box] {
            height: 1000px;
            box-sizing: border-box;
            border: 5px solid #ddd;
            color: #fff;
            font-size: 100px;
            line-height: 1000px;
            text-align: center;
        }

        footer {
            height: 800px;
            background: yellowgreen;
        }

        .stairs {
            position: fixed;
            top: 50%;
            right: 50%;
            margin-right: 598px;
            -webkit-transform: translateY(-50%);
            -ms-transform: translateY(-50%);
            transform: translateY(-50%);
            padding: 0;
            background: #fff;
            -webkit-box-shadow: 0 0 3px 0 #ddd;
            box-shadow: 0 0 3px 0 #ddd;
            z-index: 110;
            -webkit-transform: scale(0);
            -ms-transform: scale(0);
            transform: scale(0);
            visibility: hidden;
            -webkit-transition: all .2s linear;
            transition: all .2s linear;
        }

        .stairs span {
            display: block;
            padding: 5px 10px;
            color: #666;
            -webkit-transition: all .2s linear;
            transition: all .2s linear;
            background: #f6f6f6;
            cursor: pointer;
        }

        .stairs span.active {
            color: #f10;
            font-weight: 700;
        }

        .show {
            -webkit-transform: scale(1);
            -ms-transform: scale(1);
            transform: scale(1);
            visibility: visible
        }
    </style>
</head>

<body>
    <header>我是头部</header>
    <div class="content">
        <div class="box1">1</div>
        <div class="box2">2</div>
        <div class="box3">3</div>
        <div class="box4">4</div>
        <div class="box5">5</div>
    </div>
    <footer></footer>
    <div class="stairs">
        <span>楼梯连接</span>
        <span>楼梯连接</span>
        <span>楼梯连接</span>
        <span>楼梯连接</span>
        <span>楼梯连接</span>
    </div>

    <script src="../libs/jquery.js"></script>
    <script src="../libs/utils.js"></script>
    <script>
        let { throttle } = Utils;
        // 1. 给box加上随机颜色 ?
        $(".content div").css({
            background: function () {
                var r = Math.round(Math.random() * 255);
                var g = Math.round(Math.random() * 255);
                var b = Math.round(Math.random() * 255);
                return "rgb(" + r + "," + g + "," + b + ")"
            }
        })

        // 楼梯功能;
        // 1. 按钮显示隐藏;
        // 2. 点击改变scrollTop 功能;
        // 3. 根据scrollTop 改变楼层;

        function Stairs() {
            this.init();
        }
        $.extend(Stairs.prototype, {
            init: function () {
                this.header = $("header");
                this.headerSize = {
                    height : this.header.height()
                }
                this.stairs = $(".stairs");
                this.boxs   = $("div[class*=box");
                this.stairsList = this.stairs.children();
                this.boxList = [];
                $.each( this.boxs , $.proxy(function( index , item ){
                    var min = $(item).offset().top;
                    this.boxList.push({
                        min : min,
                        max : min + $(item).outerHeight()
                    })
                },this))
                console.log(1);
                $(window).scroll(throttle($.proxy(function () {
                    console.log(1);
                    var st = $("body , html").scrollTop();
                    this.toggleStairs(st);
                    this.changeStairs(st);
                }, this), 100));

                this.stairs.on("click", "span", $.proxy(function (evt) {
                    var target = evt.target;
                    this.changeFloor.call(this, $(target).index());
                    this.changeStairs($("body,html").scrollTop());
                }, this))
            },
            toggleStairs: function (st) {
                var has = this.stairs.hasClass("show");
                if (!has && st > this.headerSize.height) {
                    this.stairs.addClass("show");
                }
                if (has && st < this.headerSize.height) {
                    this.stairs.removeClass("show");
                }
            },
            changeFloor: function (index) {
                $("html,body").scrollTop( this.boxs.eq(index).offset().top);
                
            },
            changeStairs: function (st) {
                $.each(this.boxList,$.proxy(function(index,item){
                    if(st >= item.min && st < item.max){
                        this.stairsList.eq(index).addClass("active").siblings().removeClass("active");
                    }
                },this))
            }
        })


        new Stairs();


    </script>
</body>

</html>                        楼梯-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>banner</title>
    <style>
        .container {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        
        .wrapper {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        .slide {
            width: 100%;
            height: 100%;
        }
        
        .slide-active {
            z-index: 1;
        }
        
        .button-next,
        .button-prev {
            width: 40px;
            height: 40px;
            position: absolute;
            top: 50%;
            margin-top: -20px;
            z-index: 999;
        }
        
        .button-next {
            background: url(https://static.zcool.cn/git_z/z/widget/slider/images/svg/right_arrow.svg?v=2);
            background-size: 100%;
            background-position: center;
            right: 0;
        }
        
        .button-prev {
            background: url(https://static.zcool.cn/git_z/z/widget/slider/images/svg/left_arrow.svg?v=2);
            background-size: 100%;
            background-position: center;
            left: 0;
        }
        
        .pagination {
            position: absolute;
            text-align: center;
            -webkit-transition: .3s opacity;
            -o-transition: .3s opacity;
            transition: .3s opacity;
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
            z-index: 10;
        }
        
        .pagination-bullets {
            bottom: 10px;
            left: 0;
            width: 100%;
        }
        
        .pagination-bullet {
            width: 8px;
            height: 8px;
            display: inline-block;
            border-radius: 100%;
            background: #000;
            opacity: .2;
        }
        
        .pagination-bullet-active {
            opacity: 1;
            background: #007aff;
        }
        /* fade专用样式 */
        
        .container.container-fade .slide {
            position: absolute;
        }
        
        .container.container-slide .wrapper {
            display: flex;
        }
        
        #box {
            width: 400px;
            height: 300px;
        }
        
        .slide {
            text-align: center;
            color: #fff;
            line-height: 300px;
            font-size: 100px;
        }
    </style>
</head>

<body>
    <div id="box">
        <div class="container">
            <div class="wrapper">
                <div class="slide slide-active" style="background:red; ">1</div>
                <div class="slide" style="background: blue;">2</div>
                <div class="slide" style="background: black;">3</div>
                <div class="slide" style="background: green;">4</div>
                <div class="slide" style="background: yellow;">5</div>
            </div>
            <div class="button-next"></div>
            <div class="button-prev"></div>
            <div class="pagination pagination-bullets">
                <div class="pagination-bullet pagination-bullet-active"></div>
                <div class="pagination-bullet"></div>
                <div class="pagination-bullet"></div>
                <div class="pagination-bullet"></div>
            </div>
        </div>
    </div>
    <script src="../libs/jquery.js"></script>
    <script src="../libs/utils.js"></script>
    <script>
        function Banner(selector, options) {
            this.nowIndex = 0;
            this.state = "normal";
            this.main = $(selector);
            this.sliders = $(".slide");
            this.btn_prev = $(".button-prev");
            this.btn_next = $(".button-next");
            this.wrapper = $(".wrapper");
            this.options = $.extend({
                effect: "slide",
                pagination: ".pagination"
            }, options);
            this.init();
        }
        Banner.prototype = {
            constructor: Banner,
            init: function() {
                this.animationLayout();
                this.btnLayout();

                this.btn_prev.on("click", $.proxy(this.prevIndex, this));
                this.btn_next.on("click", $.proxy(this.nextIndex, this));
                this.main.on("click", $.proxy(this[this.options.effect], this));
                this.pagination_ele === undefined ? "" : this.main.on("click", $.proxy(this.changePage, this));
                this.pagination_ele === undefined ? "" : this.pagination_ele.on("click", $.proxy(this.handlerClick));
            },
            handlerClick: function(evt) {
                var e = evt || window.event;
                var target = e.target || e.srcElement;
                if (target !== this.pagination_ele) {
                    for (var i = 0; i < this.pagination_ele.length; i++) {
                        if (target === this.pagination_ele.children[i]) {
                            console.log(target)
                            this.toIndex(i);
                            break;
                        }
                    }
                }
            },
            changePage: function() {

                for (var i = 0, bullet; bullet = this.pagination_ele.children[i++];) {
                    removeClassName(bullet, "pagination-bullet-active")
                }
            },
            btnLayout: function() {
                var pagination_count = this.sliders.length - (this.options.effect === "slide" ? 1 : 0);
                this.pagination_ele = $(this.options.pagination);
                if (this.pagination_ele === null) return false;
                console.log(this)

                var html = "";
                for (var i = 0; i < pagination_count; i++) {
                    if (i === this.nowIndex) {
                        html += "<div class='pagination-bullet pagination-bullet-active'></div>"
                    } else {
                        html += "<div class='pagination-bullet'></div>"
                    }
                }
                this.pagination_ele.innerHTML = html;
            },
            animationLayout: function() {

            },
            prevIndex: function() {

            },
            nextIndex: function() {

            },
            toIndex: function() {

            },
            fade: function() {

            },
            slide: function() {

            }
        }

        function removeClassName(dom, className) {
            // var classString = dom.className;
            // var classReg = new RegExp("\S?"+className);
            // classString = classString.replace(classReg,"");
            // dom.className = classString;
            return dom.className = dom.className.replace(new RegExp("\S?" + className), "");
        }





        new Banner(".container", {
            effect: "slide"
        });
    </script>
</body>

</html>