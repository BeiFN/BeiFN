<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <button class="btbt"><i>这是</i> 一个按钮</button>
    <button class="btbt">这是一个按钮</button>
    <button class="btbt">这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>
    <button>这是一个按钮</button>

    <script>
        // // 委托的初级封装;
        // document.addEventListener("click", delegation(createBtn, "BUTTON"));

        // function delegation(handlerClick, selector) {

        //     //1.判定是否符合事件规则
        //     return function (evt) {
        //         // console.log(this)
        //         var e = evt || window.event;
        //         var target = e.target || e.srcElement;
        //         if (target.nodeName === selector) {
        //             // console.log("点击了按钮")
        //             handlerClick.call(target);
        //         }

        //     }
        // }
        // // 2.业务函数
        // function createBtn() {
        //     var btn = document.createElement("button");
        //     btn.innerHTML = "这是创建的按钮";
        //     document.body.appendChild(btn);
        // }


        //事件委托封装的优化;

        // document.addEventListener("click", delegation(createBtn, ".btbt"))

        // function delegation(handlerClick, selector) {

        //     return function (evt) {

        //         var eleList = document.querySelectorAll(selector);
        //         var e = evt || event;
        //         var target = e.target || e.srcElement;
        //         console.log(target);
        //         var targetFamily = [];

        //         var _temp = target;
        //         var count = 0;
        //         while (true && count++ < 100) {
        //             if (_temp === this) {
        //                 break;
        //             } 
        //                 targetFamily.push(_temp);
        //                 _temp = _temp.parentNode;
                    
        //         }

        //         for (var i = 0, ele; ele = eleList[i++];) {
        //             if (targetFamily.length === 1 ? (ele === target) :( targetFamily.indexOf(ele)!=-1)) {
        //                 createBtn.call(target)
        //             }

        //         }
        //     }

        // }

        // function createBtn(){
        //     var btn = document.createElement("button");
        //     btn.innerHTML = "这是创建的按钮";
        //     document.body.appendChild(btn);
        // }








    </script>
</body>


</html>