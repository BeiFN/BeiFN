# 什么是函数？

- 编程的角度：具有某种功能的代码判断；
- 生活的角度：函数就是一个完成特定功能的工具；
- 一般情况下，函数都具备参数和返回值。

# 函数相关

- 函数：JS中的一等公民；
- 闭包 , 作用域，作用域链，AO，执行环境，*** 垃圾回收机制；
- 函数为啥而存在 ?            和变量基本一致 => 用来存储代码。

# 函数如何创建？

- 常见的函数有哪些？？

```javascript
Math.pow(a, 5);
alert("ok");
document.write("你好");
```

- 函数常用的定义方式：

```javascript
function test(){

}
```

# 函数的好处有哪些？

1. 代码复用；
2. 封装（隐藏细节）；
3. 控制代码的执行时机；
4. 维护自己写的每一个函数，极大的降低维护成本。

**tip：函数功能要单一，不要太庞大；高内聚，低耦合。**

# 函数的几种类型

- 具名函数

  **什么是 API（Application Program Interface）， 就是语言本身提供给你实现某些功能的函数**

```javascript
function test(){
     //声明会被提前，可以在任何地方调用
}
```

- 匿名函数
  - 赋值式

     ```javascript
     var test = function(){
          //只能在该函数以下位置，调用
     }
     ```
  
  - 立即调用式
  
     ```javascript
     (function(){
     	console.log("hello");
     })()
     +function(){
     	console.log("hello");
     }()
     -function(){
     	console.log("hello");
     }()
     //号称最快;
     !function(){
     	console.log("hello");
     }()
     ~function(){
     	console.log("hello");
     }()
     *function(){
     	console.log("hello");
     }()
     ```
  
     **函数失去了，我们在适当时机调用的特性, 立即调用函数还有什么意义呢 ?**
  
     **回答：1.起到创建作用域的作用；2.规避大规模大量的全局变量使用**
  
- 特殊类型

  ```javascript
  var foo = function poo(){
      // console.log("hello");
      poo = 20;
      console.log(poo);
  }
  foo();
  poo();//无法访问
  ```

  1. 可访问性：当具名函数给变量赋值的时候 , 具名函数的函数名只在函数内部可以访问；
  2. 读写特性：这个具名函数的函数名是只读的；
  3. 调用：调用的时候只能调用foo。

- 声明函数总结

  1. 具名函数：`function foo(){}`；
  2. 匿名函数：
     - 赋值给变量；
     - 立即执行 (作用域)；
  3. 特殊类型：`var foo = function poo(){}`；
     - 可以正常使用foo但是具名的函数名poo只在函数内部可访问，poo是只读的。

JS是一个脚本语言，那么它的代码，需要编译吗？   **需要**

在编译的过程中，**所有的声明语句，都会被提前。**

b();  //当执行函数b的时候，由于声明被提前，可以执行

a();  //当执行函数a的时候，由于a仍未定义，不可执行

```javascript
function b(){
     document.write("aa");
}

var a=function(){
     document.write("123");
}
```

##### 如何执行函数？

##### 函数与事件的结合？（tip: 事件函数的调用，是由浏览器执行的）

###### 鼠标事件

------

1. onclick 单击
2. ondblclick 双击
3. onmousedown 鼠标按下
4. onmouseup 鼠标抬起
5. onmouseover 鼠标移入
6. onmouseout 鼠标移出
7. onmousemove 鼠标移动

###### 键盘事件

------

1. onkeydown 键盘按下
2. onkeyup 键盘抬起
3. onkeypress 按一次键盘

###### 元素事件

------

1. onfocus 获取焦点
2. onblur 失去焦点
3. oninput 正在输入
4. onchange 已经改变

###### 窗口事件

------

1. window 窗口的统一入口
2. window.onload 加载结束
3. window.onresize 窗口尺寸改变
4. window.onscroll 滚动条发生滚动

# 函数的返回值

- 返回值 => 运算结果；
- `console.log(parseInt(1.2));`
- 但凡是没有 return 的方法(函数)，这时候都没有返回值；
- return 就是函数之中的关键字；这个关键字表示函数的运算结果，函数的运算结果只能有一个；
- return 能结束函数运行。

# 函数的参数

**参数机制**

1. 形参 => 形式参数；相当于一个未赋值的变量；完全等价于函数中声明的局部变量；
2. 实参 => 实际参数(数据)；给形参（函数内部的局部变量）赋值的参数。

**形参在函数体上**

**实参在函数调用上**

# 作用域

- 在JS中 => 只有函数作用域（暂时没有块级作用域，在ES6中才出现）；

- 函数大括号内部即为一个独立的作用域；

- 作用范围有限的变量，我们称之为局部变量；

  - 函数中声明的变量，叫做局部变量；

  ```javascript
  function foo(){
      // 1. 在内存之中开辟了一块空间， 这块空间用来储存所有foo函数运行时需要用到的数据。
      // 2. 把局部变量 a 放入到当前的空间。
      var a = 10;
      // 3. 引用的时候在空间之中取出相应的内容，然后进行使用。
      console.log(a); 
  }
  // 4. 函数运行结束;
  ```

- 如果声明变量的时候，这个变量没有被函数包裹那么这个变量就是全局变量

  `var a = 10;`

  - 数据的存储是永久的；
  - 永久 ??   相对程序的永久；
  - 只要程序运行那么全局变量会一直常驻于内存之中，程序占用内存空间较大；
  - 尽量少用全局变量。

- 声明周期

  - 全局变量声明周期是永久的，在程序的任何位置都可以访问；
  - 局部变量的生命周期是有限，在作用域创建的时候被创建，在作用域被销毁的时候销毁。

- JS的糟粕特性：声明提升

  ```javascript
  console.log(a);
  a = 10;
  console.log(a);
  // JS 如何去编译代码 ? 
  // 浏览一遍代码，再去翻译代码;
  // 1. 变量|函数的声明
  // 2. 语法; => 报错;
  function(){
  }
  ```

  **声明提升：当你在任何位置编写一个变量声明的时候，无论任何位置，当代码解析的时候，我们的解析会将这个变量的生命提升到当前域的最前列进行声明，只在原位置保留赋值。**

  - 函数提升叫做整体提升；
  - 当我们去操作全局变量的时候，我们赋的值，会影响全局变量；
  - 访问顺序：就近原则；

1. 函数执行的时候，会产生一个作用域；

2. 当变量声明的时候，会被解析器进行声明提升；

3. 函数在没有被调用之前就是字符串；

     ```javascript
     function foo(){
     // 查找自己的AO（Active Object，活动对象）;  如果没有继续向外查找;
     console.log(hahaha);
     }
     foo();
     ```
     
4. 逐个作用域查询的机制 => 作用域访问关系（作用域链）；

5. 顶层是全局作用域 window。

#### 作用域总结
1. 局部作用域，全局作用域；
   - **window对象承载了所有的全局变量；**
   - 在全局作用域中声明的变量就是全局变量：只要不被函数大括号包括即为全局变量；
   - 全局变量特性：跟着程序常驻内存，程序关闭全局变量才会被卸载，因为有这样的特性所以我们不要滥用全局变量；
   - 因为程序在执行的时候会对函数进行特殊处理，解析器会给函数创建独立的执行环境，根据执行环境创建一个独立的作用域(AO)， 这个活动对象用来储存临时的局部变量，局部作用域在执行结束之后会被内存自动清理；
   - 在函数大括号中声明的变量叫做局部变量；
   - 局部变量特性：朝生暮死，函数开始执行时被声明，函数执行结束后被删除；
2. 局部变量，全局变量；
3. 声明提升，函数提升;
4. JS解析过程之中会先预览一下代码；
5. 变量访问，就近原则；
6. 作用域链；
7. 执行环境，AO(活动对象)=> 作用域；
8. 最顶层作用域，全局作用域(window)。





