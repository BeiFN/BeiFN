<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <button id="btn">开始</button>
    <div id="content"></div>
    <script>
        // 人物初始数据
		var someone = {
			name : "一个虚拟人物",
			hp : 100
		}
		// 人物异常事件列表
		var eventList = [
			{
			 type : "吃了一颗毒蘑菇" ,
			 harm : 20
			},
			{
			 type : "走路崴了脚" ,
			 harm : 2
			},
			{
			 type : "淋雨感了冒",
			 harm : 5
			}
		]

		// // 人物死亡方式列表
		var dieList = [ "狗带了" ,"玩完了","去世了" ]
        // var n = 1;
        // var btn = document.getElementById("btn");
        // var content = document.getElementById("content");
        // var str = "";
        // function playGame() {
        //     while(true) {
        //         var randomInt = getRandomInt();
        //         someone.hp -= eventList[randomInt].harm;
        //         console.log(someone.hp);
        //         if(someone.hp > 0) {
        //             str += "<p>"+
        //                     "第"+n+"天:"+someone.name+"因为"+eventList[randomInt].type+"而减少了"+eventList[randomInt].harm+"点Hp,血量剩余"+someone.hp+"HP";
        //                     "</p>"
        //         }else {
        //             str += "<p>"+
        //                     "第"+n+"天:"+someone.name+"因为"+eventList[randomInt].type+"而减少了"+eventList[randomInt].harm+"点Hp"+dieList[getRandomInt()];
        //                     "</p>"
        //         }
        //         console.log(str);
        //         content.innerHTML = str;

        //         if(someone.hp <= 0) {
        //             str = "";
        //             break;
        //         }
        //     }
        // }

        // function getRandomInt() {
        //     return Math.round(Math.random()*(eventList.length-1));
        // }
        // btn.onclick = playGame;
        function getRandomInt() {
            return Math.round(Math.random()*(eventList.length-1));
        }

        //获取dom对象
        var btn = document.getElementById("btn");
        var content = document.getElementById("content");
        var str = "";
        function playGame() {
            for(var i=0; true; i++) {
                //用随机数获取随机事件
                var randomInt = getRandomInt();
                // console.log(randomInt);
                //每次掉血
                someone.hp -= eventList[randomInt].harm;
                console.log(someone.hp);
                //判断血量
                if(someone.hp > 0) {
                    str += "<p>"+
                            "第" + (i+1) + "天" +
                            someone.name + "因为" + eventList[randomInt].type +
                            "减少了" + eventList[randomInt].harm + "点血量,血量剩余" + someone.hp + "点HP" +
                            "</p>";
                }else {
                    str += "<p>"+
                            "第" + i + "天" +
                            someone.name + "因为" + eventList[randomInt].type +
                            "减少了" + eventList[randomInt].harm + "点血量" + dieList[getRandomInt()] + 
                            "</p>";
                }
                content.innerHTML = str;
                //中止并重置游戏
                if(someone.hp <= 0) {
                    str = "";
                    someone.hp = 100;
                    break;
                }
            }
        }
        btn.onclick = playGame;    
    </script>
</body>
</html>