<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>所属性运动框架封装</title>
    <style>
        #container {
            width: 100px;
            height: 100px;
            margin: 200px auto;
            opacity: 0.2;
            background:skyblue;
            /* position: absolute; */
        }
    </style>
</head>

<body>
    <div id="container">

    </div>

    <script>
        var container = document.getElementById("container")
        move(container, {
            "width": 300,
            "height": 300,
            "opacity": 100
        }, function () {
            container.style.background = "yellowgreen"
        })

        function move(dom ,options , callback){
            clearInterval(dom.timer)
            dom.timer = setInterval(()=>{
                for(var attr in options){
                    var iNow = attr === "opacity" ? parseInt(getComputedStyle(dom)[attr]*100):parseInt(getComputedStyle(dom)[attr])
                    var speed = (options[attr]-iNow)/10
                    speed = speed>0 ? Math.ceil(speed):Math.floor(speed)
                    if(options[attr] === iNow){
                        delete options[attr]
                        if(Object.keys(options).length === 0) {
                            clearInterval(dom.timer)
                            typeof callback === "function" ? callback():""
                        }
                    }
                    else{
                        dom.style[attr] = attr === "opacity" ? (iNow+speed)/100:(iNow+speed)+"px"
                    }
                    
                }
            },50)
        }
    </script>

</body>

</html>