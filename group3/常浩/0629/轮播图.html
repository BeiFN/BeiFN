<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="banner.css">
</head>
<body>
    <div class="container">

        <div class="wrapper">
            <div class="slider" style="background: #F0F">1</div>
            <div class="slider" style="background: #0F0">2</div>
            <div class="slider" style="background: #0FF">3</div>
            <div class="slider" style="background: #FF0">4</div>
            <div class="slider" style="background: #00F">5</div>
            <div class="slider" style="background: #F0F">1</div>
        </div>

        <div class="button-next"></div>
        <div class="button-prev"></div>

        <div class="pagination">
            <span style="background: red">1</span>
            <span>2</span>
            <span>3</span>
            <span>4</span>
            <span>5</span>
        </div>
      </div>

      <script>
          //选择器的封装
          function $(selector){
              var res = null ;
              return (res = document.querySelectorAll(selector)).length === 1 ? res[0] : res; 
          }
          //封装move运动框架
          function move (target , dom , attr){
              clearInterval(dom.timer);
              dom.timer = setInterval(function(){
                  var iNow = (attr === "opacity" ? parseInt(getComputedStyle(dom)[attr] * 100) : parseInt(getComputedStyle(dom)[attr]));
                  var speed =( target - iNow) /10
                //   var speed = (attr === "opacity" ? parseInt(( target - getComputedStyle(dom)[attr]) * 100 /10) : (target-getComputedStyle(dom)[attr]));
                  speed = (speed > 0 ? Math.ceil(speed) : Math.floor(speed));
                  if(target === iNow ){
                      clearInterval(dom.timer);
                  }else{
                    dom.style[attr]  =  (attr === "opacity" ? ((iNow + speed)/100) : (iNow + speed + "px"));
                  }
              },50)
          }
          var containe = $(".container");
          var wrapper  = $(".wrapper");
          var slider   = $(".slider");
          var btn_next = $(".button-next");
          var btn_prev = $(".button-prev");
          var pagination = $(".pagination");
          var showId = 0;
          // 事件绑定区
          containe.addEventListener("click",function(evt){
              var e = evt || window.event ;
              if(e.target === btn_next || e.target === btn_prev){
                  move(-300 * showId , wrapper , "left");
              }
          })
          btn_next.addEventListener("click",handlerNext);
          btn_prev.addEventListener("click",handlerPrev);
         // 小数字颜色改变区
          function spanChange(){
              var span   = pagination.children[(showId === 5 ? 0 : showId )];
              for(var i = 0 ; i < 5 ; i++){
                pagination.children[i].style.background = "";
              }
              span.style.background = "red";
          }
          // 小数字跳转区
          pagination.addEventListener("click",function(evt){
                var e = evt || window.event ;
                target = e.target || e.srcElement ;
                for(var i = 0 ; i < pagination.children.length ; i ++){
                    clearInterval(stars);
                    if(target === pagination.children[i]){
                        showId = i ;
                        if(i == 0 ){
                            wrapper.style.left = -300 *(slider.length-2) + "px";
                            showId = 5;
                        }else{
                            wrapper.style.left = -300 *(i-1) + "px";
                    }
                    spanChange();
                    move(-300 * showId , wrapper , "left");
                    //重新开启自动播放在3s之后  一共是6s的时间；
                    setTimeout(function(){
                        clearInterval(stars);
                        var stars = setInterval(automatic,3000) ;
                    },3000)
                        
                    }
                }
          })

          // 基本下标改变区
          function handlerNext(){
            
            if(showId == slider.length -1){
                showId = 1;
                wrapper.style.left = 0;
            }else{
                showId ++;
            }
            console.log(showId);
            spanChange();
          }
          function handlerPrev(){
              if(showId == 0){
                  wrapper.style.left = -300 *(slider.length-1) + "px";
                  showId = 4;
              }else{
                  showId --;
              }
            //   console.log(showId);
            spanChange();
          }
          // 自动播放区
        //  document.onload = automatic ;
         var stars = setInterval(automatic,3000) ;
         function automatic(){
            if(showId < 5){
                showId ++;
            }else{
                showId = 1;
                wrapper.style.left = 0;
            }
        //  console.log(showId);
            move(-300 * showId , wrapper , "left");
            spanChange();
         }
      
       
      </script>
</body>
</html>