#### 三组问题汇总 

小组成员 `李罗` ,`刘宝灵` ,`赵汪洋` ,`朱盟` ,`仇明珠` ,`邓修` , `林海松` ,`蒿倩` ,`常浩` ,`李培峰` ,`李嵩` ,`刘深` ,`浦文卓` , 组长 `郭振宁`

**已解决问题**

1.for循环可以遍历对象吗？
>不可以;

2.用 for in 遍历对象时为什么用中括号取值而不用点取属性值。取属性值时哪种情况用点，哪种情况用中括号。
>点只能是指定属性，中括号可以用变量，更灵活。

3.函数如果传入参数以 0123 数字形式传入函数 函数的参数会以8进制显示，有没有解决方案，让他传入的参数变为10进制.
>无法解决，逆规则

4.获取输入框value值时，为什么onkeydown和onkepress获取的总是少一位，而onkeyup能够正常获取。
> 事件的执行顺序问题;onkeydown和onkeypress会在字符输入之前触发，onkeyup会在字符输入之后触发。
    

5.现在上完课基本有三方面的事情要做，一是消化练习上课讲的内容，二是做作业，三是整理笔记，如果当天自习时间不够的话，相对来说哪个环节可以往后放一放？

> 以当天学习内容为主;
> 可以把整理笔记任务简化, 20分钟以内完成。 
> 利用周四周日时间把笔记细化整理。

```javascript
    function foo(){
                  // arguments.indexOf(1);
                  // var arg = mySlice(arguments);
                  // console.log(arg.indexOf(1));
                  // 1. 记住他;
                  console.log([].slice.call(arguments));
                  // 2. 
                  console.log(slice().call(arguments));  (这两种方法有什么区别吗？)
            }           
            // 反柯里化;
            function slice(){
                  // console.log(Array.prototype.slice)
                  return Array.prototype.slice;
            }                                          (这种方法看不懂)  
```

```javascript
    var obj = { a : 10 , b : 20}
    for(var attr in obj){
        // attr => "a" , "b";
        obj[attr];
    }
    obj.a 
    obj["a"];

    obj.attr   // 有attr当成变量的能力么? 
    obj["attr"]
```


```javascript
    function foo(o){
        // 1. 先声明提升  var o;
        // 2. o 形参被 实参赋值 ;
        // o ==> 实参;
        console.log(o)
        o.a++;
        var o = {a : 20} // 对象②
        o.a ++;
    }
    var obj = {a : 10}; // obj 存的是地址; 对象①
    foo(obj);
    console.log(obj);            这个不太懂
```

>  声明提升优先于实参给形参赋值 ,如果同时存在声明提升和实参赋值的话,那么实参赋值有效。
6.bind怎么使用。

```javascript
      // 1. 具名函数bind用法 :

      function foo(){}

      var newFoo = foo.bind();

      // 2. 匿名函数bind用法

      var foo = function(){

      }.bind()

```

7.拖拽里面的柯里化再讲一遍。

* bind封装的柯里化;
* 函数嵌套，函数调用函数。
```javascript
      function myBind( fn , _this ){
            return function(){
                  fn.call(_this)
            }
      }
```

8.https://github.com/embaobao/webstudy/tree/master/2019.6.24._2.js.EventBubble/work-favoriteMuse
为什么移动回放的时候 没有回到原来的位置？

* 第一次记录位置时，元素位置已经发生改变。因为记录的地点在move事件之中。

9.toString为什么能实现数组只有字符串的扁平化.
> 扁平化的骚操作;
> var arr = [1,[2,3,4,5],6];
> arr.toString().split(",");

* 因为数组在调用 toString 的过程中,会忽略数组的结构,把所有的数据以 `,` 为间隔拼接成一个字符串;

10.表单验证事件处理函数为什么要用bind.

* 因为要传递参数 

11.正则表达式什么时候用小括号，什么时候用中括号？

* () 组;       => 需要获取到匹配字符;
* [] 元字符;   => 匹配多个或的时候使用元字符; 

12.浅拷贝和深拷贝的区别.

* 见问题汇总文件夹下0628文件夹；

13. offsetLeft , offsetTop,   事件对象 e.clientX; e.clintY, e.offsetX,e.offsetY, e.screenX,e.pageY;
   
* offsetLeft , offsetTop 获取元素距离可视区域的left值和top值; 是否有存在position属性的父级;
* client 可视区到鼠标点的x轴距离。
* offset 事件源到鼠标点的x轴距离。
* screen 屏幕到鼠标点x轴距离。
* page   文档到鼠标点x轴距离。

14. 事件委托封装时候 在执行循环之前判断点击了父元素，是否会有优化？
   ![img.png](https://upload-images.jianshu.io/upload_images/15342731-18eb18d581aadfa8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* 减少循环执行次数性能一定优化，优化逻辑提前去根据需求定制。

15.  Object ,新方法 设置的时候，如果属性多的话，难到要一个个设置吗？ 有没有简写什么的？

```javascript
      Object.defineProperties( {
            "a":{
                  get : function(){},
                  set : function(){}
            },
            "b":{

            }
      } )
```

16.  计时器如果作为独立的异步方法 ，那他是怎么访问到函数中的局部变量的？过程不太清楚

```javascript
      function foo(){
            var a = 10;
            setInterval(function(){
                  console.log(a);
            },20)
      }

      var a = 10;
      setInterval(function(){
            console.log(a);
      },20)
```
17.  Object ,中的this 指向，说过后，还是不太清楚。

* this指向当前属性所属的obj;

18.  todolist事件委托的事件类型为change，这样input里面内容不变时，就不能触发函数了，怎么解决

* 给 input 绑定独立的事件;

```javascript
    todolist高级封装里面的这段代码看不懂
     // 判定是否存在子集;
     // 利用短路运算节省性能 , 如果没有传递 domJson.children 属性，那么我们直接跳出for循环不进行其他判断操作;
     // domJson.children && (childNode = domJson.children[i++]);
      for(var i = 0 , childNode ; domJson.children && (childNode = domJson.children[i++]);){
            // childNode => 子节点;
            // 函数的使用者定义的参数; 
            // 1. 元素节点; => 直接插入父级
            // 2. 结构对象; => 创建成元素 再插入父级;
            childNode.nodeType === 1 ? ele.appendChild(childNode) : ele.appendChild( createElement(childNode) )
      }
      return ele ;
}
```

19.烟花爆炸函数里面在for循环里面烟花移动，烟花是一个一个移动，因为for循环速度太快，所以才看上去是一起移动的吗？

* 异步 :
```javascript
  for(var i = 0 ; i < 10 ; i++){
      setInterval(function(){
            console.log(1)
      },200)
  }
```
for => 执行结束 => 异步队列之中的内容 => 200ms之后执行 => 回调函数;

* 同步循环执行结束之后再去执行move方法 => 所以看起来move方法是同时执行的(烟花同时运动);

20.这里两个函数分别改变了this指向，为什么最终指向的是实例？
![image.png](https://upload-images.jianshu.io/upload_images/18442274-cfdbcb792366c2c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![image.png](https://upload-images.jianshu.io/upload_images/18442274-763af1f8f15ecb84.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* 因为在使用bind方法时，这时候会创建一个新函数 ， 并且将传入函数的this固定。因所能操作的函数，都不再是原函数了，而是包裹着原函数的调用的匿名函数。
```javascript
      function bind(callback,_this){
            return function(){      
                  callback.call(_this);
            }  
      }
```

21.这两种方式都可以让变量有初始值，哪种更好呢？
![image.png](https://upload-images.jianshu.io/upload_images/18464133-2583b5911d7b91ff.jpg?imageMogr2/auto-orient/)

```javascript

      function foo( hello = "hello" ){
            console.log(hello)
      }

      function foo( hello = "hello" , { a = 1 , b = 2 , c = 3 } = {}){
            console.log(hello , a , b ,c, )
      }
      foo("world");

```

* 这两种默认值方式没有严格意义的好坏之分，只有使用场景的不同选择不同而已。
* 在函数内部使用变量时，这个时候两种方式没有区别。 区别在于传递实参的时候存在差别。
* 对象传参可以做到想要传递什么参数就传递什么参数，其余的参数可以不传。

22.轮播图思路
* banner

- **构造函数**统筹全局,作为整个程序的开始; 
      1. 接受参数;
      2. 初始各种dom对象，变量...,调用核心方法;.
-  初始化功能(init) 
      * 处理耦合关系。 调用各个方法;
      1. 调用;
      2. 事件;
-  初始布局
      1. layoutAnimate 
       因为布局本身分成两种，一种是position所有slide集中在一起的布局。另外一种是大长条布局。
            - this.options.effect 核心逻辑;
            1. slide => 大长条布局;
            2. fade  => 集中布局
            tip : switch 的使用是因为当前程序可以具备相当优秀的扩展性。
      2. layoutPagnination 
       创建页面分页器小按钮的功能。
            - 分页器是否存在 , 存在继续创建，不存在就停止;
            - 根据需求拼接分页器字符串,放入对应的位置;
-  控制下标 
      * this.nowIndex 
      * this.state 
            1. normal      => 正常情况;
            2. changeLast  => 从第一张切换到最后一张;
            3. changeFirst => 从最后一张切换到第一张;
            4. changePage  => 在最后一张假的第一张图片调用toIndex方法实现特殊bug解决
      1. prevIndex
            本身是一个循环变量的逻辑,因为slide动画需求,所以在prevIndex里面创建一个state属性用来记录特殊值;
            * this.state => changeLast
      2. nextIndex
            同上
      3. toIndex
            同上;
-  控制动画
      * fade      
            清空其余效果，给this.nowIndex元素增加效果;
      * slide
            this.nowIndex 
            1. changePage : 解决bug;
            2. normal     : 根据this.nowIndex 改变left值;
            3. changeFirst: 先挪过去,再动画;
            4. changeLast : 同上;
- 控制分页器按钮显示
      * handlerPaginationClick
            点击按钮的下标记录;
      * changePagination
            根据 this.nowIndex 结合 this.options.effect 判定应该如何显示;
23.智哥智哥，飞机大战游戏开始的时候，当我的飞机出来，如果不动鼠标的话他会一直在下面的中间发射子弹，能不能让飞机刚创建的时候就获取到鼠标的位置定位到鼠标上呢？

* 初始定位;
* Core里面获取鼠标坐标;
```javascript
      // 在 Core 之中 ,获取当前鼠标的位置。

       createPlane(){
            let ele = document.createElement("div");
            let cWidth = document.documentElement.clientWidth;
            ele.className = "plane";
            ele.style.cursor = "none";
            document.body.appendChild(ele);
            ele.style.left = this.boundary(Core.mousePosition.x,Core.mousePosition.y,ele).x + "px";
            Plane.x = ele.offsetLeft;
            Plane.y = ele.offsetTop;
            return ele;
       }

       boundary(x,y,ele){
            let minX =  this.mainSize.left;
            let maxX =  this.mainSize.left + this.mainSize.width - (this.eleSize ? this.eleSize.width : ele.offsetWidth)  ;
            x = x < minX ? minX : x;
            x = x > maxX ? maxX : x;

            y = y < 0 ? 0 : y;
            return {
                  x ,
                  y 
            }
       }    

```

24.飞机大战缩小窗口后，飞机的位置会跑出背景的限定范围，该怎么解决？

* resize 去改变窗口改变改变的值;

25.接口到底指什么？接口地址是什么？

* 接口其实就是返回数据的一个地址;
* 这个地址通常指向一个后端语言编写的文件;
* 接口是一个高级函数 => 传入参数 , 返回结果;

26.ajax和jsonp的区别与联系。

* AJAX => 异步 的 JavaScript 和 XML;

* 包含了 各种各样的请求;
      1. XHR 发起请求;  一个受同源策略但是浏览器原生支持的可以发送请求的对象。
      2. jsonp 利用script标签发起请求; 利用一个非官方提供的方式利用官方规则的漏洞发起请求的方式。

27.onreadystatechange事件处理函数中使用了xhr对象，那可以使用this吗？

      * 试一试 ; 
 
  ``` javascript
      this === xhr  // true;
      xhr.onreadystatechange = function(){
            this  === xhr 
      }     
  ```

28.cookie和token的关系。

* token => 一种字符串加密和构成规范。 就是把 对象 里面的数据进行编码 。
证明你登陆了, 携带一些特殊的信息。

* cookie => 是一种浏览器端的本地存储技术。我们可以利用http去进行设置;
我们把token存在cookie之中。

29.怀智小哥哥，把jQueryajax的type改为post后报如下错误该怎么解决呢？
![image.png](https://upload-images.jianshu.io/upload_images/18464133-0ec266ea2769c163.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
```javascript
    $.ajax({
            url: "practice06.json",
            type: "POST"
        })
```
* 用合适的方法去做合适的事情。 
* 服务器配置问题

30.智哥，为什么用livesever运行你的购物车代码，ajax请求返回的数据是对象，用自己的服务器返回的是字符串。
![image.png](https://upload-images.jianshu.io/upload_images/18464133-c087f1a73c1c51c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](https://upload-images.jianshu.io/upload_images/18464133-31b9bf88b2ea7168.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* liveserver版本问题, 需要在 $.ajax 里面加上 dataType 。