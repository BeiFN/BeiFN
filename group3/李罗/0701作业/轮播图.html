<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>轮播图</title>
    <style>
        *{margin:0;padding:0;}
     
        .container{width:600px;height:200px;margin:20px auto;position: relative;background:#eaeaea;overflow: hidden;}
        .wrapper{width:3600px;height: 200px;background:#0FF;position: absolute;left:0;}
        .slider{width:600px;height: 200px;float:left;text-align: center;line-height: 200px;}
        .button-next,.button-prev{width: 40px;height: 40px;
position: absolute;top: 50%; margin-top: -20px;z-index: 999;}
       
        .pagination{position:absolute;width:100%;height:40px;bottom:20px;text-align: center;}
        .pagination span{ background: #fff;border-radius: 50%;display: inline-block;width:50px;height: 50px;line-height: 50px;}
.pagination span.active{background: #f10;}
.button-next{
      background: url(https://static.zcool.cn/git_z/z/widget/slider/images/svg/right_arrow.svg?v=2);
      background-size: 100%;
      background-position: center;
      right: 0;
}
.button-prev{
      background: url(https://static.zcool.cn/git_z/z/widget/slider/images/svg/left_arrow.svg?v=2);
      background-size: 100%;
      background-position: center;
      left: 0;
}

    </style>
</head>
<body>
    <div class="container">

        <div class="wrapper">
            <div class="slider" style="background: #F0F">1</div>
            <div class="slider" style="background: #0F0">2</div>
            <div class="slider" style="background: #0FF">3</div>
            <div class="slider" style="background: #FF0">4</div>
            <div class="slider" style="background: #00F">5</div>
            <div class="slider" style="background: #F0F">1</div>
        </div>
    
        <div class="button-next"></div>
        <div class="button-prev"></div>
    
        <div class="pagination">
            <span>1</span>
            <span>2</span>
            <span>3</span>
            <span>4</span>
            <span>5</span>
        </div>
    </div>

    <script>
        //前后轮播
        var showIndex=0;//当前显示哪一张
        var next_btn=$(".button-next");//后一张按钮
        var prev_btn=$(".button-prev");//前一张按钮
        var sliders = $(".slider");     // 所有元素数组;
        var wrapper = $(".wrapper");     // 大长条; 
        var container = $(".container");   // 容器;
        var paginBtns = $(".pagination span"); 

        function $(selector){
            var ele=null;
            return (ele=document.querySelectorAll(selector)).length===1?ele[0]:ele;
        }

        //前一张按钮
        prev_btn.addEventListener("click",handlerClick);

        next_btn.addEventListener("click",handlerClick1);
        function handlerClick(evt){
            var e=evt||window.event;
            // console.log(e);
            getIndexPrev();
            makeBannerMove();
        }

        function handlerClick1(evt){
            var e=evt||window.event;
            // console.log(e);
            getIndexNext();
            makeBannerMove();
        }


        function getIndexPrev(){
           if(showIndex===0){
               showIndex=sliders.length-1;
               wrapper.style.left=-(sliders.length-1)*600+"px";
           }else{
               showIndex--;
           }
        }

        function getIndexNext(){
         
            if(showIndex===sliders.length-1){
                showIndex=1;
                wrapper.style.left=0;
            }else{
                showIndex++;
            }
        }

        function makeBannerMove(){
            move(showIndex*-600,wrapper,"left");
            for(var i=0,btn;btn=paginBtns[i++];){
                btn.className="";
            }
            paginBtns[showIndex].className="active";
        }

        for(var i=0,btn;btn=paginBtns[i++];){
            btn.index=i;
            btn.addEventListener("mouseover",handlerOver);
        }

        function handlerOver(){
            showIndex=this.index-1;
            makeBannerMove();
        }

    container.onclick = function(evt){
      var e = evt || window.event;
      var target = e.target || e.srcElement;
      if(target === next_btn || target === prev_btn){
            move(-600 * showIndex , wrapper , "left");
      }
}

        // setInterval(function(){
        //     //在程序之中怎么处罚事件；

        //     var evt=new Event("click");
        //     Object.assign(evt,{
        //         say:"hello"
        //     })

        //     prev_btn.dispatchEvent(evt);
        // },3000)

        function move(target,dom,attr){
            clearInterval(dom.timer);
            var target=attr==="opacity"?target*100:target;
            dom.timer=setInterval(function(){
                var iNow=attr==="opacity"?parseInt(getComputedStyle(dom)[attr]*100):parseInt(getComputedStyle(dom)[attr]);

                var speed=(target-iNow)/10;
                speed=speed>0?Math.ceil(speed):Math.floor(speed);
                if(target===iNow){
                    clearInterval(dom.timer);
                }else{
                    dom.style[attr]=(attr==="opacity")?(iNow+speed)/100:iNow+speed+"px";
                }
            },50)
        }

        
    </script>
    
</body>
</html>