<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <form action="javascript:void(0)" id="form">
        <p>
            <span>邮箱 :</span>
            <input type="text" id="email">
      </p>
      <p>
            <span>用户名 :</span>
            <input type="text" id="username">
      </p>
      <p>
            <span>密码 :</span>
            <input type="text" id="password">
      </p>
      <p>
            <span></span>
      </p>
      <button id="btn">提交</button>
    </form>
    <script>
        var email=$("#email");
        var username=$("#username");
        var password=$("#password");

        function $(selector){
            var res=null;
            return (res=document.querySelectorAll(selector)).length==1? res[0] : res ;
        }

        function checkEmail(){
            //取值
            var emailValue=this.value;
            //正则
            var reg=/^[0-9a-z]\w{5,19}@[a-z0-9]{2,10}\.(com|cn|net)$$/i;
            //验证
            if(reg.test(emailValue)){
                this.style.borderColor="green";
            }
            else{
                this.style.borderColor="red"
            }
        }
        function checkPassword(){
            var passwordValue=this.value;
            var reg=/^[\!\@\#\$\%\^\&\*\(\)0-9a-z_\-]{6,}$/i;
            if(reg.test(passwordValue)){
                this.style.borderColor="green";
                var count=0;
                if(/\d/.test(passwordValue)){
                    count++;
                }
                if(/[a-z]/i.test(passwordValue)){
                    count++;
                }
                if(/^[\u4e00-\u9fa5a-z0-9_\-]{4,20}$/){
                    count++;
                }
                console.log(count);
                switch(count){
                  case 1 : 
                        this.style.borderColor = "red";
                        break;
                  case 2 : 
                        this.style.borderColor = "orange";
                        break;
                  case 3 : 
                        this.style.borderColor = "yellowgreen";
                        break;
                  default :
                        this.style.borderColor = "red";
            }
            }
            
            else{
                this.style.borderColor="red"
            }
        }
        function checkUsername(){
            var usernameValue=this.value;
            var reg=/^[\u4e00-\u9fa5a-z0-9_\-]{4,20}$/;
            if(reg.test(usernameValue)){
            if(/^\d+$/.test(usernameValue) || /\-$/.test(usernameValue)){
                  this.style.borderColor = "red";
            }else{      
                  this.style.borderColor = "green";
            }
      }else{
            this.style.borderColor = "red";
      }
        }
        email.addEventListener("blur",checkEmail);
        password.addEventListener("blur",checkPassword);
        username.addEventListener("blur",checkUsername);

        
    </script>
</body>
</html>