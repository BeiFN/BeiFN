<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>综合表单验证</title>
    <style>
        #froms{width:600px;height: 600px;background: #444;font-size:14px;color:#eaeaea;}
        #froms p{color:darkgoldenrod;font-size: 12px;margin:10px 0 0 20px;}
        fieldset{border:none}
        fieldset legend{font-size: 18px;color:blue;margin:0px 0 0 40px;}
        fieldset label{display:inline-block;margin-left: 60px;}
        fieldset input{width:200px;height:15px;background: #eaeaea;display: inline-block;margin-left: 100px;border-radius: 5px;}
        fieldset #userpwd1{margin-left:72px;}
        fieldset #userphone{margin-left: 72px;}
        fieldset #check{margin-left: 112px;width:80px;height: 15px;display: inline-block;}
        fieldset #checknum{width:80px;height: 15px;background: rgb(255, 255, 255);margin-left: 10px;}
        fieldset #btn{width:100px;height: 30px;background: blue;border-radius: 5px;font-size: 18px;color: #eaeaea;display: inline-block;margin-left: 200px;}
        fieldset #free{width:15px;height: 15px;display: inline-block;margin-left: 20px;}
        fieldset span {display: inline-block;width: 70px;height: 30px;line-height: 30px;background: #ddd;text-align: center;margin: 4px 2px;}
        fieldset i{width:100px;height: 20px;display: inline-block;vertical-align: middle;background: honeydew;color: red;font-size: 12px;}
        /* fieldset #tishi{width: 80px;height: 20px;display: inline-block;} */
        em{color: red;}
        .default {background: #eeeeee;}
        .weak {background: #FF0000;}
        .medium {background: #FF9900;}
        .strong {background: #33CC00;}
        fieldset p{padding-left: 50px;display: inline-block;width:250px;}
    </style>
    </style>
</head>
<body>
    <form id="froms" action="" >
        <p>注意<em class="a1">*</em>为必填项</p>
        <fieldset>
            <legend>账户详细资料</legend>
            <label for="">用户名称</label><input type="text" id="username"><br/><br/>
            <label for="">登陆密码</label><input type="password" name="" id="userpwd"><br/><br/>
            <label for="">重复登陆密码</label><input type="password" name="" id="userpwd1"></span><i id="tishi"></i><br/><br/>
            <label for="">密码安全级别</label> <p><span>弱</span><span>中</span><span>强</span></p>
                
        </fieldset>
        <fieldset>
                <legend>个人信息资料</legend>
                <label for="">电子邮件</label><input type="text" id="email" placeholder="请输入您的电子邮箱"><br/><br/>
                <label for="">真实姓名</label><input type="text" id="name"><br/><br/>
                <label for="">中奖通知手机</label><input type="text" id="userphone"><br/><br/>
                <label for="">验证码</label><input type="text" id="check"><input type="text" id="checknum"><br/><br/>
                <button id="btn"> 注册</button>
                <input type="checkbox" id="free">10天内免登录
        </fieldset>
    </form>
    <script>
        //  //用户名长度6-20
         username.onblur = handlerBlur;
            function handlerBlur(){
                  // 获取用户输入的内容; => 字符串;
                var content = username.value;
                  // 验证  1 => 用户名长度6-20
                if(content.length >= 6 && content.length <= 20){
                  }else{
                        alert("用户名长度应该在6 - 20 位之间");
                        return false;
                  }
                  if(isNaN(content[0])){
                  }else{
                        alert("首字符不能为数字");
                        return false;
                  }
                  for(var i = 0 , letter; letter = content[i++];)
                        var ascii =  letter.charCodeAt(0);
                        if(!(ascii >= 48 && ascii <= 57 ||  ascii>=65 && ascii<=90 || ascii >=97 && ascii <= 122 || ascii === 95)){
                            alert("只能以数字字母下划线进行命名"); 
                              return false;
                        }
                  }
                window.onload = function(){
                var oInput = document.getElementById('userpwd');
                oInput.value = '';
                var spans = document.getElementsByTagName('span');
                oInput.onkeyup = function(){
                    //强度状态设为默认
                    spans[0].className = spans[1].className = spans[2].className = "default";
                    var pwd = this.value;
                    var result = 0;
                    for(var i = 0, len = pwd.length; i < len; ++i){
                        result |= charType(pwd.charCodeAt(i));
                    }
                    var level = 0;
                    //对result进行四次循环，计算其level
                    for(var i = 0; i <= 4; i++){
                        if(result & 1){
                            level ++;
                        }
                        //右移一位
                        result = result >>> 1;
                    }
                    if(pwd.length >= 6){
                        switch (level) {
                            case 1:
                                spans[0].className = "weak";
                                break;
                            case 2:
                                spans[1].className = "medium";
                                break;
                            case 3:
                            case 4:
                                spans[2].className = "strong";
                                break;
                        }
                    }
                }
                function charType(num){
            if(num >= 48 && num <= 57){
                return 1;
            }
            if (num >= 97 && num <= 122) {
                return 2;
            }
            if (num >= 65 && num <= 90) {
                return 4;
            }
            return 8;
        }
                }
                userpwd1.onblur=getPwd;
                function getPwd(){
                    var oInput = document.getElementById('userpwd').value;
                    var oInput1 = document.getElementById('userpwd1').value;
                if(oInput==oInput1)
                {
                    document.getElementById("tishi").innerHTML="<font color='green'>两次密码相同</font>";
                }
                else{
                    document.getElementById("tishi").innerHTML="<font color='red'>两次密码不相同</font>";
                }
                }

               //点击，生成数字字母验证码
            var numberList=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];
            checknum.onclick =function(){
                var num="";
                for(var i=0;i<4;i++){
                    var index = parseInt(Math.random()*numberList.length);
                    num +=numberList[index];
                }
                checknum.value = num;
                
            }
            check.onblur =function(){
                var num1=document.getElementById('check').value;
                var num=document.getElementById('checknum').value;
                if(num1!=num){
                    // document.getElementById("btn").disabled = true;
                    document.getElementById('check').value="";
                    document.getElementById("btn").disabled = true;
                }
        }
                
               
    </script>
    
</body>
</html>