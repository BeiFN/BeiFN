<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ES5数组新方法</title>
</head>
<body>
    <script>
    /***
     * 1.forEach   
     * 返回值：没有 undefined
     * 作用：用来遍历数组   通过形参函数可以获得一个数组的 值 下标 数组本身  
     * 方法：接受一个函数作为参数，并在方法内调用参数函数数组项次数
     * 
     * 2.map
     * 返回值：一个新数组，新数组中装的是参数函数的返回值
     * 作用：通过形参函数可以对数组的值 index等进行运算，并将结果生成数组
     * 3.filter
     * 返回值：返回新数组，会根据参数函数的返回值判定是否该将具体的项加入新数组
     * 作用：通过形参函数里添加条件，可以筛选出数组中的符合特定条件的数组组成新数组
     * 4.some
     * 返回值：true/false
     * 作用：判定数组中是否存在某个符合条件的，一旦发现存在的返回true，some
     * 5.every
     * 返回值：true/false
     * 作用：方法测试一个数组内的所有元素是否都能通过某个指定函数的测试。它返回一个布尔值。
     * 6.reduce
     * 
     * 
     * 
     * 
     * 
     * ***/    

     //1.forEach
    //  var arr = [1,2,3,4,5,6,7,8,9];
    //  arr.forEach(foo);
    //  console.log(arr.forEach(foo));
    //  function foo( item ,index , arr){
    //     console.log(item,index,arr)
    //  }
    //myforEach
    // var arr = [1,2,3,4,5,6,7,8,9];
    // function myForEach(arr,fn){
    //     for(i=0;i<arr.length;i++){
    //         fn(arr[i],i,arr);
    //     }
    // }
    // function too(item,index,arr){
    //     console.log(item,index,arr);
    // }
    // myForEach(arr,too)
    //2.map 
    // 月薪增长1.3倍
    // 1.forEach方法
    // var arr = [15000,20000,21000,26000,3000,2000,8000];
    // var res = [];
    // arr.forEach(function(item){
    //     res.push(item*1.3)
    // })
    // console.log(res); //=>(7) [19500, 26000, 27300, 33800, 3900, 2600, 10400]
    //2.map方法
    // var arr = [15000,20000,21000,26000,3000,2000,8000];
    // var newArray = arr.map(function(item,index){
    //     return item*1.3;
    // })
    // console.log(newArray); //=>(7) [19500, 26000, 27300, 33800, 3900, 2600, 10400]

    //myMap
    // function myMap(arr,fn){
    //     var res = [];
    //     for(var i =0;i<arr.length;i++){
    //         res.push(fn(arr[i],i,arr));//将函数返回值放入res
    //     }
    //     return res;
    // }

    // 3.filter
    // var arr = [15000,20000,21000,26000,3000,2000,8000];
    // var newArray = arr.filter(function(item,index){
    //     return item>=10000;
    // })
    // console.log(newArray);//=>(4) [15000, 20000, 21000, 26000]
    
    //myFilter
    // function myFilter (arr,fn){
    //     var res = [];
    //     for(var i = 0;i<arr.length;i++){
    //         if(fn(arr[i],i,arr)){   //fn的返回值是一个判断
    //             res.push(arr[i]);
    //         }
    //     }
    //     return res;
    // }

    //4.some
    // var arr = [15000,20000,21000,26000,3000,2000,8000];
    // var boolean = arr.some(function (item,index,arr){
    //     console.log(item);
    //     return item === 3000;
    // })
    // console.log(boolean);

    //mySome
    // var arr = [15000,20000,21000,26000,3000,2000,8000];
    // function mySome(arr,fn){
    //     for(var i = 0;i < arr.length;i++){
    //        if(fn(arr[i],i,arr)){
    //            return true;
    //        }
    //     }
    //     return false;
    // }
   
    // function foo(item){
    //     console.log(item);
    //     return item === 3000;
        
    // } 
    // mySome(arr,foo);

    //5.every
    // var arr = [15000,20000,21000,26000,3000,2000,8000];
    // var boolean = arr.every(function(item,index,arr){
    //     return item % 2 === 0;
    // })
    // console.log(boolean);

    // function myEvery(arr,fn){
    //     for( var i = 0 ; i < arr.length ; i++ ){
    //         if(!fn(arr[i],i,arr)){
    //             return false;
    //         }
    //     }
    //     return true;
    // }

    //6.reduce
    // var arr = [15000,20000,21000,26000,3000,2000,8000];
    // var res = arr.reduce(function(pre,now,index,arr){
    //     console.log(pre,now,index);
    //     return pre + now;
    // })
    // console.log(res); //=>95000
    
    // function myReduce(arr,fn){
    //     var prev = arr[0];
    //     for(var i = 1;i<arr.length;i++){
    //         pre = fn(prev,arr[i],i,arr);
    //         return prev;
    //     }
    // }
    // console.log(myReduce(arr,function(prev,now,index){
    //     return prev + now;
    // }))

    //flat
    var arr = [
                  [1,2,3,4,5],
                  [2,3,4,5,7]
            ]

    console.log(arr.flat());

    function myFlat(arr,fn){
        res = [];
        for(var i =0;i<arr.length;i++){
            if(!(arr[i] instanceof Array)){
                res.push(arr[i])
            }
            else{
                myFlat(arr[i]);
            }
        }
        return res;
    }

    function flat(arr){
        if(!flat.res){
            flat.res = [];
        }
        for(var i = 0; i<arr.length;i++){
            if(!(arr[i] instanceof Array)){
                flat.res.push(arr[i]);
            }else{
                flat(arr[i])
            }

        }
        return flat.res;
    }

    var res=[];
    var i = 0;
    while(true){                                    //一级如果不是数组，直接push，一级如果是数组，将二级数组的内push，直到为a[i][k]不存在
        if(!(arr[i] instanceof Array)){             //一级直到a[i]不存在，undefined
            res.push(arr[i]);
        }else{
            var k =0;
            while(true){
                if(!arr[i][k]){
                    break;
                }
                res.push(arr[i][k]);
                k++
            }
        }
        i++
        if(arr[i]===undefined){
            break;
        }
    }
    </script>
    
</body>
</html>