<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #box{
            width: 100px;
            height: 100px;
            background: #852;
            position: absolute;
        }
    </style>
</head>
<body>
    <div id="box"></div>
    <script>
        var box = document.getElementById("box");
        move(box,{
            "width" : 800,
            "height": 400,
            "opacity":21
        },function(){
            box.style.background = "skyblue";
        })
        /**
        *运动构架
        *参数：dom对象  属性对象  结束后的回调函数
        **/
        function move(dom, options,callback){
            clearInterval(dom.timer);                                               
            dom.timer = setInterval(function(){
                for(var attr in options){                                           // 遍历属性对象  分为 opacity和px考虑
                    if(attr === "opacity"){
                        var iNow = parseInt(getComputedStyle(dom)[attr]*100)
                    }else{
                        var iNow = parseInt(getComputedStyle(dom)[attr])
                    }
                    var speed = (options[attr]-iNow)/10;                               //定义速度
                    speed = speed>0? Math.ceil(speed):Math.floor(speed);               //速度取整
                    if(options[attr]===iNow){                                          //当某一属性值达到目标值，将它从对象中剔除
                        delete options[attr];
                        if(Object.keys(options).length === 0){                         //结束条件
                            clearInterval(dom.timer);
                            typeof callback === "function"?callback():"";
                        }
                    }else{                                                              //运动机制，分为opacity及px考虑
                        if(attr === "opacity"){
                            dom.style[attr] = (iNow + speed)/100;
                        }else{
                            dom.style[attr] = (iNow + speed)+ "px";
                        }

                    }
                }
            },50)
        }
    </script>
</body>
</html>