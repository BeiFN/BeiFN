<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>一个元素多个属性值同时改变</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        #box{
            height: 200px;
            width: 200px;
            background: black;
        }
    </style>
</head>
<body>
    <div id="box"></div>
    <script>
        // var json = {
        //     height : 400,
        //     width  : 400,
        //     opacity: 0.2
        // }
        //将属性和目标值，都写在对象中
        var box = document.getElementById("box");
        var timer = null;
        box.addEventListener("click",function(){
            move(box,{
                height : 400 ,
                width  : 400 ,
                opacity: 0.2
            },function(){
                box.style.background = "red";
            });
        });
        function move(ele , json,callback){
            clearInterval(timer);
            timer = setInterval(function(){
                for(var attr in json){
                    if(attr === "opacity"){
                        var iNow = parseInt(getComputedStyle(ele)[attr] * 100);
                    }
                    else{
                        var iNow = parseInt(getComputedStyle(ele)[attr]);
                    }
                    var speed = (attr === "opacity" ? (json[attr]*100 - iNow) /10 : (json[attr] - iNow)/10 );
                    speed > 0 ? speed =Math.ceil(speed) : speed = Math.floor(speed);
                    if(json[attr] === iNow){
                        delete json[attr];
                        if(Object.keys(json)===0){
                            clearInterval(timer);
                            typeof callback === "function" ? callback() : "";
                        }
                    }
                    else{
                        if(attr === "opacity"){
                            ele.style[attr] = (iNow + speed) /100;
                        }
                        else{
                            ele.style[attr] = iNow + speed + "px";
                        }
                    }
                }
            },80)
        }
    </script>
</body>
</html>