<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>运动框架</title>
    <style>
        #box {
            width: 100px;
            height: 100px;
            background: aqua;
            position: absolute;
        }
    </style>
</head>

<body>
    <div id="box"></div>
    <script>
        var box = document.getElementById("box");

        // function move(dom, options) {
        //     clearInterval(dom.timer);
        //     dom.timer = setInterval(function () {
        //         iNow = attr === "opacity" ? getComputedStyle(dom)[attr] * 100 : getComputedStyle(dom)[attr];
        //         var speed = (target - iNow) / 10;
        //         speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);
        //         if (iNow === target) {
        //             clearInterval(dom.timer);
        //         } else {
        //             dom.style[attr] = attr === "opacity" ? ((iNow + speed) / 100) : iNow + speed + "px";
        //         }
        //     }, 50)
        // }

        function move(dom, options, callback) {
            clearInterval(dom.timer);
            dom.timer = setInterval(function () {
                for (var attr in options) {
                    iNow = parseInt(attr === "opacity" ? (getComputedStyle(dom)[attr] * 100) : getComputedStyle(dom)[attr]);
                    var speed = (options[attr] - iNow) / 10;
                    speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);
                    if (iNow === options[attr]) {
                        delete options[attr];
                        if (Object.keys(options).length === 0) {
                            clearInterval(dom.timer);
                            typeof callback === "function" ? callback() : "";
                        }
                    } else {
                        dom.style[attr] = attr === "opacity" ? ((iNow + speed) / 100) : (iNow + speed + "px");
                    }
                }
            },50);
        }

        move(box, {
            "width": 800,
            "height": 400,
            "opacity": 20
        }, function () {
            box.style.background = "fuchsia";
        });
    </script>
</body>

</html>