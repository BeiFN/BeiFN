<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>拖拽</title>

      <style>
            *{
                  margin: 0;
                  padding: 0;
            }
            #box{
                  width: 200px;
                  height: 200px;
                  background-color: red;
                  background-repeat: no-repeat;
                  background-size: 150%;
                  background-position :center;
                  position: absolute;
            }
            .detail{
                  height: 50px;
                  background: rgba(0,0,0,0.6);
                  text-align: center;
                  position: fixed;
                  top: 0;
                  width: 100%;
            }
            .detail h2{
                  color: #fff;
                  line-height: 50px;
                  vertical-align: middle;
            }
            #replay{
                  height: 50px;
                  width: 50px;
                  background: #fff;
                  color : #333;
                  text-align: center;
                  line-height: 50px;
                  vertical-align: middle;
            }
      </style>
</head>
<body>
      <div id="box"></div>
      <div class="detail">
            <h2 > 
                  <span id="position">位置在 : left : 100px , top : 100px</span>
                  <button id="replay">回放</button>
            </h2>
      </div>
</body>
<script>
      var box=document.getElementById("box")
      var position=document.getElementById("position")
      var replay=document.getElementById("replay")
      var offsetX=null
      var offsetY=null
      var timer=null
      var positionArr=[]

      box.addEventListener("mousedown",start)
      document.addEventListener("mouseup",end)
      replay.addEventListener("click",replayBox)

      function start(evt){
            var e=evt||event
            offsetX=e.offsetX
            offsetY=e.offsetY
            var position={
                  left:box.offsetLeft,
                  top:box.offsetTop
            }
            positionArr.push(position)
            document.addEventListener("mousemove",drag)
      }
      function drag(evt){
            var e=evt||event
            var nLeft=e.clientX
            var nTop=e.clientY
            nLeft=nLeft-offsetX
            nTop=nTop-offsetY
            box.style.left=nLeft+"px"
            box.style.top=nTop+"px"
            var position={
                  left:nLeft,
                  top:nTop
            }
            positionArr.push(position)
            showPosition()
      }
      function end(){
            document.removeEventListener("mousemove",drag)
      }
      function showPosition(){
            var nLeft=box.offsetLeft
            var nTop=box.offsetTop
            position.innerHTML="位置 left:"+nLeft+"px,top:"+nTop+"px"
      }
      function replayBox(){
            var i=positionArr.length
            clearInterval(timer)
            timer=setInterval(
                  function(){
                        i--;
                        box.style.left=positionArr[i].left+"px";
                        box.style.top=positionArr[i].top+"px"
                        if(i<=0){
                              clearInterval(timer)
                              positionArr.length=0
                        }
                  },10
            )
      }
      showPosition()





      // var box=document.getElementById("box");
      // var position=document.getElementById("position");
      // var replay_btn=document.getElementById("replay");
      // var offsetX=null;
      // var offsetY=null;
      // var positionArr=[];
      // var timer=null;
      // box.addEventListener("mousedown",start)
      // document.addEventListener("mouseup",end)
      // replay_btn.addEventListener("click",replay)
      // function start(evt){
      //       var e=evt||event;
      //       offsetX=e.offsetX;
      //       offsetY=e.offsetY;
      //       document.addEventListener("mousemove",draging); 
      //       var position={
      //             left:box.offsetLeft,
      //             top:box.offsetTop
      //       }
      //       positionArr.push(position);
      // }
      // function draging(evt){
      //       var e=evt||event;
      //       var nLeft=e.clientX;
      //       var nTop=e.clientY;

      //       nLeft=nLeft-offsetX;
      //       nTop=nTop-offsetY;

      //       box.style.left=nLeft+"px";
      //       box.style.top=nTop+"px";
      //       var position={
      //             left:nLeft,
      //             top:nTop
      //       }
      //       positionArr.push(position);
      //       showPosition()
      // }

      // function end(){
      //       document.removeEventListener("mousemove",draging);
      // }

      // function showPosition(){
      //       var nLeft=box.offsetLeft;
      //       var nTop=box.offsetTop;
      //       position.innerHTML = "位置:left:"+nLeft+"px,top:"+nTop+"px";
      // }

      // function replay(){
      //       var i=positionArr.length;

      //       clearInterval(timer);
      //       timer=setInterval(function(){
      //             i-- ;

      //             box.style.left=positionArr[i].left+"px";
      //             box.style.top=positionArr[i].top+"px";

      //             if(i===0){
      //                   clearInterval(timer);
      //                   positionArr.length = 0;
      //             }
      //             showPosition()
      //       },50)          
      // }
      // showPosition()
</script>
</html>