<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>字符串过滤 EMB|朱盟</title>
    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
        }

        #edit {
            margin: 0 auto;
            width: 1000px;
            text-align: center;
            overflow: hidden;
        }

        #commentlist {
            margin: 0 auto;
            width: 1000px;
        }

        #commentlist .comment {
            width: 800px;
            min-height: 80px;
            margin: 20px auto;
            background: darkkhaki;
            border-radius: 3px;
            position: relative;
            overflow: hidden;
        }

        #commentlist .comment p {
            margin: 10px 10px;
        }

        #sendBtn {
            display: block;
            margin: 10px auto;
            width: 100px;
            height: 30px;
            line-height: 30px;
            background: linear-gradient(to bottom, #faa, #f40);
            box-shadow: 0 0 2px #000;
            border-radius: 4px;
        }

        #sendBtn:hover {
            cursor: pointer;
            background: linear-gradient(to bottom, #fee, #f40);
        }
    </style>
</head>

<body>
    <div id="edit">
        <p>请输入你的发言:</p>
        <p>
            <textarea id="sendtxt" name="" rows="5" cols="60"></textarea>
        </p>
        <p><a class="send" id="sendBtn">发送</a></p>
    </div>
    <div id="commentlist">
        <div class="comment">
            <p>张三疯:</p>
            <p style="word-break: break-all;">
                xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
            </p>
            <p style="text-align: right;">2016/9/4 16:06</p>
        </div>

        <div class="comment">
            <p>张三疯:</p>
            <p style="word-break: break-all;">
                xxxxxxxxxxxxxxxxxxxxxx
            </p>
            <p style="text-align: right;">2016/9/4 16:06</p>
        </div>
    </div>
</body>
<script type="text/javascript">
    var sendBtn = document.getElementById("sendBtn");
    var sendTxt = document.getElementById("sendtxt");
    var msList = document.getElementById("commentlist");
    var senderName = prompt("请输入您的名字");
    var filterList = [
        "MMP",
        "SB"
    ]
    sendBtn.onclick = function () {
        var txt = sendTxt.value;
        txt = txt.toUpperCase();
        for (const key in filterList) {
            // console.log(txt);
            if (txt.indexOf(filterList[key]) !== -1) {
                const element = filterList[key];
                console.log("过滤字符", element);
                var reg = new RegExp(element, "gi");
                txt = txt.replace(reg, "**");
                console.log(txt);
            }
        }

        var ms = `<div class="comment">
            <p>${senderName}</p>
            <p style="word-break: break-all;">${txt} </p>
            <p style="text-align: right;">${new Date().toLocaleTimeString()}</p>
        </div>`;

        msList.innerHTML = ms + msList.innerHTML;
    }





    // 统计字符串中每个字符的个数？ 去掉重复的字符
    function charCount(str) {
        var count = {};
        for (const key in str) {
            const element = str[key];
            element in count ? count[element]++ : count[element] = 1;
        }
        return count;
    }
    // console.log(charCount("abaawdawssbab"));

    //验证码的生成？
    /**
     *随机数的生成
     *
     * @param {最小范围*} min
     * @param {*最大范围} max
     * @returns
     */
    function randomNumber(min, max) {
        return min + Math.round(Math.random() * (max - min));
    }

    function randomChar(o) {
        // 单字符生成
        switch (o) {
            case "a":
                return String.fromCharCode(randomNumber(97, 122));
                break;
            case "A":
                return String.fromCharCode(randomNumber(65, 90));
                break;
                break;
            case "0":
                return String.fromCharCode(randomNumber(48, 57));
                break;

            default:
                return o;
                break;
        }

    }
    // 格式化生成验证码  A 代表大写字母 随机生成数字，并转化层所对应Ascll 码对应的随机字母，根据字母和数字的范围来生成
    function randomChars(express) {

        var str = "";
        for (const key in express) {
            str += randomChar(express[key]);
        }
        return str;
    }
    // console.log(randomChars("A-A-aaa-0"));


    //密码强度？

    function charHas(str) {

        //  数字：[0x30,0x39]（或十进制[48, 57]）
        // 小写字母：[0x61,0x7a]（或十进制[97, 122]）
        // 大写字母：[0x41,0x5a]（或十进制[65, 90]）
        var count = {
            num: false,
            charup: false,
            charlow: false,
            res: 0
        };
        for (const key in str) {
            const element = str[key];
            (element >= 0 && element <= 9) ? (count.num = true) : "";
            (element.charCodeAt(0) >= 65 && element.charCodeAt(0) <= 90) ? (count.charup = true) : "";
            (element.charCodeAt(0) >= 97 && element.charCodeAt(0) <= 122) ? (count.charlow = true) : "";
        }
        count.num ? count.res++ : "";
        count.charup ? count.res++ : "";
        count.charlow ? count.res++ : "";
        return count;
    }

    console.log("12asdaSS",charHas("12asdaSS") );
    console.log("12asda",charHas("12asda") );
    console.log("12",charHas("12"));
</script>

</html>