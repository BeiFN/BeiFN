<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
      form{
                
                position: relative;
                font-size: 12px;
                
          }
      .borderTrue{
                border: 2px solid blue;
                transition: all 1s;
          }
      .borderError{
                border: 2px solid red;
          }
      #changeEmail{
                background: red;
                display: none;
                position: absolute;
                left: 250px;
                top: 0px;
            }
      #changeUsername{
                background: red;
                display: none;
                position: absolute;
                left: 250px;
                top: 35px;
            }
      #changePassword{
                background: red;
                display: none;
                position: absolute;
                left: 250px;
                top: 68px;
            }
      .changes{
            display: block;
            font-size: 10px;
            color: #888;  
          }

      #passwordStrength{
            background: green;
                display: none;
                position: absolute;
                left: 250px;
                top: 101px; 
      }
    </style>
</head>
<body>
      
        <form action="javascript:void(0)" id="form">

                  <span id="changeEmail"></span>
                  <span id="changeUsername"></span>
                  <span id="changePassword"></span>
                  <span id="passwordStrength"></span>

                      <p>
                            <span>邮箱 :</span>
                            <input type="text" id="email">
                            
                      </p>
                      <p>
                            <span>用户名 :</span>
                            <input type="text" id="username">
                      </p>
                      <p>
                            <span>密码 :</span>
                            <input type="text" id="password">
                      </p>
                      <p>
                              <span>重置密码 :</span>
                              <input type="text" id="repassword">
                      </p>
                      <button id="btn">提交</button>
                </form>
    <script>
          var changeList = {
                "0" : "邮箱输入错误",
                "1" : "用户名输入错误",
                "2" : "密码输入错误",
                "3" : "密码强度弱",
                "4" : "密码强度中",
                "5" : "密码强度强",
                "6" : "邮箱输入成功",
                "7" : "用户名输入成功",
                "8" : "密码输入成功"
          }
        var email = $("#email");
        var username = $("#username");
        var password = $("#password");
        var rePassword = $("#repassword");
        var change = $("#change");

        function $(selector){
            var res = null;
            return  (res = document.querySelectorAll(selector)).length === 1 ? res[0] : res;
        }

        email.addEventListener("blur" , validateEmail );
        username.addEventListener("blur" , validateUsername );
        password.addEventListener("blur" , validatePassword );
        repassword.addEventListener("blur" , validateRepassword );
        

        function validateEmail(){
            var value = this.value;
            var reg = /^[a-z][0-9a-z_]{5,9}@qq\.(com|cn)$/i;
            if(reg.test(value)){
                  this.className = "borderTrue";
                  changeEmail.style.display = "block";
                  changeEmail.innerHTML = changeList[6];
                  changeEmail.style.background = "blue";
            }
            else{
                  this.className = "borderError";
                  changeEmail.style.display = "block";
                  changeEmail.innerHTML = changeList[0];
                  changeEmail.style.background = "red";
            }
        }

        function validateUsername(){
              var value = this.value;
              var reg = /^[a-z\u4e00-\u9fa5_]{1,10}$/i;
              if(reg.test(value)){
                    this.className = "borderTrue";
                    changeUsername.style.display = "block";
                    changeUsername.innerHTML = changeList[7];
                    changeUsername.style.background = "blue";

              }
              else{
                  this.className = "borderError";
                  changeUsername.style.display = "block";
                  changeUsername.innerHTML = changeList[1];
                  changeUsername.style.background = "red";
              }
        }

        function validatePassword(){
              var value = this.value;
              var reg = /^[a-z0-9_\*\.]{8,16}$/i;
              if(reg.test(value)){
                    this.className = "borderTrue";
                    changePassword.style.display = "block";
                    changePassword.innerHTML = changeList[8];
                    changePassword.style.background = "blue";
              }
              else{
                  this.className = "borderError";
                  changePassword.style.display = "block";
                  changePassword.innerHTML = changeList[2];
                  changePassword.style.background = "red";
              }
        }

        function validateRepassword(){
            var value = this.value;
              var reg = /^[a-z0-9_\*\.]{8,16}$/i;

              var score = 0;
            if(/\d/.test(value)){
                  score ++ ;
            }
            if(/[a-z]/i.test(value)){
                  score ++;
            }
            if(/[\.\*_]/.test(value)){
                  score ++;
            }
            switch(score){
                  case 1 : 
                        passwordStrength.style.display = "block";
                        passwordStrength.innerHTML = changeList[3];
                        break;
                  case 2 : 
                        passwordStrength.style.display = "block";
                        passwordStrength.innerHTML = changeList[4];
                        break;
                  case 3 : 
                        passwordStrength.style.display = "block";
                        passwordStrength.innerHTML = changeList[5];
                        break;
                  default :
                        this.style.borderColor = "red";
            }
        }
    </script>
</body>
</html>