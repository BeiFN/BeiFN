<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
        <input type="text" id="ipt">
        <div id="content">
    <script>
        function jsonp(url , cb_fild , data){
            return new Promise(function(resolve , reject){
                var GLOBAL_CB = "foo";
                window[GLOBAL_CB] = function(res){
                    //这是异步
                    resolve(res);
                }

                //字段名和回调函数名拼接
                url +=(/\?/.test(url) ? "&" : "?")+ cb_fild + "=" +GLOBAL_CB;

                //判断是否存在数据；数据拼接
                if(typeof data === "object"){
                    var dataStr = "";
                    for(var attr in data){
                        dataStr +=(dataStr.length > 0 ? "&" : "") + attr + "=" + data[attr];
                    
                    }
                    url +="&" +dataStr;
                }
                //请求发送
                var script = document.createElement("script");
                script.src = url;
                script.onload = function(){
                    this.remove();
                }
                document.body.appendChild(script);
            })
        }   
        
        var url ="https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su";

        var data = {
            json : 1,
            p    : 3,
            sil  : 1423_21080_29238_28518_29099_28830_29221_22158,
            req  : 2,
            sc   : "eb",
            csor : 0,
            _:Date.now(),
            wd   :""
        }

        var ipt =document.getElementById("ipt");
        var content = document.getElementById("content");

        ipt.oninput = function(){
                  // console.log(this.value);
                  data.wd = this.value;
                  jsonp( url , "cb" , data)
                  .then( function (res){
                        // console.log(res);
                        var html = "";
                        res.s.forEach( item => html += `<p>${item}</p>`);
                        content.innerHTML = html;
                  })
            }

    </script>
</body>
</html>