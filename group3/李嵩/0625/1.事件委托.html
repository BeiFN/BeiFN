<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
      <style>
            li{
                  list-style-type: none;
            }
            *{
                  margin: 0;
                  padding: 0;
            }

            li{
                  padding: 3px 5px;
                  border-bottom: 2px solid #ddd;
                  text-align: center;
                  width: 80%;
                  margin: 5px auto;
                  background: #fff;
            }
            ul{
                  background: #ddd;
            }
      
      </style>
</head>
<body>

      <ul>
            <li class="lili"><span>这是一个带有事件的li</span></li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
            <li>这是一个带有事件的li</li>
      </ul>
      <script>
            var ul=document.querySelector("ul");
            // ul.addEventListener("click",function(evt){
            //     var e=evt||window.event;
            //     var target =e.target||e.srcElement;

            //     if(target.nodeName ==="LI"){
            //         console.log("hello world");
            //         target .style.background="yellowgreen";
            //     }
            // })
            var foo = null;
            ul.addEventListener("click",delegation(handlerClick,".lili"))
            function delegation(handlerClick,selector){
                return function(evt){
                    var e=evt||window.event;
                    var target=e.target||e.srcElement;
                    var eleList=this.querySelectorAll(selector);
                    var targetFamily=[];
                    var _tempTarget=target;
                    var count=0;
                    while(true&&count++<100){
                        if(_tempTarget===this){
                            break;
                        }
                        targetFamily.push(_tempTarget);
                        _tempTarget =_tempTarget.parentNode;
                    }
                    for(var i=0,ele;ele=eleList[i++];){
                        if(targetFamily.length ===1? ele===targetFamily[0]:targetFamily.indexOf(ele)!==-1){
                            handlerClick.call(ele);
                            break;
                        }
                    }
            //         if(target.nodeName="selector"){
            //             handlerClick.call(target,e);
            //         }
                }
            }
            function handlerClick(){
                this.style.background="yellowgreen";
            }
      </script>
</body>
</html>