<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>继承</title>
    <style>
        #box,#box2{
            width: 100px;
            height: 100px;
            background: #ddd;
            position: absolute;
            left: 0;
            top: 0;
        }
        #box2{
            left: 200px;
            background: yellowgreen;
        }
    </style>
</head>
<body>
    <div id="box"></div>
    <div id="box2"></div>
    <script>
        function Drag(selector){
            this.init(selector);
        }
        Drag.prototype = {
            constructor : Drag,
            init : function(selector){
                this.moveCb = null;
                this.ele = document.querySelector(selector);
                this.ele.addEventListener("mousedown" , this.start.bind(this));
                this.ele.addEventListener("mouseup" , this.end.bind(this));
            },
            start : function(evt){
                var e = evt || window.event;
                this.offsetx = e.offsetX;
                this.offsety = e.offsetY;

                document.removeEventListener("mousemove" , this.moveCb);
                document.addEventListener("mousemove" , this.moveCb = this.handlerMove.bind(this));
            },
            handlerMove : function(evt){
                var e = evt || window.event;
                var x = e.clientX,
                    y = e.clientY;
                    x = x - this.offsetx;
                    y = y - this.offsety;
                this.move(x , y , this.ele);
            },
            move : function(x,y){
                this.ele.style.left = x + "px";
                this.ele.style.top  = y + "px";
            },
            end : function(){
                document.removeEventListener("mousemove", this.moveCb);
            }
        }

        function ExtendDrag(selector){
            Drag.call(this , selector)
        }
        ExtendDrag.prototype = Object.create(Drag.prototype);
        ExtendDrag.prototype.move = function(x,y,ele){
            var res = this.boundary(x , y);

            ele.style.left = res.x + "px";
            ele.style.top  = res.y + "px";
        }
        ExtendDrag.prototype.boundary = function(x , y){
            x = x < 0 ? 0 : x ;
            y = y < 0 ? 0 : y ;

            return {
                x,
                y
            }
        }
        new ExtendDrag("#box");
        new Drag("#box2");
    </script>
</body>
</html>