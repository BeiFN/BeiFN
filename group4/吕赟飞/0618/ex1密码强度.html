<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <input type="text" placeholder="请输入用户名" id="username"><br>
    <input type="password" placeholder="请设置密码" id="userpw"><span id="tip"></span>

    <script>

        userpw.onblur = blurHandler;
        function blurHandler() {
            var pwStr = userpw.value;
            var _temp = [0, 0, 0, 0];
            for (var i = 0; i < pwStr.length; i++) {
                var asc = pwStr[i].charCodeAt(0);
                console.log(asc)
                if (asc >= 48 && asc <= 57) {
                    _temp[0] = 1;
                } else if (asc >= 65 && asc <= 90) {
                    _temp[1] = 1;
                } else if (asc >= 97 && asc <= 122) {
                    _temp[2] = 1;
                } else {
                    _temp[3] = 1;
                }
            }

            var sum = 0;
            for (var j = 0; j < 4; j++) {
                sum += _temp[j];
            }

            if (sum === 1) {
                userpw.style.borderColor = "red";
                tip.textContent = "弱"
            } else if (sum === 4) {
                userpw.style.borderColor = "green";
                tip.textContent = "强"
            } else {
                userpw.style.borderColor = "blue";
                tip.textContent = "中"
            }
        }

        username.onblur = handlerBlur;
        function handlerBlur() {
            var content = username.value;

            if (content.length >= 6 && content.length <= 20) {
                username.style.borderColor = "green";
            } else {
                username.style.borderColor = "red";
                alert("用户名长度应该在6 - 20 位之间");
                return false;
            }

            if (isNaN(content[0])) {
                username.style.borderColor = "green";
            } else {
                username.style.borderColor = "red";
                alert("首字符不能为数字");
                return false;
            }

            for (var i = 0, letter; letter = content[i++];) {
                var ascii = letter.charCodeAt(0);
                if (!(ascii >= 48 && ascii <= 57 || ascii >= 65 && ascii <= 90 || ascii >= 97 && ascii <= 122 || ascii === 95)) {
                    alert("只能以数字字母下划线进行命名");
                    username.style.borderColor = "red";
                    return false;
                }

            }

        }

    </script>
</body>

</html>