<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Document</title>
      <link rel="stylesheet" href="./styles/index.css">
</head>

<body>

      <div class="container">
            <p class="title">这是一个分页</p>
            <div class="wrapper">
                  <div class="image-list">
                        <!-- <div class="box">
                              <div class="box-img">
                                    <img src="https://img.zcool.cn/community/00ff03598803240000002129833089.jpg@260w_195h_1c_1e_1o_100sh.jpg" alt="">
                              </div>
                              <div class="box-title">
                                    <a href="">
                                                绘本
                                    </a>
                                    <span class="fire"></span>
                              </div>
                        </div> -->
                  </div>
            </div>

            <div class="pagination">

            </div>
      </div>
      <script type="text/html" id="template">
            <% var list=res.data.contents; %>
            <%  for(var i = 0 , item ; item = list[i]; i++) {%>
                  <div class="box">
                        <div class="box-img">
                              <img src="<%= item.cover %>" alt="">
                        </div>
                        <div class="box-title">
                              <a href="">
                                    <%= item.title %>
                              </a>
                              <span class="fire"></span>
                        </div>
                  </div>
            <% } %>
      </script>
      <!-- 工具库 -->
      <script src="../../../ku/jQuery/jQuery_3.4.0.js"></script>
      <!-- 模板引擎 -->
      <script src="../../../ku/ejs/ejs.js"></script>
      <!-- 业务文件 -->
      <!-- <script src="./javascripts/index.js"></script> -->
      <!-- <script src="./Pagination.js"></script> -->
      <script>


            function Pagination(prt) {
                  this.box = $(prt.box);              // 
                  this.pageBox = $(prt.pageBox);
                  this.showN = prt.showN;
                  $.ajax({
                        url: prt.url,
                        data: prt.data,
                  }).then($.proxy(function (res) {
                        console.log(res);
                        var str = ejs.render(prt.template, { res: res });
                        this.html=document.createDocumentFragment();
                        $(this.html).append(str);
                        this.init();
                  }, this));
            }
            $.extend(Pagination.prototype, {
                  init: function () {
                        this.createBtn();
                        this.bindEvent();
                  },
                  // 裁切文档碎片
                  interceptData:function(){
                        
                  },
                  // 创造按钮
                  createBtn: function () {
                        $("<>")
                  },
                  // 绑定事件
                  bindEvent: function () {

                  },
                  // 翻页
                  toPage: function () {

                  }
            })
            new Pagination({
                  url: "http://localhost/zc",
                  data: {
                        pageSize: 100,
                        contentId: ("" + Date.now()).slice(6) + "_3",
                        day: new Date().toISOString().slice(0, 10)
                  },
                  template: template.innerHTML,
                  showN: 5,
                  box: ".image-list",
                  pageBox: ".pagination",
            });

      </script>
      <!-- <script>
      
            new Pagination().init({
                  list : ".image-list",
                  page : ".pagination",
                  getData : {
                        url  : "http://localhost/zc",
                        data : {
                              pageSize : 100,
                              contentId: (""+Date.now()).slice(6) + "_3",
                              day : new Date().toISOString().slice(0,10)
                        }
                  },
                  pageNo : 2,
                  showNo : 10,
                  template : $$("#template").innerHTML
            });
      </script> -->
</body>

</html>