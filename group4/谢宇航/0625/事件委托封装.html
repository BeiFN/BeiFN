<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<ul>
		<li class="box">0000001</li>
		<li class="box">0000002</li>
		<li class="box">0000003</li>
		<li class="box">0000004</li>
		<li class="box">0000005</li>
		<li class="box">0000006</li>
		<li class="box">0000007</li>
		<li class="box">0000008</li>
		<li class="box">0000009</li>
		<li class="box">0000010</li>
		<li class="box">0000011</li>
		<li class="box">0000012</li>
		<li class="box">0000013</li>
		<li class="box">0000014</li>
		<li class="box">0000015</li>
		<li class="box">0000016</li>
		<li class="box">0000017</li>
		<li class="box">0000018</li>
		<li class="box">0000019</li>
		<li class="box">0000020</li>
	</ul>
	<script>
var ul = document.querySelector("ul");

ul.addEventListener("click", delegation(handlerClick, "li"));

function delegation (handlerClick, selector) {
	return function (evt) {
		var e = evt || window.event;
		var target = e.target || e.srcElement; //事件发生的最里层元素
		var eleList = this.querySelectorAll(selector); //this指向ul
		var targetFamily = [];
		var _tempTarget = target;
		while (true) {
			if(_tempTarget === this) break;
			targetFamily.push(_tempTarget); //将最里层到ul的所有父节点保存到数组
			_tempTarget = _tempTarget.parentNode;
		}
		for(var i = 0, ele; ele = eleList[i++];) {
			if(targetFamily.length === 1 ? ele === targetFamily[0] : targetFamily.indexOf(ele) !== -1){
				handlerClick.call(ele, e);
				break;
			}
		}
	}
}
function handlerClick() {
	this.style.background = "yellowgreen";
}


	// var arr = ['adam', 'LISA', 'barT'];
	// arr = arr.map(function(item , index) {
	// 	item = item.toLowerCase();
	// 	return item[0].toUpperCase() + item.slice(1);
	// })
	// console.log(arr);
	</script>
</body>
</html>