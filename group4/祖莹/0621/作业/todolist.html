<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-size: 16px;
            background: #CDCDCD;
        }

        header {
            height: 50px;
            background: #333;
            background: rgba(47, 47, 47, 0.98);
        }

        section {
            margin: 0 auto;
        }

        label {
            float: left;
            width: 100px;
            line-height: 50px;
            color: #DDD;
            font-size: 24px;
            cursor: pointer;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        }

        header input {
            float: right;
            width: 60%;
            height: 24px;
            margin-top: 12px;
            text-indent: 10px;
            border-radius: 5px;
            box-shadow: 0 1px 0 rgba(255, 255, 255, 0.24), 0 1px 6px rgba(0, 0, 0, 0.45) inset;
            border: none
        }

        input:focus {
            outline-width: 0
        }

        h2 {
            position: relative;
        }

        span {
            position: absolute;
            top: 2px;
            right: 5px;
            display: inline-block;
            padding: 0 5px;
            height: 20px;
            border-radius: 20px;
            background: #E6E6FA;
            line-height: 22px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }

        ol,
        ul {
            padding: 0;
            list-style: none;
        }

        li input {
            position: absolute;
            top: 2px;
            left: 10px;
            width: 22px;
            height: 22px;
            cursor: pointer;
        }

        p {
            margin: 0;
        }

        li p input {
            top: 3px;
            left: 40px;
            width: 70%;
            height: 20px;
            line-height: 14px;
            text-indent: 5px;
            font-size: 14px;
        }

        li {
            height: 32px;
            line-height: 32px;
            background: #fff;
            position: relative;
            margin-bottom: 10px;
            padding: 0 45px;
            border-radius: 3px;
            border-left: 5px solid #629A9C;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.07);
        }

        ol li {
            cursor: move;
        }

        ul li {
            border-left: 5px solid #999;
            opacity: 0.5;
        }

        li a {
            position: absolute;
            top: 2px;
            right: 5px;
            display: inline-block;
            width: 14px;
            height: 12px;
            border-radius: 14px;
            border: 6px double #FFF;
            background: #CCC;
            line-height: 14px;
            text-align: center;
            color: #FFF;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
        }

        footer {
            color: #666;
            font-size: 14px;
            text-align: center;
        }

        footer a {
            color: #666;
            text-decoration: none;
            color: #999;
        }

        @media screen and (max-device-width: 620px) {
            section {
                width: 96%;
                padding: 0 2%;
            }
        }

        @media screen and (min-width: 620px) {
            section {
                width: 600px;
                padding: 0 10px;
            }
        }
    </style>
</head>

<body>
    <header>
        <section>
            <label for="title">ToDoList</label>
            <input type="text" id="title" name="title" placeholder="添加ToDo" required="required" autocomplete="off" />
        </section>
    </header>
    <section>
        <h2>正在进行 <span id="todocount">0</span></h2>
        <ol id="todolist" class="demo-box"></ol>
        <h2>已经完成 <span id="donecount">0</span></h2>
        <ul id="donelist"></ul>
    </section>

    <script>
        //选中所需元素
        var ele_input = $("#title");
        var ele_todoList = $("#todolist");
        var ele_doneList = $("#donelist");
        var ele_todoCount = $("#todocount");
        var ele_doneCount = $("#donecount");

        function $(selector) {
            var ele = null;
            return (ele = document.querySelectorAll(selector)).length === 1 ? ele[0] : ele;
        }
        // 按键盘发送事件函数
        ele_input.onkeydown = function (evt) {
            var e = evt || window.event;
            if (e.keyCode === 13) {
                addToDoItem();
                ele_input.select();
            }

            // 添加todo项目
            function addToDoItem() {
                var iptValue = ele_input.value;
                //dom树的创建
                var li = createElement({
                    type: "li",
                    children: [
                        {
                            type: "input",
                            attr: {
                                type: "checkbox"
                            }
                        },
                        {
                            type: "p",
                            html: iptValue
                        },
                        {
                            type: "a",
                            html: "-"
                        }
                    ]
                })
                // 绑定勾选框与删除框事件
                li.children[0].onchange = handerToDoToDone;
                li.children[2].onclick = removeItem;
                // 新添加事件放在最前边
                ele_todoList.insertBefore(li, ele_todoList.childNodes[0]);
                // 计数
                countLi();
            }
            // 勾选框事件函数
            function handerToDoToDone() {
                if (this.checked) {
                    ele_doneList.insertBefore(this.parentNode, ele_doneList.childNodes[0]);
                } else {
                    ele_todoList.insertBefore(this.parentNode, ele_todoList.childNodes[0]);
                }
                countLi()
            }
            // 删除框事件函数
            function removeItem() {
                this.parentNode.remove();
                countLi();
            }
            //计数事件函数
            function countLi() {
                var doneCount = ele_doneList.children.length;
                var todoCount = ele_todoList.children.length;
                ele_todoCount.innerHTML = todoCount;
                ele_doneCount.innerHTML = doneCount;
            }

            function createElement(domJson) {
                typeof domJson === "undefined" ? domJsom = {} : "";
                var ele = document.createElement(domJson.type ? domJson.type : "div");
                for (var attr in domJson.attr) {
                    ele.setAttribute(attr, domJson.attr[attr]);
                }
                ele.innerHTML = domJson.html ? domJson.html : "";
                for (var i = 0, childEle; domJson.children && (childEle = domJson.children[i++]);) {
                    childEle.nodeType === 1 ? ele.appendChild(childEle) : ele.appendChild(createElement(childEle));
                }
                return ele;
            }


        }


    </script>
</body>

</html>