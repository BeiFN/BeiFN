<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <style>
            #box,#box2{
                width: 100px;
                height: 100px;
                background: #ddd;
                position: absolute;
                left: 0;
                top: 0;
            }
            #box2{
                background: yellowgreen;
                left: 200px;
            }
        </style>
    </head>
    <body>
        <div id="box"></div>
        <div id="box2"></div>


        <script>
            function Drag(selector){
                
                this.init(selector);
            }
            Drag.prototype = {
                constructor : Drag,
                init : function(selector){
                    this.moveCb = null;
                    this.ele = document.querySelector(selector);
                    console.log(this.ele);
                    this.ele.addEventListener("mousedown", this.start.bind(this));
                    this.ele.addEventListener("mouseup", this.end.bind(this));

                },
                start :function(evt){
                    var e = evt || window.event;
                    this.offsetx = e.offsetX;
                    this.offsety = e.offsetY;
                    document.removeEventListener("mousemove", this.moveCb);
                    document.addEventListener("mousemove", this.moveCb = this.move.bind(this));
                },
                move : function(evt){
                    // console.log(1);
                    var e = evt || window.event;
                    var x = e.clientX;
                        y = e.clientY;
                        x = x - this.offsetx;
                        y = y - this.offsety;
                    this.ele.style.left = x + "px";
                    this.ele.style.top  = y + "px";
                },
                end : function(){
                    document.removeEventListener("mousemove", this.moveCb);
                }
            }

            new Drag("#box");
        </script>


    </body>
</html>